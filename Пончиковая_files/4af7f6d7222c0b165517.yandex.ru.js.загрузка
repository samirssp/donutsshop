(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["map-widget-app","map-widget-panorama-player-banner"],{81004:(e,t,n)=>{e.exports=n.p+"_/08a10d93b5a5ae1d7b9c8a60d1130dfe.svg"},3978:(e,t,n)=>{e.exports=n.p+"_/4df1b18e04d91a7d6e51416fbc7d6e2c.svg"},48102:(e,t,n)=>{e.exports=n.p+"_/0271ba6b4fcda690a80e91f92edc7177.svg"},19556:(e,t,n)=>{e.exports=n.p+"_/4a64d5af9caa53bf60a0e1406b2a9ae1.svg"},82146:(e,t,n)=>{e.exports=n.p+"_/6ea7417d52f272d43ace9fbac9bd69d5.svg"},42552:(e,t,n)=>{e.exports=n.p+"_/0f53f20efcc0f7d4a72d06e49963a70f.svg"},9912:(e,t,n)=>{e.exports=n.p+"_/9659bbe9fa69477d2a166dabea8ac48d.svg"},50708:(e,t,n)=>{e.exports=n.p+"_/55e8586f6ee1e236775eeb5de3a7d7c8.svg"},23546:(e,t,n)=>{e.exports=n.p+"_/4456c10ecbf5d583bdeb1c3d97ef263a.svg"},53711:(e,t,n)=>{e.exports=n.p+"_/c61b31295f839ad5761ab64c54f182f0.svg"},54741:(e,t,n)=>{e.exports=n.p+"_/8ae41e545e0b7d0739c75619398b63bf.svg"},71880:(e,t,n)=>{e.exports=n.p+"_/80c1d1903a722b7ff4ece5dbb64f1f8b.svg"},90851:(e,t,n)=>{e.exports=n.p+"_/24fb17f86df88b118167ce528daea382.svg"},35439:(e,t,n)=>{e.exports=n.p+"_/aac1f51398ef9422eb5fa8d75a0aa9e7.svg"},82490:(e,t,n)=>{e.exports=n.p+"_/c52e7fc4ec73e5c05bc322b50bb07b4c.svg"},11423:(e,t,n)=>{e.exports=n.p+"_/952701244e8b9bee021d8e8849c931dc.svg"},12122:(e,t,n)=>{e.exports=n.p+"_/b6637cb0d016f22e2676179b68ee92e6.svg"},78450:(e,t,n)=>{e.exports=n.p+"_/0baa9c914ba9b2778c517b28921f1961.svg"},2509:(e,t,n)=>{e.exports=n.p+"_/495897677a950e88ac35bee6acd284f7.svg"},95165:(e,t,n)=>{e.exports=n.p+"_/30dc3931380c1d46fd4ce2e7afaf74e0.svg"},82461:(e,t,n)=>{e.exports=n.p+"_/78fd7e5f9b721a273df35726afb8f72c.svg"},5600:(e,t,n)=>{e.exports=n.p+"_/455ccd488d8c0aee406d8e8cc689c013.svg"},21704:(e,t,n)=>{e.exports=n.p+"_/4ad220f6afa0590a01904bc61bd8c23a.svg"},66419:(e,t,n)=>{e.exports=n.p+"_/d1dade09981e7cd402c01e1cbcd07475.svg"},42363:(e,t,n)=>{e.exports=n.p+"_/c291190c2aa1f05e02c2c78d173ec5f7.svg"},78958:(e,t,n)=>{e.exports=n.p+"_/94b1a3126986232a21129e7155944120.svg"},17049:(e,t,n)=>{e.exports=n.p+"_/61683eb23625df83e8aef32ee06c1e14.svg"},21524:(e,t,n)=>{e.exports=n.p+"_/940d905012949694ddab386686eb71f9.svg"},65606:(e,t,n)=>{e.exports=n.p+"_/2fa4c0a332fe328eb31af96f6b942810.svg"},79039:(e,t,n)=>{e.exports=n.p+"_/1c6f4782634ac5951dc865bf288dd79a.svg"},57070:(e,t,n)=>{e.exports=n.p+"_/9f79510c62081a2e8295f974516febd3.svg"},36410:(e,t,n)=>{e.exports=n.p+"_/6bf7bf56354d5d2326dcb5d26ccb315f.svg"},69777:(e,t,n)=>{e.exports=n.p+"_/526b632dc5485eae718acc1a54c8e8b1.svg"},41197:(e,t,n)=>{e.exports=n.p+"_/33d6b319940be8c3dc7e251a2478efb4.svg"},24064:(e,t,n)=>{e.exports=n.p+"_/c9504bc15d493d33a35111cc69ac6b8a.svg"},77484:(e,t,n)=>{e.exports=n.p+"_/3087f8a7f898f2764b4242a8185f964c.svg"},2285:(e,t,n)=>{e.exports=n.p+"_/0adc8779bdefa7c4b9f58f4fff819771.svg"},72852:(e,t,n)=>{e.exports=n.p+"_/cb2341db6d0af3d9838b64ec9da115b6.svg"},23811:(e,t,n)=>{e.exports=n.p+"_/fb41b675b9ab147c27b75c1787065148.svg"},26779:(e,t,n)=>{e.exports=n.p+"_/9f7ea1b9a3434256ba04e9331ebdffe6.svg"},90870:(e,t,n)=>{e.exports=n.p+"_/fd161c881e6392111418a1036fe1188e.svg"},69085:(e,t,n)=>{e.exports=n.p+"_/ebe60c9063e4a91162d1366e790ea391.svg"},45350:(e,t,n)=>{e.exports=n.p+"_/7f78fe3f36223c298be58eb812e95646.svg"},55172:(e,t,n)=>{e.exports=n.p+"_/5cf17060c6672d32fb90b652cc8d17f0.svg"},65560:(e,t,n)=>{e.exports=n.p+"_/2e1750eb108b5881e5577c7e08041e3f.svg"},73449:(e,t,n)=>{e.exports=n.p+"_/7485047d3440076f2f17ebb52a011c9c.png"},43161:(e,t,n)=>{e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},68170:(e,t,n)=>{e.exports=n.p+"_/9dae14af44a24ba50a1bf841f2d22144.png"},83984:(e,t,n)=>{e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},61159:(e,t,n)=>{e.exports=n.p+"_/9c80a04cdee2564f1b348f2c942570e5.png"},94308:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},2629:(e,t,n)=>{e.exports=n.p+"_/db96e0b37fb683edb082b6d22cd47375.png"},27367:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},30334:(e,t,n)=>{e.exports=n.p+"_/9d7d9192162a766707427f0fdfad6e69.png"},86605:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},85767:(e,t,n)=>{e.exports=n.p+"_/30566ea95b3b85e11fdf731ad19d0cb6.png"},81148:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},39990:(e,t,n)=>{e.exports=n.p+"_/00dbdb577dd780ef99cebd89eabff5b0.png"},77994:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},74721:(e,t,n)=>{e.exports=n.p+"_/6b36feaa685efb371af0a08ebce07269.png"},26093:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},81029:(e,t,n)=>{e.exports=n.p+"_/74ca6ea4b76200fd171c44aa5a49f5a8.png"},8872:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},55583:(e,t,n)=>{e.exports=n.p+"_/4107b60439ecfb91bb4f01454bb365e2.png"},63966:(e,t,n)=>{e.exports=n.p+"_/dff25d38edaaaed43455e2838501c7d2.png"},28182:(e,t,n)=>{e.exports=n.p+"_/581d90e08cdba960142fcabc777c10ad.svg"},74210:(e,t,n)=>{e.exports=n.p+"_/d7eede432ce185c2bcdea2a81dd73d60.svg"},61146:(e,t,n)=>{e.exports=n.p+"_/982f21b161efbb26f879ac8dcf5bc613.svg"},51815:(e,t,n)=>{e.exports=n.p+"_/88dd6621d29f63b3bcd11823a075bab8.svg"},63129:(e,t,n)=>{e.exports=n.p+"_/6dfdf3e1f699e358e2a45696b5910bfc.svg"},74039:(e,t,n)=>{e.exports=n.p+"_/30a6860b000faf67b1e246c0be9a9886.svg"},91034:(e,t,n)=>{e.exports=n.p+"_/f869888cf7cada800b61fc42b9a84b32.svg"},75093:(e,t,n)=>{e.exports=n.p+"_/2288e6eacf3c5cc628de46cd146ffc9d.svg"},8664:()=>{},23144:()=>{},41988:()=>{},72450:()=>{},33988:()=>{},91784:()=>{},59773:()=>{},48166:function(e){var t;t=function(){"use strict";function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function t(e,t){return e<t?-1:e>t?1:0}return function(n,r,o,i,a){(function t(n,r,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=r-o+1,c=Math.log(s),l=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1),p=Math.max(o,Math.floor(r-u*l/s+d)),m=Math.min(i,Math.floor(r+(s-u)*l/s+d));t(n,r,p,m,a)}var f=n[r],v=o,h=i;for(e(n,o,r),a(n[i],f)>0&&e(n,o,i);v<h;){for(e(n,v,h),v++,h--;0>a(n[v],f);)v++;for(;a(n[h],f)>0;)h--}0===a(n[o],f)?e(n,o,h):e(n,++h,i),h<=r&&(o=h+1),r<=h&&(i=h-1)}})(n,r,o||0,i||n.length-1,a||t)}},e.exports=t()},26712:(e,t)=>{"use strict";t.Z='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.293 3.293a1 1 0 0 0 0 1.414L6.586 8l-3.293 3.293a1 1 0 0 0 1.414 1.414L8 9.414l3.293 3.293a1 1 0 0 0 1.414-1.414L9.414 8l3.293-3.293a1 1 0 1 0-1.414-1.414L8 6.586 4.707 3.293a1 1 0 0 0-1.414 0z" fill="currentColor"/></svg>'},65510:(e,t,n)=>{"use strict";e.exports=o,e.exports.default=o;var r=n(48166);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t){a(e,0,e.children.length,t,e)}function a(e,t,n,r,o){o||(o=f(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<n;a++)i=e.children[a],s(o,e.leaf?r(i):i);return o}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function l(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,n,o,i){for(var a,s=[t,n];s.length;)(n=s.pop())-(t=s.pop())<=o||(r(e,a=t+Math.ceil((n-t)/o/2)*o,t,n,i),s.push(t,a,a,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!m(e,t))return n;for(var o,i,a,s,u=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],m(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):p(e,s)?this._all(a,n):u.push(a));t=u.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!m(e,t))return!1;for(var r,o,i,a,s=[];t;){for(r=0,o=t.children.length;r<o;r++)if(i=t.children[r],m(e,a=t.leaf?n(i):i)){if(t.leaf||p(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length){if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var o=this.data;this.data=r,r=o}this._insert(r,this.data.height-r.height-1,!0)}}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(e,t){if(!e)return this;for(var n,r,o,i,a=this.data,s=this.toBBox(e),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),i=!0),a.leaf&&-1!==(o=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return -1}(e,a.children,t))){a.children.splice(o,1),u.push(a),this._condense(u);break}!i&&!a.leaf&&p(a,s)?(u.push(a),c.push(n),n=0,r=a,a=a.children[0]):r?(n++,a=r.children[n],i=!1):a=null}return this},toBBox:function(e){return e},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var o,a=n-t+1,s=this._maxEntries;if(a<=s)return i(o=f(e.slice(t,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(o=f([])).leaf=!1,o.height=r;var u,c,l,d,p=Math.ceil(a/s),m=p*Math.ceil(Math.sqrt(s));for(v(e,t,n,m,this.compareMinX),u=t;u<=n;u+=m)for(l=Math.min(u+m-1,n),v(e,u,l,p,this.compareMinY),c=u;c<=l;c+=p)d=Math.min(c+p-1,l),o.children.push(this._build(e,c,d,r-1));return i(o,this.toBBox),o},_chooseSubtree:function(e,t,n,r){for(var o,i,a,s,u,c,d,p;r.push(t),!t.leaf&&r.length-1!==n;){for(o=0,d=p=1/0,i=t.children.length;o<i;o++)u=l(a=t.children[o]),(c=(Math.max(a.maxX,e.maxX)-Math.min(a.minX,e.minX))*(Math.max(a.maxY,e.maxY)-Math.min(a.minY,e.minY))-u)<p?(p=c,d=u<d?u:d,s=a):c===p&&u<d&&(d=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,o=n?e:r(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),s(a,o);t>=0;)if(i[t].children.length>this._maxEntries)this._split(i,t),t--;else break;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var n=e[t],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var a=this._chooseSplitIndex(n,o,r),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,i(n,this.toBBox),i(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,o,i,s,u,c,d,p;for(c=d=1/0,r=t;r<=n-t;r++)s=function(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-n)*Math.max(0,Math.min(e.maxY,t.maxY)-r)}(o=a(e,0,r,this.toBBox),i=a(e,r,n,this.toBBox)),u=l(o)+l(i),s<c?(c=s,p=r,d=u<d?u:d):s===c&&u<d&&(d=u,p=r);return p},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:u,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,o)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var o,i,u=this.toBBox,c=a(e,0,t,u),l=a(e,n-t,n,u),p=d(c)+d(l);for(o=t;o<n-t;o++)i=e.children[o],s(c,e.leaf?u(i):i),p+=d(c);for(o=n-t-1;o>=t;o--)i=e.children[o],s(l,e.leaf?u(i):i),p+=d(l);return p},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)s(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():i(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=Function("a","b",t.join(e[0])),this.compareMinY=Function("a","b",t.join(e[1])),this.toBBox=Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},28216:(e,t,n)=>{"use strict";n.d(t,{$j:()=>U,I0:()=>B});var r=n(87363),o=n.n(r),i=o().createContext(null),a=function(e){e()},s={notify:function(){},get:function(){return[]}},u="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,c=n(87462),l=n(63366),d=n(8679),p=n.n(d),m=n(72973),f=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],v=["reactReduxForwardedRef"],h=[],g=[null,null];function y(e,t){var n=e[1];return[t.payload,n+1]}function _(e,t,n){u(function(){return e.apply(void 0,t)},n)}function b(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function w(e,t,n,r,o,i,a,s,u,c){if(e){var l=!1,d=null,p=function(){if(!l){var e,n,p=t.getState();try{e=r(p,o.current)}catch(l){n=l,d=l}n||(d=null),e===i.current?a.current||u():(i.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=p,n.trySubscribe(),p(),function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var E=function(){return[null,0]};function S(e,t){void 0===t&&(t={});var n=t,u=n.getDisplayName,d=void 0===u?function(e){return"ConnectAdvanced("+e+")"}:u,S=n.methodName,C=void 0===S?"connectAdvanced":S,k=n.renderCountProp,R=void 0===k?void 0:k,x=n.shouldHandleStateChanges,P=void 0===x||x,M=n.storeKey,I=void 0===M?"store":M,T=(n.withRef,n.forwardRef),Z=void 0!==T&&T,D=n.context,L=void 0===D?i:D,A=(0,l.Z)(n,f);return function(t){var n=t.displayName||t.name||"Component",i=d(n),u=(0,c.Z)({},A,{getDisplayName:d,methodName:C,renderCountProp:R,shouldHandleStateChanges:P,storeKey:I,displayName:i,wrappedComponentName:n,WrappedComponent:t}),f=A.pure,S=f?r.useMemo:function(e){return e()};function k(n){var i=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=(0,l.Z)(n,v);return[n.context,e,t]},[n]),d=i[0],p=i[1],f=i[2],C=(0,r.useMemo)(function(){return d&&d.Consumer&&(0,m.isContextConsumer)(o().createElement(d.Consumer,null))?d:L},[d,L]),k=(0,r.useContext)(C),R=!!n.store&&!!n.store.getState&&!!n.store.dispatch;k&&k.store;var x=R?n.store:k.store,M=(0,r.useMemo)(function(){return e(x.dispatch,u)},[x]),I=(0,r.useMemo)(function(){if(!P)return g;var e=function(e,t){var n,r=s;function o(){u.onStateChange&&u.onStateChange()}function i(){if(!n){var i,s,u;n=t?t.addNestedSub(o):e.subscribe(o),i=a,s=null,u=null,r={clear:function(){s=null,u=null},notify:function(){i(function(){for(var e=s;e;)e.callback(),e=e.next})},get:function(){for(var e=[],t=s;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=u={callback:e,next:null,prev:u};return n.prev?n.prev.next=n:s=n,function(){t&&null!==s&&(t=!1,n.next?n.next.prev=n.prev:u=n.prev,n.prev?n.prev.next=n.next:s=n.next)}}}}}var u={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return!!n},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=s)},getListeners:function(){return r}};return u}(x,R?null:k.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[x,R,k]),T=I[0],Z=I[1],D=(0,r.useMemo)(function(){return R?k:(0,c.Z)({},k,{subscription:T})},[R,k,T]),A=(0,r.useReducer)(y,h,E),z=A[0][0],N=A[1];if(z&&z.error)throw z.error;var U=(0,r.useRef)(),F=(0,r.useRef)(f),O=(0,r.useRef)(),q=(0,r.useRef)(!1),B=S(function(){return O.current&&f===F.current?O.current:M(x.getState(),f)},[x,z,f]);_(b,[F,U,q,f,B,O,Z]),_(w,[P,x,T,M,F,U,q,O,Z,N],[x,T,M]);var H=(0,r.useMemo)(function(){return o().createElement(t,(0,c.Z)({},B,{ref:p}))},[p,t,B]);return(0,r.useMemo)(function(){return P?o().createElement(C.Provider,{value:D},H):H},[C,H,D])}var x=f?o().memo(k):k;if(x.WrappedComponent=t,x.displayName=k.displayName=i,Z){var M=o().forwardRef(function(e,t){return o().createElement(x,(0,c.Z)({},e,{reactReduxForwardedRef:t}))});return M.displayName=i,M.WrappedComponent=t,p()(M,t)}return p()(x,t)}}function C(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function k(e,t){if(C(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!C(e[n[o]],t[n[o]]))return!1;return!0}function R(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function x(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function P(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=x(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=x(o),o=r(t,n)),o},r}}var M=[function(e){return"function"==typeof e?P(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:R(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?R(function(t){return function(e,t){var n={};for(var r in e)!function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})}(r);return n}(e,t)}):void 0}],I=[function(e){return"function"==typeof e?P(e,"mapStateToProps"):void 0},function(e){return e?void 0:R(function(){return{}})}];function T(e,t,n){return(0,c.Z)({},n,e,t)}var Z=[function(e){return"function"==typeof e?function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}:void 0},function(e){return e?void 0:function(){return T}}],D=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function L(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=(0,l.Z)(t,D),a=n(e,i),s=r(e,i),u=o(e,i);return(i.pure?function(e,t,n,r,o){var i,a,s,u,c,l=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,m=!1;return function(o,f){var v,h,g,y;return m?(g=!d(f,a),y=!l(o,i),(i=o,a=f,g&&y)?(s=e(i,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):g?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):(y&&(h=!p(v=e(i,a),s),s=v,h&&(c=n(s,u,a))),c)):(s=e(i=o,a=f),u=t(r,a),c=n(s,u,a),m=!0,c)}}:function(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}})(a,s,u,e,i)}var A=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function z(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function N(e,t){return e===t}var U=function(e){var t={},n=t.connectHOC,r=void 0===n?S:n,o=t.mapStateToPropsFactories,i=void 0===o?I:o,a=t.mapDispatchToPropsFactories,s=void 0===a?M:a,u=t.mergePropsFactories,d=void 0===u?Z:u,p=t.selectorFactory,m=void 0===p?L:p;return function(e,t,n,o){void 0===o&&(o={});var a=o,u=a.pure,p=a.areStatesEqual,f=a.areOwnPropsEqual,v=void 0===f?k:f,h=a.areStatePropsEqual,g=void 0===h?k:h,y=a.areMergedPropsEqual,_=void 0===y?k:y,b=(0,l.Z)(a,A),w=z(e,i,"mapStateToProps"),E=z(t,s,"mapDispatchToProps"),S=z(n,d,"mergeProps");return r(m,(0,c.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:w,initMapDispatchToProps:E,initMergeProps:S,pure:void 0===u||u,areStatesEqual:void 0===p?N:p,areOwnPropsEqual:v,areStatePropsEqual:g,areMergedPropsEqual:_},b))}}();function F(){return(0,r.useContext)(i)}function O(e){void 0===e&&(e=i);var t=e===i?F:function(){return(0,r.useContext)(e)};return function(){return t().store}}var q=O(),B=function(e){void 0===e&&(e=i);var t=e===i?q:O(e);return function(){return t().dispatch}}();a=n(61533).unstable_batchedUpdates},88359:(e,t)=>{"use strict";var n=60103,r=60106,o=60107,i=60108,a=60114,s=60109,u=60110,c=60112,l=60113,d=60120,p=60115,m=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;n=f("react.element"),r=f("react.portal"),o=f("react.fragment"),i=f("react.strict_mode"),a=f("react.profiler"),s=f("react.provider"),u=f("react.context"),c=f("react.forward_ref"),l=f("react.suspense"),d=f("react.suspense_list"),p=f("react.memo"),m=f("react.lazy"),f("react.block"),f("react.server.block"),f("react.fundamental"),f("react.debug_trace_mode"),f("react.legacy_hidden")}t.isContextConsumer=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case l:case d:return e;default:switch(e=e&&e.$$typeof){case u:case c:case m:case p:case s:return e;default:return t}}case r:return t}}}(e)===u}},72973:(e,t,n)=>{"use strict";e.exports=n(88359)},54332:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var o=n(87363);function i(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var i,a,s=(0,o.useRef)(0),u=(i=(0,o.useRef)(!1),a=(0,o.useCallback)(function(){return i.current},[]),(0,o.useEffect)(function(){return i.current=!0,function(){i.current=!1}},[]),a),c=(0,o.useState)(n),l=c[0],d=c[1];return[l,(0,o.useCallback)(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=++s.current;return d(function(e){return r(r({},e),{loading:!0})}),e.apply(void 0,t).then(function(e){return u()&&o===s.current&&d({value:e,loading:!1}),e},function(e){return u()&&o===s.current&&d({error:e,loading:!1}),e})},t)]}},18127:(e,t,n)=>{"use strict";var r=n(87363);t.Z=function(e){(0,r.useEffect)(e,[])}},89048:(e,t,n)=>{"use strict";var r=n(18127);t.Z=function(e){(0,r.Z)(function(){e()})}},77823:(e,t,n)=>{"use strict";var r=n(87363),o=n(18127);t.Z=function(e){var t=(0,r.useRef)(e);t.current=e,(0,o.Z)(function(){return function(){return t.current()}})}},37839:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(87363),o=function(e,t){var n,o=(n=(0,r.useRef)(!0)).current?(n.current=!1,!0):n.current;(0,r.useEffect)(function(){if(!o)return e()},t)}},93265:(e,t,n)=>{"use strict";n.d(t,{H:()=>eR});var r=n(34788),o=n(18188),i=n(11912),a=n(55877),s=n.n(a),u=n(45731),c=n(12690),l=n(38067),d=n(37830),p=n(61250),m=n(37358);function f(e){return!!(e&&"results"in e&&e.results)}var v=n(35501);function h(e,t){return{items:[e],requestCorrectedQuery:null==t?void 0:t.requestCorrectedQuery,requestId:e.requestId,requestQuery:null==t?void 0:t.requestQuery,requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1}}var g=n(27760),y=n(22645),_=n(14245),b="Collections";function w(e){return(0,_.S)(e)&&e.values.some(function(e){return e.id===b})}var E=n(58847);function S(e,t){var n=e.chain,r=t.mapLocation,o=r.center,i=r.span,a=r.zoom,s=C({searchType:"TEXT",text:n?"chain_id:("+n+")":e.text&&String(e.text),displayText:n?e.text:e["display-text"],correctMisspell:e.noreask?0:void 0,origin:e.source||"url",center:(0,u.P)(e.sll)||o,span:(0,u.P)(e.sspn)||i,zoom:parseInt(e.z,10)||a,sort:e.sort,context:e.sctx,filters:e.filter?e.filter.split(";"):void 0},t),c=s[0];if(c&&(0,E.d)(t)&&(c.request.snippets=t.search.snippets.filter(function(e){return"related_adverts/1.x"!==e}),c.request.maxadv=0),c&&e.debug.includes("bounds")&&(c.showDebugBounds=!0),c){var l,d,p,m=f(c)?c.results:void 0;if((d=null==(l=null==m?void 0:m.filters)?void 0:l.find(w))&&(p=d.values.find(function(e){return e.id===b}))&&p.selected){var v=t.mapLocation;c.mapLocationRequest={center:v.center,zoom:v.zoom,bounds:v.bounds,forceApply:!0}}}return s}function C(e,t){var n=t.searchPreloadedResults;if(n){var r=n.branding;(null==r?void 0:r.displayText)&&(e.displayText=r.displayText);var o=function(e){try{JSON.parse(e)}catch(t){return e.startsWith("provider:")}return!0}(e.text||"");return[{request:e,results:n,meta:"category"===t.landing.id||"search"===t.landing.id&&(!o||(null==r?void 0:r.displayText))?t.meta:void 0}]}return[{request:e}]}var k=function(e,t){if((null==(r=t.searchPreloadedResults)?void 0:r.exactResult)&&"toponym"===t.searchPreloadedResults.exactResult.type||(e.where?o=(n=(0,u.P)(e.where))?C({searchType:"BUSINESS_LIST",where:n,origin:e.source||"url"},t):[]:e.text&&(o=S(e,t)),!o||0===o.length))return[];var n,r,o,i=o[o.length-1];return i.request.disallowZoom=!0,t.query["show-filters-panel"]&&(i.filterPanelStack=[{type:"list"},{type:"filter",id:t.query["show-filters-panel"]}]),o},R=n(36897),x=n(22370),P=n(17316),M=n(75462),I=n(86946),T=n(13183),Z=n(88237),D=n(62042),L=n(89920),A=n(64381),z={"organization/add":"open","organization/opened":"open","organization/closed/permanently":"closed_permanently","organization/closed/temporary":"closed_temporary","organization/moved":"moved","organization/closed/unknown":"closed_unknown"},N=n(13317),U=n(72119),F=function(){try{var e=(0,U.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),O=function(e,t,n){"__proto__"==t&&F?F(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},q=n(79651),B=Object.prototype.hasOwnProperty,H=function(e,t,n){var r=e[t];B.call(e,t)&&(0,q.Z)(r,n)&&(void 0!==n||t in e)||O(e,t,n)},W=n(71036),j=n(56009),G=n(77226),Y=n(62281),V=function(e,t,n,r){if(!(0,G.Z)(e))return e;t=(0,W.Z)(t,e);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var u=(0,Y.Z)(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(o!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=(0,G.Z)(l)?l:(0,j.Z)(t[o+1])?[]:{})}H(s,u,c),s=s[u]}return e},X=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=(0,N.Z)(e,a);n(s,a)&&V(i,(0,W.Z)(a,e),s)}return i},K=n(94262),J=n(57619),$=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Q=Math.max,ee=n(69203),et=F?function(e,t){return F(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:ee.Z,en=Date.now,er=function(e){var t=0,n=0;return function(){var r=en(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(et),eo=function(e){var t,n;return er((t=void 0,n=J.Z,t=Q(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Q(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),$(e,this,s)}),e+"")}(function(e,t){return null==e?{}:X(e,t,function(t,n){return(0,K.Z)(e,n)})}),ei=/(\d+)(?: (\S+))?/,ea=/(\d+)[–-](\d+)(?: (\S+))?/,es={walk:"pedestrian",transport:"masstransit",transfer:"masstransit"};function eu(e){var t=e.routerResponse.routes[e.activeRouteIndex],n=null!==e.activeCargoPresetId;return"auto"===t.type&&n?"truck":t.type}function ec(e){return e?Number(e)||0:void 0}var el=n(43272);function ed(e){return"toponym"===e.type||"business"===e.type?e.displayCoordinates:e.coordinates}function ep(e){var t=e.query["feedback-context"],n=e.query["feedback-client-context"],r=Array.isArray(t)?t[0]:t,o=Array.isArray(n)?n[0]:n;return{formContextId:el.Cb.includes(r)?r:void 0,clientContextId:o?String(o):void 0}}var em={open:"open","temporary-closed":"closed_temporary","permanent-closed":"closed_permanently","possible-closed":"closed_temporary"},ef={"entrance/add":function(e){return{answerData:{name:"",coordinates:e.coordinates},questionData:void 0}},"address/add":function(e){return{answerData:{name:"",addressString:"",coordinates:e.coordinates},questionData:void 0}},"road/add":function(e){return{answerData:{name:"",address:[],points:[],coordinates:e.coordinates},questionData:void 0}},"other/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"transit/stop/add":function(e){return{answerData:{uri:"",name:"",lines:[],coordinates:e.coordinates},questionData:void 0}},"parking/add":function(e){return{answerData:{entrances:[],coordinates:e.coordinates},questionData:void 0}},"barrier/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"fence/add":function(e){return{answerData:{points:[],gates:[],coordinates:e.coordinates},questionData:void 0}},"crosswalk/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"gate/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"provider/add":function(e){return{answerData:{name:"",siteUrl:"",text:"",uri:"",coordinates:e.coordinates},questionData:void 0}},"assignment/address/add":function(e){var t,n;return{answerData:{name:"",address:[{kind:"street",name:(null==(t=e.result.compositeAddress)?void 0:t.street)||""},{kind:"house",name:(null==(n=e.result.compositeAddress)?void 0:n.house)||""}],coordinates:e.coordinates||e.result.displayCoordinates},questionData:void 0}},"assignment/settlement/scheme/add":function(e){return{answerData:{name:"",address:[],coordinates:e.coordinates},questionData:void 0}},"object/other":function(){return{answerData:{},questionData:void 0}},"address/edit":function(e){var t=e.result.hasEmptyAddress?"":e.result.address;return{answerData:{name:e.result.title,addressString:t,coordinates:e.coordinates||e.result.displayCoordinates},questionData:{name:e.result.title,addressString:t,coordinates:e.result.displayCoordinates}}},"entrance/edit":function(e){var t,n;return{answerData:{kind:"original",name:null==(t=e.result.compositeAddress)?void 0:t.entrance,coordinates:e.coordinates||e.result.displayCoordinates},questionData:{name:null==(n=e.result.compositeAddress)?void 0:n.entrance,coordinates:e.result.displayCoordinates}}},"object/location/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"object/name/edit":function(e){return{answerData:{name:e.result.title,coordinates:e.result.displayCoordinates},questionData:{name:e.result.title,coordinates:e.result.displayCoordinates}}},"object/not-found":function(e){return{answerData:{},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/barrier/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/gate/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/entrance/edit":function(e){return{answerData:{kind:"original",name:e.result.name,coordinates:e.result.displayCoordinates||e.coordinates},questionData:{name:e.result.name,coordinates:e.result.displayCoordinates}}},"assignment/organization/status":function(e){return{answerData:ev(e),questionData:ev(e)}},"transit/stop/not-found":function(e){return{answerData:{},questionData:{coordinates:e.result.coordinates}}},"transit/stop/name/edit":function(e){var t,n;return{answerData:{name:(null==(t=ey(e.result))?void 0:t.name)||"",coordinates:e.result.coordinates},questionData:{name:(null==(n=ey(e.result))?void 0:n.name)||"",coordinates:e.result.coordinates}}},"transit/stop/location/edit":function(e){var t;return{answerData:{coordinates:e.coordinates||(null==(t=ey(e.result))?void 0:t.coordinates)},questionData:{coordinates:ed(e.result)}}},"transit/stop/route/incorrect":function(e){var t,n,r=ey(e.result);return{answerData:{uri:(null==r?void 0:null==(t=r.searchResult)?void 0:t.uri)||"",name:null==r?void 0:r.name,coordinates:e.coordinates||(null==r?void 0:r.coordinates)||e.result.coordinates,lines:(null==r?void 0:r.transports.map(function(e){return{uri:e.uri||"",threads:e.threads.map(function(e){return{threadId:e.threadId}})}}))||[]},questionData:{uri:(null==r?void 0:null==(n=r.searchResult)?void 0:n.uri)||"",name:(null==r?void 0:r.name)||"",coordinates:(null==r?void 0:r.coordinates)||e.coordinates||e.result.coordinates,lines:(null==r?void 0:r.transports.map(function(e){return{uri:e.uri||"",threads:e.threads.map(function(e){return{threadId:e.threadId}})}}))||[]}}},"transit/stop/other":function(){return{answerData:{},questionData:void 0}},"subway/not-found":function(){return{answerData:{},questionData:void 0}},"subway/name/edit":function(e){var t,n;return{answerData:{name:(null==(t=ey(e.result))?void 0:t.name)||"",coordinates:e.result.coordinates},questionData:{name:(null==(n=ey(e.result))?void 0:n.name)||"",coordinates:e.result.coordinates}}},"subway/location/edit":function(e){var t;return{answerData:{coordinates:e.coordinates||(null==(t=ey(e.result))?void 0:t.coordinates)},questionData:{coordinates:ed(e.result)}}},"subway/other":function(){return{answerData:{},questionData:void 0}},"organization/add":function(e){return{answerData:eh(ev(e),e.type),questionData:void 0}},"organization/edit-info":function(e){return{answerData:ev(e),questionData:ev(e)}},"organization/other":function(e){return{answerData:ev(e),questionData:ev(e)}},"organization/closed-full":function(e){return{answerData:ev(e),questionData:ev(e)}},"organization/closed/permanently":function(e){return{answerData:eh(ev(e),e.type),questionData:ev(e)}},"organization/closed/temporary":function(e){return{answerData:eh(ev(e),e.type),questionData:ev(e)}},"organization/closed/unknown":function(e){return{answerData:eh(ev(e),e.type),questionData:ev(e)}},"organization/opened":function(e){return{answerData:eh(ev(e),e.type),questionData:ev(e)}},"organization/moved":function(e){return{answerData:eh(ev(e),e.type),questionData:ev(e)}},"organization/location/edit":function(e){return{answerData:ev(e),questionData:ev(e)}},"organization/edit-accessibility":function(e){return{answerData:ev(e),questionData:ev(e)}},"route/edit/better":function(e,t){return{answerData:{segments:[]},questionData:eg(t.routeStackItem)}},"route/incorrect/road-closed":function(e,t){return{answerData:{type:"no_road",coordinates:e.coordinates},questionData:eg(t.routeStackItem)}},"route/incorrect/poor-condition":function(e,t){return{answerData:{type:"poor_condition",coordinates:e.coordinates},questionData:eg(t.routeStackItem)}},"route/incorrect/prohibiting-sign":function(e,t){return{answerData:{type:"prohibiting_sign",vehicleRestrictions:{},coordinates:e.coordinates},questionData:eg(t.routeStackItem)}},"route/incorrect/obstruction":function(e,t){return{answerData:{type:"obstruction",coordinates:e.coordinates},questionData:eg(t.routeStackItem)}},"route/incorrect/other":function(e,t){return{answerData:{type:"other",coordinates:e.coordinates},questionData:eg(t.routeStackItem)}},"route/other":function(e,t){return{answerData:{type:"other",coordinates:e.coordinates},questionData:eg(t.routeStackItem)}},"spot/other":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}}};function ev(e){var t,n,r,o,i,a,s,u,c,l,d,p,m,f,v,h=(e||{}).result;return h&&"type"in h&&"business"===h.type?(i=h.categories,a=h.urls,s=h.socialLinks,{id:h.id,name:h.title,status:em[h.status]||"open",address:h.fullAddress,categories:(void 0===i?[]:i).map(function(e){return{id:e.id,name:e.name}}),coordinates:h.displayCoordinates,phones:null==(n=h.phones)?void 0:n.map(function(e){return e.number}),urls:(void 0===a?[]:a).concat((void 0===s?[]:s).map(function(e){return e.href})),hours:h.workingTime&&Object.keys(t=h.workingTime.reduce(function(e,t,n){if(t){var r={dayOfWeek:A.sb[n],breaks:t.reduce(function(e,n,r){var o=t[r+1];return o&&e.push({startTime:x.BB(n.to),endTime:x.BB(o.from)}),e},[])};t[0]&&t[t.length-1]&&(r.startTime=x.BB(t[0].from),r.endTime=x.BB(t[t.length-1].to)),e.push(r)}return e},[]).reduce(function(e,t){var n=t.startTime+"|"+t.endTime+"|"+JSON.stringify(t.breaks);return e[n]||(e[n]=[]),e[n].push(t),e},{})).map(function(e){return t[e]}),features:(c=(h.features||[]).reduce(function(e,t){var n="text"===t.type?function(e){var t=e.value,n=t.match(ea);if(n){var r=Number(n[1]),o=Number(n[2]),i=!isNaN(r),a=!isNaN(o);if(i||a)return{id:e.id,name:e.name,type:"range",value:{from:i?r:void 0,to:a?o:void 0},unit:n[3]}}var s=t.match(ei);if(s){var u=Number(s[1]);if(!isNaN(u))return{id:e.id,name:e.name,type:"number",value:u,unit:s[2]}}return e}(t):t;return"text"!==n.type&&e.push(eo(n,"id","name","type","value","unit")),e},[]),(null==(u=h.businessProperties)?void 0:u.closed_for_visitors)!==void 0&&c.push({id:"closed_for_visitors",type:"bool",value:h.businessProperties.closed_for_visitors}),c),entrances:null!=(o=null==(r=h.entrances)?void 0:r.map(function(e){return e.coordinates}))?o:[]}):(d=(l=e||{}).result,p=l.coordinates,m={},(f=d&&"address"in d?d.address:null)&&(m.address=f),(v=(null==d?void 0:d.displayCoordinates)||p)&&(m.coordinates=v),m)}function eh(e,t){return(0,r._)({},e,{status:z[t]||e.status})}function eg(e){var t,n,r,o,a,s,u,c=e.routerResponse;if(c){var l=c.routes[e.activeRouteIndex],d="auto"===l.type;return{travelMode:eu(e),trafficJams:d&&!e.settings.auto.ignoreTrafficJams,wayPoints:c.waypoints.map(function(e){return e.coordinates}).filter(function(e){return!!e}),viaPoints:null==(u=c.viaIndexes)?void 0:u.map(function(e){var t;return null==(t=l.coordinates)?void 0:t[e]}).filter(function(e){return!!e}),encodedPoints:l.encodedCoordinates,uri:l.uri,segments:(n=(t=e.routerResponse).routes[e.activeRouteIndex],r=(0,i._)(n.coordinates||[]),o=t.waypoints.map(function(e){return e.coordinates}),a=[],s=null!==e.activeCargoPresetId,r&&n.paths.forEach(function(t,n){t.segments.forEach(function(t,i){var u=t.edgePoints,c=(t.isAuto?"auto":t.isMasstransit?"masstransit":t.type&&es[t.type])||eu(e),l="auto"===c&&s?"truck":c;if(u){var d=r.findIndex(function(e){return(0,R.J)(e,u[0])}),p=r.findIndex(function(e){return(0,R.J)(e,u[1])}),m=a[a.length-1];0===i||l!==m.travelMode?a.push({travelMode:l,from:r[d],to:r[p]}):m.to=r[p],r.splice(0,p)}else a.push({travelMode:l,from:o[n],to:o[n+1]})})}),a),vehicleRestrictions:function(e){var t,n,r=null==(n=e.cargoPresets.find(function(t){return t.id===e.activeCargoPresetId}))?void 0:n.settings;if(r)return{weight:ec(r.vehicle_weight),max_weight:ec(r.vehicle_max_weight),payload:ec(r.vehicle_payload),axle_weight:ec(r.vehicle_axle_weight),height:ec(r.vehicle_height),length:ec(r.vehicle_length),width:ec(r.vehicle_width),eco_class:(t=r.vehicle_eco_class)?Number(t)||0:void 0,has_trailer:!!r.vehicle_has_trailer||void 0}}(e),departure:function(e,t){var n,r=null==(n=e.routerResponse)?void 0:n.routes[e.activeRouteIndex].type;if("auto"===r||"masstransit"===r){var o=e.settings[r].timeDependent;return o.time&&o.type===t?new Date(o.time).toISOString():void 0}}(e,"departure")}}}function ey(e){return"business"===e.type?e.masstransitStop:e}function e_(e,t){return(0,r._)({},function(e,t){var n,o,i,a,s,u,c,l;switch(e){case"mrc":return{type:e,data:null==(o=t.ugcProfileData)?void 0:null==(n=o.mrc)?void 0:n.data};case"assignments":return{type:e,data:(null==(a=t.ugcProfileData)?void 0:null==(i=a.assignments)?void 0:i.united.data)?function(e,t){var n;return"entrancesEditAssignment"===e.type?{selectedAssignment:e,entrancesData:(null==(n=e.result.entrances)?void 0:n.map(function(n){return(0,r._)({},ef["assignment/entrance/edit"]({type:"assignment/entrance/edit",objectUri:e.result.uri,context:ep(t),coordinates:n.coordinates,result:{name:n.name,coordinates:n.coordinates,displayCoordinates:n.coordinates}}),{isLoading:!1,isSubmitted:!1})}))||[]}:"gateEditAssignment"===e.type||"barrierEditAssignment"===e.type?{selectedAssignment:e,isCompleted:!1,objectEditQuestion:void 0}:{selectedAssignment:e}}(t.ugcProfileData.assignments.united.data,t):void 0};case"photos":return{type:e,data:null==(u=t.ugcProfileData)?void 0:null==(s=u.photos)?void 0:s.account.data};case"achievement-feed":return{type:e,data:{achievementFeedItems:null==(c=t.ugcProfileData)?void 0:c.achievementFeedItems,achievementId:null==(l=t.ugcProfileData)?void 0:l.achievementId}};default:return{type:e}}}(e,t),{mode:"ugc-profile",mobileViewState:["achievements","stats","achievement-feed"].includes(e)?"expanded":"mini",customHeader:function(e,t){switch(e){case"achievements":return"Достижения";case"stats":return"Статистика";default:return}}(e,0)})}var eb=function(e,t){if(!L.qv(e.type))return e;var n=ef[e.type](e,t);return(0,r._)({},e,{formData:n})},ew=n(91086);function eE(e){return k(e.query,e).map(function(t){var n=e.query.feedback?void 0:function(e){if(f(e)){var t,n=1===e.results.resultsCount?null==(t=(0,v.Y)(e.results.items))?void 0:t.uri:void 0;return m.QT(n)}}(t),o=function(e){if(f(e)){var t=(0,v.Y)(e.results.items);return(null==t?void 0:t.type)==="transit-route"?t.transitRouteInfo.routeId:void 0}}(t);if(n||o)return{mode:"masstransit",stops:{loadingId:n,hasError:!1,data:void 0,tab:"overview"},line:{loadingId:o,hasError:!1,data:void 0,tab:"stops"},masstransitMode:o?"line":"stop",selectedVehicleType:void 0,mobileViewState:o?"expanded":"mini"};var i=e.landing.id;return(0,r._)({mode:"search",formText:t.request.displayText||t.request.text,initialPage:Number(e.query.page)||1},t,{mobileViewState:["expanded","mini","micro"].includes(e.query["view-state"])?e.query["view-state"]:"category"===i||"search"===i?"expanded":"mini"})})}function eS(e){var t=e.query,n=null!=(_=t.uri)?_:"",o=e.landing.id,i=["expanded","mini","micro"].includes(e.query["view-state"])?e.query["view-state"]:"category"===o||"search"===o?"expanded":void 0,a=e.uatraits.isMobile&&e.uatraits.isRobot?"expanded":void 0,s=y.V(null==(v=e.searchPreloadedResults)?void 0:v.items),l=y.V(null==(g=e.orgpagePreloadedResults)?void 0:g.items);if(t.poi)return[{mode:"search-result",request:{coordinates:null!=(w=(0,u.P)(t.poi.point))?w:void 0,from:"poi",uri:t.poi.uri,origin:"poi"},response:e.poiPreloadedResults,tab:(0,D.ZI)(t.tab),mobileViewState:a||(t.tab?"expanded":"mini"),selectedPostId:null==(b=e.query.posts)?void 0:b.pid}];var d=p.J6("whatshere",e.landing);if(t.whatshere){var f=(0,u.P)(t.whatshere.point);return f?[{mode:"search-result",response:e.whatsherePreloadedResults,request:{coordinates:f,from:"whatshere",origin:"whatshere",zoom:Number(t.whatshere.zoom)},tab:(0,D.mV)(d,e.whatsherePreloadedResults),mobileViewState:a||("house"===e.landing.id||t.tab?"expanded":"mini")}]:[]}if("biz"===t.ol&&t.oid||(e.uatraits.isMobile||t.text)&&t.orgpage&&t.orgpage.id||e.uatraits.isMobile&&m.k8(n)){var v,g,_,b,w,E,C,k,R=(0,D.ZI)(null!=(k=p.J6("orgpage",e.landing))?k:p.Mg("orgpage",t.tab)?t.tab:void 0),x=t.oid||t.orgpage&&t.orgpage.id||m.k8(n)&&m.Uu(n),P=l.find(function(e){return"business"===e.type&&e.id===x}),M=s.find(function(e){return"business"===e.type&&e.id===x}),I=P||M,T=eE(e).filter(function(e){return"search"===e.mode}).length>=1?"search":void 0;return[{request:{from:"search",uri:I?m.fS(I):void 0,id:x,origin:I?t.source||"url":"restore",serpId:I?void 0:null==(E=e.searchPreloadedResults)?void 0:E.requestSerpId,text:t.text,displayText:t["display-text"]},response:I?h(I,e.searchPreloadedResults):t.text?void 0:e.searchPreloadedResults,mapLocationRequest:I?{bounds:I.bounds,center:I.displayCoordinates,skipFirstApply:!0}:void 0,mobileViewState:a||(t.orgpage||t.tab?"expanded":"mini"),mode:"search-result",selectedPostId:null==(C=e.query.posts)?void 0:C.pid,tab:R,sourceStackMode:T}]}if("geo"===t.ol&&(t.ouri||t.oll||t.oid)){var Z,L=t.oid?s.find(function(e){return e.id===t.oid}):void 0,A=L?L.uri:t.ouri,z=L?L.coordinates:(0,u.P)(t.oll);if(!A&&!z)return[];var N=z?s.sort(function(e,t){return e.coordinates?t.coordinates&&(0,c.g)(e.coordinates,z)>(0,c.g)(t.coordinates,z)?1:-1:1})[0]:A?s.find(function(e){return A===m.fS(e)}):void 0;t.text||(N=void 0);var U=N?h(N,e.searchPreloadedResults):t.text?void 0:e.searchPreloadedResults;return[{request:{from:"search",uri:A,origin:N?t.source||"url":"restore",serpId:N?void 0:null==(Z=e.searchPreloadedResults)?void 0:Z.requestSerpId},response:U,mapLocationRequest:N?{bounds:N.bounds,center:N.displayCoordinates,skipFirstApply:!0}:void 0,mobileViewState:a||"mini",mode:"search-result",tab:(0,D.mV)(t.tab,U)}]}if((t.text||m.Jm(n))&&e.searchPreloadedResults){var F,O,q="chain"===e.landing.id,B="category"===e.landing.id,H=e.searchPreloadedResults.exactResult,W=1===e.searchPreloadedResults.resultsCount?s[0]:void 0,j=S(t,e)[0].request;if(!q&&!B&&W&&"business"===W.type)return[{request:(0,r._)({from:"search"},j),response:e.searchPreloadedResults,mapLocationRequest:{bounds:W.bounds,center:W.displayCoordinates,skipFirstApply:!0},mobileViewState:a||i||"mini",mode:"search-result",tab:"overview",selectedPostId:null==(F=e.query.posts)?void 0:F.pid}];if(H&&"toponym"===H.type)return[{request:(0,r._)({from:"search"},j),response:e.searchPreloadedResults,mapLocationRequest:{bounds:H.bounds,center:H.displayCoordinates,skipFirstApply:!0},mobileViewState:a||i||"mini",mode:"search-result",tab:"overview",selectedPostId:null==(O=e.query.posts)?void 0:O.pid}]}return[]}function eC(e){var t,n,i,a,u,c,l,d,p,f,v,h,g,y,_,b,w,E,S,C,k,D,L,A=I.J({}),z=e.query,N=z.rtext,U=z.rt,F=z.via,O=z.rtn,q=z.rtt,B=z.z,H=z.ll,W=z.routes,j=z.uri;if("string"!=typeof N&&"string"!=typeof U&&!m.A(j))return[(0,r._)({mode:"routes"},A)];var G=null==(w=e.routerResponse)?void 0:w.waypoints.map(function(e){return{coords:e.coordinates,value:e.name||""}});null==(S=e.routerResponse)||null==(E=S.viaIndexes)||E.forEach(function(t,n){var r,o,i=null==(o=e.routerResponse)?void 0:null==(r=o.viaPoints)?void 0:r[n];i&&(null==G||G.splice(t,0,{coords:i.coordinates,value:i.name||""}))});var Y=T.V(),V=e.routePoints||G||Y,X=A.routerResponse;e.routerResponse&&(X=e.routerResponse,(t=X=Z.N(X)).waypoints=t.waypoints.map(function(e){var t=V.find(function(t){return!!(t.coords&&e.coordinates&&(0,R.J)(t.coords,e.coordinates))});return(0,r._)({},e,{name:t?t.value:""})}),X=t);var K=F&&F.split("~").map(Number).filter(Boolean)||(null==(C=e.routerResponse)?void 0:C.viaIndexes)||[],J=V&&V.filter(function(e){return!!e.coords}),$=null==(k=e.routerResponse)?void 0:k.routes[0],Q=null==(D=e.routerResponse)?void 0:D.error,ee=$&&"taxiInfo"in $&&"error"in $.taxiInfo&&$.taxiInfo.error,et=V&&(null==J?void 0:J.length)===V.length,en=(h=(null==(n=(v=e.query).routes)?void 0:n.avoidTypes)?v.routes.avoidTypes.split(","):"string"==typeof(null==(i=v.routes)?void 0:i.avoidTypes)?[]:P.cz,_=(null==(u=v.routes)?void 0:null==(a=u.timeDependent)?void 0:a.time)?(g=v.routes.timeDependent.time,y=x.$_(e),new Date(x.Tt(g).getTime()+6e4*x.x2(y).getTimezoneOffset())).getTime():void 0,{auto:{ignoreTrafficJams:"atm"===v.rtm,avoid:null!=(f=null==(l=v.routes)?void 0:null==(c=l.avoid)?void 0:c.split(","))?f:[],timeDependent:{type:"departure",time:"auto"===v.rtt&&_||void 0}},masstransit:{avoidTypes:h,timeDependent:{type:["departure","arrival"].includes(null==(p=v.routes)?void 0:null==(d=p.timeDependent)?void 0:d.type)?v.routes.timeDependent.type:"departure",time:"mt"===v.rtt&&_||void 0}}}),er=O?parseInt(O,10):0,eo=null==(L=Object.entries(P.jk).find(function(e){return(0,o._)(e,2)[1]===q}))?void 0:L[0],ei=(b=M.Z.get("maps_routes_travel_mode",e),Object.keys(P.jk).includes(b)?b:void 0);return[(0,r._)({},A,{mode:"routes",skipApplyBounds:!!(B&&H)&&V.filter(function(e){return e.coords}).length>=2,travelMode:(null==X?void 0:X.type)||eo||ei||A.travelMode,activeField:V.findIndex(function(e,t){return(!e.value||!e.coords)&&!K.includes(t)}),activeRouteIndex:(null==X?void 0:X.routes)&&er<X.routes.length?er:0,editingCargoPresetId:void 0,activeCargoPresetId:null,cargoPresets:[],activeComparisonMode:W&&W.activeComparisonMode||void 0,viaIndexes:K,sessionId:e.routerResponse?"r:"+s().v4():void 0,settings:en,routePoints:V,routerResponse:X,error:et||Q?ee||Q:void 0,isLoading:et&&!e.routerResponse,mobileViewState:$?"mini":"expanded"})]}function ek(e){var t,n=e.masstransitStop,r=e.masstransitLine,o=e.query,i=o.masstransit,a=o.ol,s=o.oid,u=o.tab,c=o.reviews,l={loadingId:!i||i.lineId||n?s&&"mtr"===a?s:void 0:i.stopId,hasError:!1,data:n,tab:(0,D.KA)(u)||"overview"},d={loadingId:i&&!r?i.lineId:void 0,hasError:!1,data:r?{color:r.color,threads:r.features,activeThread:r.activeThread,seoThreadIndex:r.seoThreadIndex,dataSources:r.dataSources,vehicles:[],features:[]}:void 0,tab:(0,D.IP)(u)||"stops"};r?t="line":n?t="stop":d.loadingId?t="line":l.loadingId?t="stop":i&&i.vehicleType&&(t="list");var p=i&&i.vehicleType||void 0;return t?[{mode:"masstransit",stops:l,line:d,selectedVehicleType:p,masstransitMode:t,mobileViewState:"list"===t||(null==c?void 0:c.publicId)?"expanded":"mini"}]:[]}function eR(e){return{type:"area"===e.query.rlt?"area":"ruler",isEnabled:!1,points:("string"==typeof e.query.rl?e.query.rl:"").split("~").reduce(function(e,t){var n=(0,u.P)(t);if(!n)return e;var r=e[e.length-1],o=r?[r.coordinates[0]+n[0],r.coordinates[1]+n[1]]:n;return e.push({coordinates:o,value:r?r.value+(0,l.t)(o,r.coordinates):0,showBalloon:!1}),e},[])}}function ex(){return[{mode:"user-profile"}]}},4046:(e,t,n)=>{"use strict";n.d(t,{F$:()=>r,is:()=>o,dM:()=>i});var r=["overview","menu","prices","inside","posts","gallery","reviews","edadeal","related","chain","events","realty","features","infrastructure","encyclopedia"],o=["overview","services","inside","attractions","encyclopedia","discovery","where-to-eat","things-to-do"],i="backend_"},29529:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var r=["photos","panoramas","mrc","mobile-app-share","reviews","share","stories-player","stories-editor","booking","storytelling","hotels-booking"]},63039:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var r=n(40457);function o(e,t){void 0===t&&(t=!0);var n,o,i,a,s,u=e.stack,c=t?u.filter(function(e){var t=e.mode;return!(0,r.E)(t)}):u,l=c[c.length-1],d=(n=e.traffic,o=e.masstransit,i=e.homePanel,a=e.config,s=e.nightOverlay,i.isOpen?n.isLayerEnabled?"traffic":o.isLayerShown&&!a.uatraits.isMobile?"masstransit":s.isShown&&a.uatraits.isMobile?"night":"home":"home");return l&&l.mode||d}},38388:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var r=n(29529),o=n(40457),i={search:["orgpage","search-result","bookmarks","traffic","masstransit","user-profile"],"search-result":["user-profile","booking"],discovery:["orgpage","search","traffic","masstransit","user-profile"],bookmarks:["search","routes","traffic","masstransit","user-profile"],routes:["search","search-result","bookmarks","traffic","feedback","user-profile","masstransit"],usermaps:["search","bookmarks","discovery","orgpage","search-result","feedback","masstransit","routes","traffic","user-profile"],photos:["booking"],storytelling:["orgpage","search-result"]};function a(e,t){var n=e.stack,a=i[t];(0,o.E)(t)||(a=a?a.concat(r.Y):r.Y);for(var s=[],u=0,c=n.slice().reverse();u<c.length;u++){var l=c[u];if(!(a&&a.includes(l.mode))){if(l.mode!==t)break;s.unshift(l)}}return s}},43341:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(40457),o=n(6965);function i(e,t){var n=(0,r.E)(t)?e.stack:e.stack.filter(function(e){var t=e.mode;return!(0,r.E)(t)}),i=(0,o.b)(e)&&"search"===t?n.filter(function(e){return"search-result"!==e.mode}):n,a=i[i.length-1];if(a&&a.mode===t)return a}},40457:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(29529);function o(e){return r.Y.includes(e)}},37830:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(6848);function o(e){return(0,r.c)(e)||!!e.query["profile-mode"]}},6848:(e,t,n)=>{"use strict";function r(e){return e.baseUrl.endsWith("/profile")}n.d(t,{c:()=>r})},98109:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(63039),o=n(43341);function i(e){if(e.config.uatraits.isMobile){var t=(0,o.A)(e,(0,r.i)(e));return"expanded"!==((null==t?void 0:t.mobileViewState)||e.defaultMobileViewState)}return e.collapsedSidebar}},6965:(e,t,n)=>{"use strict";n.d(t,{b:()=>c});var r=n(38388),o=n(11912),i=n(91086),a=n(35501),s=n(62042),u=["realty","hotels-booking","edadeal"];function c(e){var t,n,c,l,d,p,m,f,v,h,g,y,_,b,w=(0,r.E)({stack:e.stack},"search-result"),E=w[w.length-1],S=(null==E?void 0:null==(b=E.response)?void 0:null==(_=b.items[0])?void 0:_.type)==="business"?(0,s.Z6)(E.tab):void 0,C=!!S&&u.includes(S);return m=(0,o._)((0,r.E)({stack:e.stack},"search-result")).pop(),v=!(f=(0,o._)((0,r.E)({stack:e.stack},"search")).pop())||"results"in f&&0===f.results.resultsCount,h=f&&"results"in f&&1===f.results.resultsCount&&(null==(t=(0,a.Y)(f.results.items))?void 0:t.id)===(null==(n=(0,a.Y)(null==m?void 0:null==(c=m.response)?void 0:c.items))?void 0:n.id),g=((null==(d=e.map)?void 0:null==(l=d.size)?void 0:l.width)||0)>=896||!!e.config.query["no-second-panel-width"],y=(0,i.kh)((0,a.Y)(null==m?void 0:null==(p=m.response)?void 0:p.items)),!!(!e.config.uatraits.isMobile&&(null==m?void 0:m.sourceStackMode)==="search"&&!v&&!h&&g&&!y)&&!C}},93813:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n(6848);function o(e,t){var n,o=(n=(0,r.c)(t)?t.baseUrl:t.isYango?"":"/maps",t.origin.includes("crowdtest")?t.baseUrl.replace(/^((\/maps-.+?)\/)?.*/,n):n);return t.origin+o+e}},47220:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(34788),o=n(6241),i=n(61250);function a(e,t,n,a){void 0===t&&(t={}),void 0===n&&(n={});var s=i.aA("orgpage",t.sublanding),u=o.joinPath(n.baseUrl,"org",e.seoname,e.id,s?void 0:t.sublanding);return o.addAdditionalParams(u,n,s&&t.sublanding?(0,r._)({},a,{tab:t.sublanding}):a)}},16647:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(69568),o=n(6241);function i(e,t,n){if(e.id){var i=(0,r.E)(t,n)+"stops/"+e.id+"/";return o.addAdditionalParams(i,n)}}},69568:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(6241);function o(e,t){return void 0===t&&(t={}),r.joinPath(t.baseUrl,e.id,e.seoname)}},96976:(e,t,n)=>{"use strict";n.d(t,{h:()=>u});var r=n(11912),o=n(36897),i=n(6241),a=n(69568),s=["house","vegetation","hydro","street","district"];function u(e,t,n,u){void 0===n&&(n={});var c=(void 0===u?{}:u).sublanding,l=s.includes(e.kind),d="house"===e.kind&&e.hasEmptyAddress;if((!l||t)&&("house"===e.kind||e.id)&&!d&&((0,o.J)(e.coordinates,e.displayCoordinates)||n.skipPointCheck)){var p="house"===e.kind?["house",e.seoname,e.encodedCoordinates,c]:["geo",e.seoname,e.id,c],m=l&&t?(0,a.E)(t,n)+i.joinPath.apply(i,(0,r._)(p)):i.joinPath.apply(i,[n.baseUrl].concat((0,r._)(p)));return i.addAdditionalParams(m,n)}}},81194:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(34788),o=n(18007),i=n(87363),a=n(35645),s=n(44748),u=n(57636),c=n(31104),l={angle:"dropdown-16",triangle:"arrow-down-8"},d=(0,s.Z)("button"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=i.createRef(),n._onMouseEnter=function(e){n.props.title&&!n.state.hideTitle&&n.setState({hideTitle:!0}),n.props.onMouseEnter&&n.props.onMouseEnter(e)},n._onMouseDown=function(e){!n.props.disabled&&(n.setState({pressed:!!n.props.onClick}),n.props.onMouseDown&&n.props.onMouseDown(e))},n._onMouseUp=function(){n.setState({pressed:!1})},n._onMouseOut=function(){n.setState({pressed:!1})},n._onFocus=function(){var e=n.props.forwardedRef,t=void 0===e?n._ref:e;if(n.state.pressed){var r=t.current;r&&r.blur()}},n._renderLink=function(e,t){var o=n.props,a=o.disabled,s=o.url,u=o.rel,c=o.target,l=o.forwardedRef,d=void 0===l?n._ref:l;return i.createElement("a",(0,r._)({href:a?void 0:s,role:"button",target:c||"_parent","aria-disabled":!!a||void 0,ref:d,rel:u},e),t)},n._renderButton=function(e,t){var o=n.props,a=o.disabled,s=o.type,u=o.forwardedRef,c=void 0===u?n._ref:u;return i.createElement("button",(0,r._)({disabled:a,type:void 0===s?"button":s,ref:c},e),t)},n._renderIcon=function(e){var t=n.props;return i.createElement("span",{key:"icon",className:e("icon"),style:{width:t.iconWidth},"aria-hidden":!0},t.icon)},n._renderTick=function(e){var t=l[n.props.tick];return i.createElement(u.Z,{name:t,key:"tick",className:e("tick"),inline:!0})},n.state={pressed:!1,hideTitle:!1},n}return(0,o._)(t,e),t.prototype.render=function(){var e=this.props,t=[e.icon?this._renderIcon(d):null,e.children?i.createElement("span",{key:"text",className:d("text")},e.children):null,e.tick?this._renderTick(d):null],n=e.ariaHidden?c.x:{"aria-haspopup":void 0!==e.ariaExpanded,"aria-expanded":e.ariaExpanded,"aria-label":e.children?void 0:e.ariaLabel},o=(0,r._)({className:d({view:e.view,ui:!["air","air-alt","air-round","search"].includes(e.view),size:e.size,link:!!e.url,disabled:e.disabled,checked:e.checked,static:e.static,"pin-left":e.pinLeft,"pin-right":e.pinRight,"pin-top":e.pinTop,"pin-bottom":e.pinBottom,pressed:this.state.pressed||e.pressed,tick:e.tick,stretched:e.isStretched,"text-align-left":e.isTextAlignLeft,"flipped-tick":e.flippedTick,hovered:e.hovered,focused:e.focused,"no-shadow":e.noShadow,truncated:e.truncated,"dark-theme-only":e.darkThemeOnly}),title:this.state.hideTitle?void 0:e.title,"aria-pressed":this.state.pressed||e.pressed,itemProp:e.itemProp,onMouseEnter:this._onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.disabled?void 0:e.onClick,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onMouseOut:this._onMouseOut,onFocus:this._onFocus},n);return e.url?this._renderLink(o,t):this._renderButton(o,t)},t}(i.Component),m=(0,a.Z)(p)},58155:(e,t,n)=>{"use strict";var r=n(34788),o=n(18007),i=n(87363),a=n(61533),s=[],u=function(e,t){var n=e.target,r=t.node,o=t.callback,i=t.stopPropagation,a=t.getExcludedNodes;if(m(r,n))return!i;var s=a&&a();return s&&(s=Array.isArray(s)?s:[s]).some(function(e){return m(e,n)})||o(e),!i},c=function(e){for(var t=s.length-1;t>=0&&u(e,s[t]);t--);},l=function(e){0===(s=s.filter(function(t){return e!==t})).length&&(window.document.removeEventListener("mousedown",c,!0),window.document.removeEventListener("touchstart",c,!0))},d=function(e,t){0===s.length&&(window.document.addEventListener("mousedown",c,!0),window.document.addEventListener("touchstart",c,{capture:!0,passive:!1}));var n=(0,r._)({node:e},t);return s.push(n),function(){return l(n)}},p=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.callback,n=e.stopPropagation,r=e.getExcludedNodes,o=a.findDOMNode(this);o instanceof Element&&(this._unsubscribe=d(o,{callback:t,stopPropagation:n,getExcludedNodes:r}))},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return i.Children.only(this.props.children)},t}(i.Component);function m(e,t){return e===t||e.contains(t)}t.Z=p},54062:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(34788),o=n(87363),i=n(44748),a=n(69602),s=n(31336),u=n(13752),c=n(980),l=n(44953),d=n(26712),p=(0,i.Z)("close-button"),m={close:{small:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="16" rx="8" fill="#878787"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.251 10.749a.857.857 0 0 0 1.212 0L8 9.212l1.537 1.537a.857.857 0 1 0 1.212-1.212L9.212 8l1.537-1.537a.857.857 0 1 0-1.212-1.212L8 6.788 6.463 5.25a.857.857 0 0 0-1.212 1.212L6.788 8 5.25 9.537a.857.857 0 0 0 0 1.212z" fill="#fff"/></svg>',medium:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 12c0-6.627-5.373-12-12-12S0 5.373 0 12s5.373 12 12 12 12-5.373 12-12zm-8.293-3.707a1 1 0 0 1 0 1.414L13.414 12l2.293 2.293a1 1 0 0 1-1.414 1.414L12 13.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L10.586 12 8.293 9.707a1 1 0 0 1 1.414-1.414L12 10.586l2.293-2.293a1 1 0 0 1 1.414 0z" fill="currentColor"/></svg>'},cross:{small:d.Z,medium:d.Z}},f=function(e){var t=e.color,n=e.offset,i=void 0===n?"small":n,d=e.size,f=void 0===d?"medium":d,v=e.onClick,h=e.circle,g=e.relative,y=e.usePortal,_=e.analytics,b=(0,s.ZR)(),w=o.createRef(),E=(0,u.p)({ref:w}),S=h?"close":"cross",C="string"!=typeof i?{top:i.top,right:i.right}:{},k=o.createElement(l.ZP,(0,r._)({name:"close",logClick:!0},_),o.createElement("button",(0,r._)({type:"button","aria-label":"Закрыть",className:p({color:void 0===t?"black":t,circle:h,relative:g,size:"string"==typeof f?f:void 0,offset:"string"==typeof i?i:void 0}),onClick:v,style:(0,c.cq)(b,C),ref:w},E),o.createElement("span",{dangerouslySetInnerHTML:{__html:m[S][f]}})));return y?o.createElement(a.Z,{selector:".body"},k):k}},54499:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=new Map,a=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._fetchUrl=function(){var e=t.props.url;e&&function(e){if(i.has(e))return Promise.resolve();var t=new Promise(function(t){var n=window.document.createElement("img");function r(){window.document.body.removeChild(n),n.removeEventListener("load",r),n.removeEventListener("error",r),t()}n.setAttribute("src",e),window.document.body.appendChild(n),n.addEventListener("load",r),n.addEventListener("error",r)});i.set(e,t)}(e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchUrl()},n.componentDidUpdate=function(e){e.url!==this.props.url&&this._fetchUrl()},n.render=function(){return null},t}(o.PureComponent);t.Z=a},67105:(e,t,n)=>{"use strict";n.d(t,{v6:()=>s,KE:()=>c});var r=n(87363);function o(){}var i=(0,n(84641).Z)("flyover",{isLayerInitialized:!1,activeTile3dId:null,flyoverObject:null,hoverState:null,setLayerInitialized:o,setFlyoverObject:o,setHoverState:o}),a=i.connect,s=i.Provider,u=i.Context;function c(){return r.useContext(u)}t.ZP=a},94507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(18007),o=n(87363),i=n(61533),a=n(44748),s=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){return this.props.children},t}(o.PureComponent),u=n(94897),c=n(31336),l=(0,a.Z)("hover-hint"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._target=null,n._showTimerId=0,n._hide=function(){window.clearTimeout(n._showTimerId),n._showTimerId=0,n.setState({isShown:!1})},n._onPopupClose=function(){n._hide()},n._onMouseEnter=function(){n._showTimerId||n.props.isDisabled||(n._showTimerId=window.setTimeout(function(){return n.setState({isShown:!0})},n.props.delay||200))},n._onMouseLeave=function(){n._hide()},n._onClick=function(){void 0===n.props.hideOnClick||n.props.hideOnClick?n._hide():n.props.config.uatraits.isMobile&&n._onMouseEnter()},n._renderPopup=function(){var e=n.props,t=e.isAir?"air":"help",r=!!(!e.isDisabled&&(n.state.isShown||e.force));return o.createElement(u.Z,{isShown:r,position:e.position,offset:e.offset,type:t,onScroll:e.onScroll||"reposition",getTarget:function(){return n._target||null},onClose:n._onPopupClose,className:e.className,showArrow:e.showArrow,arrowOffset:e.arrowOffset},o.createElement("div",{className:l({type:t,size:e.size||"m"})},e.text))},n.state={isShown:!!t.isInitialShown},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._target&&(this._target.addEventListener("mouseenter",this._onMouseEnter),this._target.addEventListener("mouseleave",this._onMouseLeave),this._target.addEventListener("click",this._onClick))},n.componentWillUnmount=function(){this._target&&(this._target.removeEventListener("mouseenter",this._onMouseEnter),this._target.removeEventListener("mouseleave",this._onMouseLeave),this._target.removeEventListener("click",this._onClick)),window.clearTimeout(this._showTimerId),this._showTimerId=0},n.componentDidUpdate=function(e){!e.isDisabled&&this.props.isDisabled&&this.state.isShown&&(window.clearTimeout(this._showTimerId),this._showTimerId=0,this.setState({isShown:!1}))},n.render=function(){var e=this,t=this.props;return t.config.uatraits.isMobile&&!t.isNeededOnMobile?t.children:o.createElement(o.Fragment,null,o.createElement(s,{ref:function(t){return e._target=t?i.findDOMNode(t):null}},t.children),this._renderPopup())},t}(o.Component),p=(0,c.ZP)(d)},57636:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(18188),o=n(87363),i=n(44748),a=n(31336),s=n(33228),u=["pin-alerts-closed-future-60x68","pin-alerts-cross-road-control-60x68","pin-alerts-drawbridge-future-60x68","pin-alerts-lane-control-60x68","pin-alerts-mobile-control-60x68","pin-alerts-no-stopping-control-60x68","pin-alerts-reconstruction-60x68","pin-alerts-speed-bump-60x68","pin-alerts-speed-camera-60x68","poi-alerts-closed-future-24x27","poi-alerts-closed-future-32","poi-alerts-closed-future-40","poi-alerts-cross-road-control-26x27","poi-alerts-cross-road-control-32","poi-alerts-cross-road-control-40","poi-alerts-drawbridge-future-24x27","poi-alerts-drawbridge-future-32","poi-alerts-drawbridge-future-40","poi-alerts-lane-control-26x27","poi-alerts-lane-control-32","poi-alerts-lane-control-40","poi-alerts-mobile-control-26x27","poi-alerts-mobile-control-32","poi-alerts-mobile-control-40","poi-alerts-no-stopping-control-26x27","poi-alerts-no-stopping-control-32","poi-alerts-no-stopping-control-40","poi-alerts-road-reconstruction-24x27","poi-alerts-road-reconstruction-32","poi-alerts-road-reconstruction-40","poi-alerts-speed-bump-24x27","poi-alerts-speed-bump-32","poi-alerts-speed-bump-40","poi-alerts-speed-camera-26x27","poi-alerts-speed-camera-32","poi-alerts-speed-camera-40","rubrics-medical-48","settings-speed-limit-highways-64x52","settings-speed-limit-single-carriageway-64x52","settings-speed-limit-within-towns-64x52","settings-speedlimit-city-in-88x48","settings-speedlimit-city-out-88x48","settings-speedlimit-highway-88x48","sound-off-24"],c=["camera2d-on-40","camera3d-on-40","carplay-aa-lockscreen-glyph-80","carplay-dash-continue-40","carplay-dash-phone-40","carplay-home-40","carplay-search-my-places-40","carplay-start-route-40","carplay-work-40","checkbox-on-24","child-seat-selected-day-24","child-seat-selected-night-24","collection-rubric-24","collection-rubric-48","collection-rubric-60","cp-dashboard-location-32","cp-dashboard-not-working-32","cp-dashboard-phone-32","cp-dashboard-plus-32","done-36","envelope-36","filters-select-24-flip","gas-48","il-find-places.png","il-low-data.png","il-navigation.png","il-notifications.png","il-parking.png","il-realtime-transport.png","il-road-alerts.png","il-routes.png","il-switcher.png","il-transport-timestable.png","layers-on-24","layers-on-40","loader-progress-a-16","loader-progress-b-16","loader-progress-c-16","loader-progress-d-16","location-center-40","location-navigate-center-40","map-placemark-compass-48x64","map-placemark-dot-32","maps-32","mark-actual-24","mark-actual-superscript-12","navi-service-image.png","navimark-48","overview-route-ferry-24","panorama-on-40-flip","parking-32","parking-on-40","parking-on-48","radio-on-24","search-category-24","tab-navigator-48","tab-taxi-48-flip","tab-transport-48-flip","tab-yndxfuel-48","taxi-service-image.png","thanks-32-flip","transit-marker-region-24","transit-on-40","transport-service-image.png","warning-36"],l=n(41057),d=(0,i.Z)("icon"),p=function(e){var t,n,i,p,m,f,v,h,g,y,_=(0,a.ZR)(),b=(n="dark"===(t={name:e.name,theme:e.theme}).theme?"_night":"",p=(i=(0,r._)(t.name.split("."),2))[0],m=i[1],f=_.isYango&&c.includes(p)?"yangomaps-":"",v=_.isRtl&&u.includes(p)?"_rtl":"",h=""+f+p+v+n+"."+(void 0===m?"svg":m),_.staticHost+"static/v51/icons/core/"+h),w=RegExp("^.*?(?:-(\\d+))?(?:x(\\d+))?(?:-no-gradient)?(?:-flip)?$").exec(e.name),E=(0,r._)(e.name.split("."),2),S=E[0],C=E[1],k=(null==w?void 0:w[1])?Number(w[1]):void 0,R=(null==w?void 0:w[2])?Number(w[2]):k,x=null!=(g=e.width)?g:k,P=null!=(y=e.height)?y:R,M=_.isRtl&&S.endsWith("-flip"),I=e.inline&&"svg"===(void 0===C?"svg":C),T=[d({flip:M,img:!I}),e.className].filter(Boolean).join(" "),Z=e.onClick?e.ariaLabel:void 0,D=e.ariaHidden||!Z;return I?o.createElement(s.Z,{url:b,className:T,onClick:e.onClick,ariaLabel:Z,ariaHidden:D,width:x,height:P},"function"==typeof e.inline?e.inline:void 0):o.createElement(l.Z,{tag:"span",className:T,onClick:e.onClick,ariaLabel:Z,ariaHidden:D},o.createElement("img",{alt:Z,src:b,width:x||"100%",height:P||"100%"}))}},94897:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(22678),o=n(34788),i=n(18007),a=n(87363),s=n(44748),u=n(69602),c=n(58155),l=n(77558),d=n(71392),p=["INPUT","SELECT","TEXTAREA"],m=[],f=function(e,t){var n=e.keyCode,r=e.target.tagName,o=t.handlers,i=t.stopPropagation,a=o.find(function(e){return e.key===n}),s=p.includes(r);return a&&(a.allowInEditable||!s)?(a.callback(e),e.preventDefault(),!1):!(a||i)},v=function(e){for(var t=m.length-1;t>=0&&f(e,m[t]);t--);},h=function(e){e.keyCode!==d.n.PRINT_SCREEN&&v(e)},g=function(e){e.keyCode===d.n.PRINT_SCREEN&&v(e)},y=function(e){0===(m=m.filter(function(t){return e!==t})).length&&(window.document.removeEventListener("keydown",h),window.document.removeEventListener("keyup",g))},_=function(e,t){0===m.length&&(window.document.addEventListener("keydown",h),window.document.addEventListener("keyup",g));var n={handlers:e,stopPropagation:t};return m.push(n),function(){return y(n)}},b=function(e){function t(){return e.apply(this,arguments)}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.stopPropagation,n=e.handlers,r=Array.isArray(n)?n.slice():[n];this._unsubscribe=_(r,!!t)},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return null},t}(a.Component),w=n(1477),E=n(39014),S=n(41690),C=n(111),k=n(57636),R=n(31336),x=(0,s.Z)("popup"),P={bottom:{vertical:!0,bottom:!0,center:!0},"bottom-right":{vertical:!0,bottom:!0,right:!0},"bottom-left":{vertical:!0,bottom:!0,left:!0},"right-bottom":{horizontal:!0,right:!0,bottom:!0},right:{horizontal:!0,right:!0,middle:!0},"right-top":{horizontal:!0,right:!0,top:!0},top:{vertical:!0,top:!0,center:!0},"top-right":{vertical:!0,top:!0,right:!0},"top-left":{vertical:!0,top:!0,left:!0},left:{horizontal:!0,left:!0,middle:!0},"left-bottom":{horizontal:!0,left:!0,bottom:!0},"left-top":{horizontal:!0,left:!0,top:!0}},M=[],I=function(e){function t(t){var n;return(n=e.call(this,t)||this)._popup=a.createRef(),n._getArrowDimensions=function(){if("tooltip"===n.props.type)return{diagonal:24,height:12};var e=Math.round((n._arrow?10:0)*Math.sqrt(2));return{diagonal:e,height:e/2}},n._getPopupSize=function(){var e=n._popup.current.getBoundingClientRect(),t=n.props.getTarget();return{width:Math.round(n.props.isDropdown&&t?t.getBoundingClientRect().width:e.width),height:Math.round(e.height)}},n._getTargetSize=function(){var e=n.props.getTarget();if(e instanceof HTMLElement)return{width:e.offsetWidth,height:e.offsetHeight};if(e&&"getBBox"in e){var t=e.getBBox();return{width:t.width,height:t.height}}return{width:0,height:0}},n._getTargetRect=function(){var e=n.props.getTarget();if(!e)return{top:0,right:0,bottom:0,left:0};var t=n._getTargetSize(),r=e.getBoundingClientRect(),o={top:r.top+T(),left:r.left+Z()};return{top:o.top,right:o.left+t.width,bottom:o.top+t.height,left:o.left}},n._isTargetVisible=function(e,t){var r=t.top,o=t.right,i=t.bottom,a=t.left;if(!n.props.checkTargetVisibility)return!0;var s=window.document.elementFromPoint(a+(o-a)/2,r+(i-r)/2);return e.contains(s)},n._getPositions=function(){var e=Array.isArray(n.props.position)?n.props.position:[n.props.position||"bottom"];return n.props.config.isRtl?e.map(function(e){return e.includes("left")?e.replace("left","right"):e.includes("right")?e.replace("right","left"):e}):e},n._reposition=function(){var e=n.props,t=e.config.isRtl,r=e.getTarget();if(e.isShown&&n._popup.current&&r){var o=n._getTargetRect();if(!n._isTargetVisible(r,o)){n.setState({isTargetVisible:!1});return}var i={main:(e.offset?e.offset.main:0)+3,side:e.offset?e.offset.side:0},a=(h=window.document.documentElement,g=Z(),y=T(),_=h.clientWidth,b=h.clientHeight,y>(w=Math.max(h.scrollHeight,b)-b)&&(y=w),{top:y,right:g+_,bottom:y+b,left:g}),s=n._getPopupSize(),u=n._getArrowDimensions(),c=!n._popupSize||n._popupSize.width!==s.width||n._popupSize.height!==s.height;n.props.onSizeChange&&c&&n.props.onSizeChange(s),n._popupSize=s;var l=-u.height,d=u.height/2,p=s.width*s.height,m=null,f=[];f=f.concat(n._getPositions()),e.restrictPosition||(f=f.concat(Object.keys(P)));for(var v=0;v<f.length;v++){var h,g,y,_,b,w,E=f[v],S=P[E],C={top:0,right:0,bottom:0,left:0},k={top:"auto",right:"auto",bottom:"auto",left:"auto"},R=void 0,x=e.arrowOffset||0,M=(e.positionOffsets||{})[E]||{main:0,side:0};if(S.horizontal){S.left?(C.left=o.left-s.width-u.height-i.main+M.main,k.right=l,R=t?"right":"left"):S.right&&(C.left=o.right+u.height+i.main+M.main,k.left=l,R=t?"left":"right"),S.middle?C.top=(o.top+o.bottom-s.height)/2+i.side+M.side:S.top?C.top=Math.max(o.bottom,(o.top+o.bottom+u.height)/2)+d-s.height-i.side+M.side:S.bottom&&(C.top=Math.min(o.top,(o.top+o.bottom-u.height)/2)-d+i.side+M.side);var I=(o.top+o.bottom-u.diagonal)/2-C.top+i.side+M.side+x;k.top=Math.min(Math.max(0,I),s.height-u.diagonal)}else if(S.vertical){S.top?(C.top=o.top-s.height-u.height-i.main+M.main,k.bottom=l,R="top"):S.bottom&&(C.top=o.bottom+u.height+i.main+M.main,k.top=l,R="bottom"),S.center?C.left=(o.left+o.right-s.width)/2+i.side+M.side:S.left?C.left=Math.max(o.right-s.width,(o.left+o.right+u.height)/2)+d-s.width-i.side+M.side:S.right&&(C.left=Math.min(o.left,(o.left+o.right-u.height)/2)-d+i.side+M.side);var D=(o.left+o.right-u.diagonal)/2-C.left+i.side+x+M.side;k.left=Math.min(Math.max(0,D),s.width-u.diagonal)}C.bottom=C.top+s.height,C.right=C.left+s.width;var L=Math.round(Math.max(0,Math.min(C.right,a.right)-Math.max(C.left,a.left))*Math.max(0,Math.min(C.bottom,a.bottom)-Math.max(C.top,a.top)));if(e.isMinLeftZero&&C.left<0&&S.vertical&&("number"==typeof k.left&&(k.left+=C.left),C.left=0),(!m||L>m.square)&&(m={popupPos:{left:C.left,top:C.top},arrowPos:k,square:L,mainPos:R}),L===p)break}var A=m.popupPos,z={left:Math.floor(A.left),top:Math.floor(A.top)};n.props.isDropdown&&(z.width=n._getTargetSize().width);var N=A.top>0?a.bottom-A.top:void 0;n.setState({style:z,arrowStyle:m.arrowPos,position:m.mainPos,maxContentHeight:e.skipMaxHeight?void 0:N,isShown:!0,isTargetVisible:!0})}},n._onClose=function(e,t){n.props.onClose&&n.props.onClose({reason:t,event:e})},n._onClickOutside=function(e){n.props.isShown&&n._onClose(e,"click-outside")},n._onWindowChange=function(e){e.target===e.currentTarget&&n._applyScrollEvent(e)},n._onScroll=function(e,t){t&&n._applyScrollEvent(t)},n._applyScrollEvent=function(e){n.props.isShown&&(n.props.onScroll&&"reposition"!==n.props.onScroll?n._onClose(e,"scroll"):n._repositionThrottled())},n._onEsc=function(e){n.props.isShown&&n._onClose(e,"esc")},n._onShow=function(){M.includes((0,r._)(n))||n.props.ninjaMode||M.push((0,r._)(n));var e=n._getPopupSize();n.state.isShown&&n._popupSize.width===e.width&&n._popupSize.height===e.height||n._reposition()},n._onHide=function(){M=M.filter(function(e){return e!==(0,r._)(n)}),n.setState({style:{top:0,left:0},isShown:!1})},n._onHideEnd=function(){n._onHide(),n.props.onHideEnd&&n.props.onHideEnd()},n._getExcludedNodes=function(){var e=n.props,t=e.getExcludedNodes,r=e.hideOnTargetClick,o=e.getTarget,i=[],a=t&&t();a&&(i=i.concat(a));var s=r?null:o();return s&&(i=i.concat(s)),i},n._renderPopup=function(){var e=n.props,t=n.state,r=t.isTargetVisible&&t.isShown?"visible":"hidden",i=e.noPointerEvents?"none":"auto",s=(0,o._)({zIndex:e.zIndex,visibility:r,pointerEvents:i},t.style),u=e.type||"normal",c=x({type:u,position:t.position,dropdown:e.isDropdown,"full-height":e.fullHeight})+(e.className?" "+e.className:""),l=t.maxContentHeight?{maxHeight:t.maxContentHeight}:{};return a.createElement("div",{className:c,style:s,ref:n._popup,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,role:"dialog"},void 0===e.showArrow||e.showArrow?a.createElement("div",{className:x("arrow",{"arrow-type":e.arrowType}),style:t.arrowStyle,ref:function(e){return n._arrow=e||void 0}},"tooltip"!==u||e.arrowType?null:a.createElement(k.Z,{name:"tips-arrow-vertical-8x24",className:x("arrow-icon"),inline:!0})):null,a.createElement("div",{className:x("content",{"full-height":e.fullHeight}),style:l},e.children),e.repositionOnContentResize?a.createElement(w.Z,{onResize:n._repositionThrottled}):null,a.createElement(b,{handlers:{key:d.n.ESC,callback:n._onEsc,allowInEditable:!0}}))},n._repositionThrottled=(0,C.Z)(n._reposition,50),n.state={style:{top:0,left:0},arrowStyle:{top:"auto",right:"auto",bottom:"auto",left:"auto"},position:"bottom",isShown:!1,isTargetVisible:!t.checkTargetVisibility},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._observer="IntersectionObserver"in window?new IntersectionObserver(function(){e._repositionThrottled()}):void 0,this.props.checkTargetVisibility&&this._repositionThrottled();var t=this.props.getTarget();t&&this._observer&&this._observer.observe(t)},n.componentDidUpdate=function(e){this.props!==e&&this.props.isShown&&this._repositionThrottled()},n.componentWillUnmount=function(){var e=this;M=M.filter(function(t){return t!==e}),this._repositionThrottled.cancel(),this._observer&&this._observer.disconnect()},n.render=function(){return a.createElement(u.Z,{selector:this.props.selector},a.createElement(S.Z,{animationRef:this._popup,onShow:this._onShow,onHideEnd:this._onHideEnd},this.props.isShown?a.createElement(c.Z,{callback:this._onClickOutside,getExcludedNodes:this._getExcludedNodes},this._renderPopup()):null),a.createElement(l.Z,{type:"resize",listener:this._onWindowChange,options:!0}),a.createElement(E.Z,{eventHandler:this._onScroll,throttleWait:0}),a.createElement(l.Z,{type:"orientationchange",listener:this._onWindowChange,options:!0}),a.createElement(l.Z,{type:"layout-change",listener:this._onWindowChange}))},t}(a.Component);function T(){return window.document.documentElement.scrollTop||window.document.body.scrollTop}function Z(){return window.document.documentElement.scrollLeft||window.document.body.scrollLeft}var D=(0,R.ZP)(I)},69602:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(61533),a=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getContainer=function(){var e=n.props;return e.containerRef?e.containerRef.current||void 0:e.selector?window.document.querySelector(e.selector)||void 0:window.document.body},n._updateContainer=function(){var e=n._getContainer();e!==n.state.container&&n.setState({container:e})},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateContainer()},n.componentDidUpdate=function(e){var t,n;((null==(t=e.containerRef)?void 0:t.current)!==(null==(n=this.props.containerRef)?void 0:n.current)||e.selector!==this.props.selector||e.children!==this.props.children)&&this._updateContainer()},n.render=function(){var e=this.state;return e.container?i.createPortal(this.props.children,e.container):null},t}(o.Component);t.Z=a},1477:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(34788),o=n(18007),i=n(87363),a=n(44748),s=n(31104),u=(0,a.Z)("resize-listener"),c=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._measurer=null,t._onResize=function(e){t.props.onResize(e)},t._onIframeLoad=function(){t._measurer.contentWindow.addEventListener("resize",t._onResize)},t._iframeRef=function(e){t._measurer=e},t}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this._measurer;e.contentWindow?this._onIframeLoad():e.addEventListener("load",this._onIframeLoad)},n.componentWillUnmount=function(){var e=this._measurer;e&&(e.removeEventListener("load",this._onIframeLoad),e.contentWindow&&e.contentWindow.removeEventListener("resize",this._onResize))},n.render=function(){return i.createElement("iframe",(0,r._)({className:u()},s.x,{ref:this._iframeRef}))},t}(i.Component)},43285:(e,t,n)=>{"use strict";function r(){return r}n.d(t,{ID:()=>a}),n(87363);var o=(0,n(84641).Z)("scroll",{addListener:r,getScrollableNode:function(){return null},getCacheScrollPosition:function(){return null},scrollId:"",registerStickyElement:r,unregisterStickyElement:r,updateStickyElement:r,getStickyElementsOffset:function(){return 0}}),i=o.connect,a=o.Provider;o.Context,t.ZP=i},39014:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(111),a=n(43285),s=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._attachListener=function(){var e;t._listener=(0,i.Z)(t.props.eventHandler,null!=(e=t.props.throttleWait)?e:512),t._unsubscribe=t.props.addListener(t._listener)},t._unattachListener=function(){var e;t._unsubscribe(),null==(e=t._listener)||e.cancel()},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._attachListener()},n.componentDidUpdate=function(e){e.eventHandler!==this.props.eventHandler&&(this._unattachListener(),this._attachListener())},n.componentWillUnmount=function(){this._unattachListener()},n.render=function(){return null},t}(o.PureComponent);t.Z=(0,a.ZP)(s)},19382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(34788),o=n(18007),i=n(87363),a=n(77473),s=n.n(a),u=n(55877),c=n.n(u),l=n(44748),d=n(30473),p=n(1477),m=n(77558),f=n(111),v=n(39014),h=n(43285),g=function(e){var t=this;this._listeners=[],this.addListener=function(e){return t._listeners.push(e),e(t._ref.current,null),function(){return t._removeListener(e)}},this._removeListener=function(e){t._listeners=t._listeners.filter(function(t){return t!==e})},this.fire=function(e){t._listeners.forEach(function(n){return n(t._ref.current,e)})},this._ref=e},y=n(31336),_=(0,l.Z)("scroll"),b={},w={passive:!0},E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=c().v4(),n._container=i.createRef(),n._content=null,n._wrap=i.createRef(),n._scrollbar=null,n._scrollbarThumb=null,n._ratio=1,n._startPageY=0,n._startScrollTop=0,n._onSelectStart=null,n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._emitter.fire(e)},n._onResize=function(){n._wrap.current&&n._content&&(n._height=n._wrap.current.clientHeight,n._ratio=n._height/n._content.clientHeight,"dynamic"===n.props.width&&n._fixContentWidth(),n._scrollbarThumb&&(n._updateScrollbarThumbPosition(n._getContainer().current.scrollTop),n._scrollbarThumb.style.height=100*n._ratio+"%"),n._showHideScrollbar(n._ratio<1))},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;n._scrollbarThumb&&n._updateScrollbarThumbPosition(e.scrollTop),t.cacheKey&&(b[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._onWheel=function(e){n._getContainer().current.scrollTop=n._getContainer().current.scrollTop+e.deltaY},n._onScrollbarClick=function(e){var t=n._getContainer().current,r=n._scrollbarThumb;e.pageY<r.getBoundingClientRect().top?t.scrollTop-=n._height:t.scrollTop+=n._height},n._onMouseDown=function(e){var t=n._wrap.current,r=n._getContainer().current;t&&r&&(window.addEventListener("mouseup",n._onMouseUp,w),window.addEventListener("mousemove",n._onMouseMoveThrottled,w),t.classList.add("_pressed"),n._startPageY=e.pageY,n._startScrollTop=r.scrollTop,n._onSelectStart=r.onselectstart,r.onselectstart=function(e){e.preventDefault()})},n._onMouseUp=function(){var e=n._wrap.current,t=n._getContainer().current;e&&t&&(n._removeMouseListeners(),e.classList.remove("_pressed"),t.onselectstart=n._onSelectStart)},n._onMouseMove=function(e){var t=n._getContainer().current;n._scrollbar&&(t.scrollTop=n._startScrollTop+(e.pageY-n._startPageY)/n._ratio)},n._removeMouseListeners=function(){window.removeEventListener("mouseup",n._onMouseUp,w),window.removeEventListener("mousemove",n._onMouseMoveThrottled,w)},n._updateScrollbarThumbPosition=function(e){n._scrollbarThumb.style.setProperty((0,d.r1)().styles.transform,"translate3d(0, "+Math.ceil(e*n._ratio)+"px, 0)")},n._fixContentWidth=function(){var e=n._getContainer().current,t=n._content,r=e.offsetWidth-e.clientWidth;t.style.marginRight=-r+"px"},n._showHideScrollbar=function(e){var t=n._scrollbar;t&&(t.style.display=e?"flex":"none")},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&b[e.cacheKey]||0;t.scrollTop!==r&&(0===r?t.scrollTop=r:s()(function(){return t.scrollTop=r}))},n._onResizeThrottled=(0,f.Z)(n._onResize,64),n._onMouseMoveThrottled=(0,f.Z)(n._onMouseMove,64),n._emitter=new g(n._getContainer()),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._onResize(),setTimeout(this._onResize,0),this._restoreScrollPosition(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._getContainer().current.addEventListener("scroll",this._onScroll,w),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey||t.keepOnUpdate)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._removeMouseListeners(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(null),this._getContainer().current.removeEventListener("scroll",this._onScroll,w),this._emitter.fire(null),this._onResizeThrottled.cancel(),this._onMouseMoveThrottled.cancel()},n.render=function(){var e=this,t=this.props;return i.createElement("div",{className:_({width:t.width||"narrow",disabled:t.disabled,"full-height":t.fullHeight}),ref:this._wrap},i.createElement("div",{className:_("container",{firefox:"Firefox"===t.config.uatraits.BrowserName}),ref:this._getContainer()},i.createElement("div",{className:_("content"),ref:function(t){return e._content=t}},i.createElement(h.ID,{value:{addListener:this._emitter.addListener,getScrollableNode:function(){return e._getContainer().current},getCacheScrollPosition:function(){var t;return e.props.cacheKey&&null!=(t=b[e.props.cacheKey])?t:null},scrollId:this._id,registerStickyElement:this.props.registerStickyElement,unregisterStickyElement:this.props.unregisterStickyElement,updateStickyElement:this.props.updateStickyElement,getStickyElementsOffset:this.props.getStickyElementsOffset}},t.children,i.createElement(v.Z,{eventHandler:this._onScrollSelf,throttleWait:64})),i.createElement(p.Z,{onResize:this._onResizeThrottled})),i.createElement(p.Z,{onResize:this._onResizeThrottled}),i.createElement("div",{className:_("scrollbar",{noprint:!0}),ref:function(t){return e._scrollbar=t},onWheel:this._onWheel},i.createElement("div",{"aria-hidden":!0,className:_("scrollbar-track"),onClick:this._onScrollbarClick}),i.createElement("div",{"aria-hidden":!0,className:_("scrollbar-thumb"),ref:function(t){return e._scrollbarThumb=t},onMouseDown:this._onMouseDown}))),i.createElement(m.Z,{type:"resize",listener:this._onResizeThrottled,options:w}))},t}(i.Component),S=(0,y.ZP)(E),C=(0,l.Z)("scroll"),k={},R={passive:!0},x=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=c().v4(),n._container=i.createRef(),n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._getContainer().current&&n._emitter.fire(e)},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&k[e.cacheKey]||0;t.scrollTop!==r&&window.requestAnimationFrame(function(){return t.scrollTop=r})},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;t.cacheKey&&(k[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._emitter=new g(n._getContainer()),n._provider={addListener:n._emitter.addListener,getScrollableNode:function(){return n._getContainer().current},getCacheScrollPosition:function(){var e;return n.props.cacheKey&&null!=(e=k[n.props.cacheKey])?e:null},registerStickyElement:n.props.registerStickyElement,unregisterStickyElement:n.props.unregisterStickyElement,updateStickyElement:n.props.updateStickyElement,getStickyElementsOffset:n.props.getStickyElementsOffset,scrollId:n._id,reachedBottom:function(){var e=n._getContainer().current;return!!e&&e.clientHeight+e.scrollTop>=e.scrollHeight-10}},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._restoreScrollPosition(),this._getContainer().current.addEventListener("scroll",this._onScroll,R),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey||t.keepOnUpdate)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._getContainer().current.removeEventListener("scroll",this._onScroll,R),this._emitter.fire(null)},n.render=function(){var e=this.props;return i.createElement("div",{className:C({width:e.width||"narrow",disabled:e.disabled,native:e.native,"full-height":e.fullHeight})},i.createElement("div",{className:C("container"),ref:this._getContainer()},i.createElement("div",{className:C("content")},i.createElement(h.ID,{value:this._provider},e.children,i.createElement(v.Z,{eventHandler:this._onScrollSelf,throttleWait:64})))))},t}(i.Component),P=n(44953),M=n(89048),I={passive:!0},T={},Z=function(e){var t,n,r=i.useId(),o=i.useRef(new g(e.node)),a=(t=e.cacheKey,n=(0,i.useRef)(),(0,i.useEffect)(function(){n.current=t}),n.current),s={addListener:o.current.addListener,getScrollableNode:function(){return e.node.current},getCacheScrollPosition:function(){var t;return e.cacheKey&&null!=(t=T[e.cacheKey])?t:null},registerStickyElement:e.registerStickyElement,unregisterStickyElement:e.unregisterStickyElement,updateStickyElement:e.updateStickyElement,getStickyElementsOffset:e.getStickyElementsOffset,scrollId:r},u=i.useCallback(function(){return e.node.current===window.document.documentElement?window.document:e.node.current},[e.node]),c=i.useCallback(function(t){e.node.current&&o.current.fire(t)},[e.node]),l=i.useCallback(function(){var t=e.cacheKey&&T[e.cacheKey]||0,n=e.node.current;n&&n.scrollTop!==t&&window.requestAnimationFrame(function(){return n.scrollTop=t})},[e.cacheKey,e.node]);return i.useEffect(function(){var e=u(),t=o.current;return null==e||e.addEventListener("scroll",c,I),t.fire(null),function(){null==e||e.removeEventListener("scroll",c,I),t.fire(null)}},[u,c]),i.useEffect(function(){a===e.cacheKey&&(a||e.cacheKey||e.keepOnUpdate)||l()},[a,e.cacheKey,e.keepOnUpdate,l]),i.createElement(h.ID,{value:s},e.children,i.createElement(v.Z,{eventHandler:function(t,n){if(n){e.cacheKey&&(T[e.cacheKey]=t.scrollTop),e.onScroll&&e.onScroll(t.scrollTop);var r=e.node.current;e.onScrollToEnd&&r&&r.clientHeight+r.scrollTop>=r.scrollHeight&&e.onScrollToEnd()}},throttleWait:64}))},D=function(e){var t=i.useRef(null);return(0,M.Z)(function(){t.current=window.document.documentElement}),i.createElement(Z,(0,r._)({},e,{node:t}),e.children)},L=function(e){function t(t){var n;return(n=e.call(this,t)||this)._analyticsRef=i.createRef(),n._registerStickyElement=function(e,t,r,o){n._stickyHeights[r][e]=0,n._stickyRefs[r][e]=t,n._stickyListeners[r][e]=o,n._calcStickyPositions(Math.max(e-1,0),r)},n._unregisterStickyElement=function(e,t){delete n._stickyHeights[t][e],delete n._stickyRefs[t][e]},n._updateStickyElement=function(e,t,r){n._stickyHeights[r][e]=t,n._calcStickyPositions(e,r)},n._calcStickyPositions=function(e,t){for(var r,o,i=0,a=0;a<=e;a++)"number"==typeof n._stickyHeights[t][a]&&(i+=n._stickyHeights[t][a]);for(var s=e+1;s<n._stickyHeights[t].length;s++)null==(r=(o=n._stickyListeners[t])[s])||r.call(o,i),"number"==typeof n._stickyHeights[t][s]&&(i+=n._stickyHeights[t][s])},n._isNodeWithinStickyElement=function(e){return n._stickyRefs.top.concat(n._stickyRefs.bottom).some(function(t){var n;return null==(n=t.current)?void 0:n.contains(e)})},n._getStickyElementsOffset=function(e){return n._stickyHeights[e].filter(Boolean).reduce(function(e,t){return e+t},0)},n._onScrollAnalytics=function(e){var t;e&&(null==(t=n._analyticsRef.current)||t.logEvent("onscroll",{height:null==e?void 0:e.clientHeight,scrollHeight:null==e?void 0:e.scrollHeight,scrollPosition:null==e?void 0:e.scrollTop}))},n._getScrollComponent=function(){return n.props.body?D:n.props.config.uatraits.isMobile||n.props.native?x:S},n._renderAnalytics=function(){return n.props.useAnalytics?i.createElement(i.Fragment,null,i.createElement(P.ZP,{name:"scroll",nodeRef:n._analyticsRef}),i.createElement(v.Z,{eventHandler:n._onScrollAnalytics})):null},n._stickyListeners={top:[],bottom:[]},n._stickyHeights={top:[],bottom:[]},n._stickyRefs={top:[],bottom:[]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){null==this.props.setIsNodeWithinStickyElementRef||this.props.setIsNodeWithinStickyElementRef.call(this.props,this._isNodeWithinStickyElement)},n.componentWillUnmount=function(){null==this.props.setIsNodeWithinStickyElementRef||this.props.setIsNodeWithinStickyElementRef.call(this.props,void 0)},n.render=function(){var e=this._getScrollComponent(),t=i.createElement(i.Fragment,null,this.props.children,this._renderAnalytics());return i.createElement(e,(0,r._)({},this.props,{children:t,getStickyElementsOffset:this._getStickyElementsOffset,registerStickyElement:this._registerStickyElement,unregisterStickyElement:this._unregisterStickyElement,updateStickyElement:this._updateStickyElement}))},t}(i.Component),A=(0,y.ZP)(L)},36887:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(87363),o=n(44748),i=function(e){var t=e.view,n=e.withoutMargin,i=e.color,a=(0,o.Z)("spinner-view_"+t);return r.createElement("div",{className:a({"without-margin":n,color:i})},r.createElement("div",{className:a("circle")}))}},77558:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(50576),a=function(e){function t(){return e.apply(this,arguments)}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;window.addEventListener(e.type,e.listener,e.options)},n.componentDidUpdate=function(e){var t=this.props;e.listener===t.listener&&(0,i.Z)(e.options,t.options)||(window.removeEventListener(e.type,e.listener,e.options),window.addEventListener(t.type,t.listener,t.options))},n.componentWillUnmount=function(){var e=this.props;window.removeEventListener(e.type,e.listener,e.options)},n.render=function(){return null},t}(o.Component);t.Z=a},73244:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(18188),o=n(87363),i=n(44748),a=n(31336),s=n(81194),u=n(94507),c=n(44953),l=n(33988),d=(0,i.Z)("zoom-control"),p=function(e){var t,n=(0,a.ZR)(),i=!!n.mapWidget,p=null!=(t=e.size)?t:n.uatraits.isMobile?"xmedium":"medium",m=(0,r._)(n.uatraits.isMobile&&!i?[l.zoomIn48Icon,l.zoomOut48Icon]:['<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 5.992c0-.537.448-.992 1-.992.556 0 1 .444 1 .992V11h5.008c.537 0 .992.448.992 1 0 .556-.444 1-.992 1H13v5.008c0 .537-.448.992-1 .992-.556 0-1-.444-1-.992V13H5.992C5.455 13 5 12.552 5 12c0-.556.444-1 .992-1H11V5.992z" fill="currentColor"/></svg>','<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 12a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1z" fill="currentColor"/></svg>'],2),f=m[0],v=m[1];return o.createElement("div",{className:d()},o.createElement("div",{className:d("group")},o.createElement("div",{className:d("zoom-in")},o.createElement(u.Z,{text:"Приблизить",position:"left",isDisabled:e.disabledZoomIn,isAir:!0},o.createElement(c.ZP,{name:"zoom_in",logClick:!0},o.createElement(s.Z,{view:"air",size:p,icon:o.createElement("div",{className:d("icon"),dangerouslySetInnerHTML:{__html:f}}),onClick:e.onZoomIn,ariaLabel:"Приблизить",disabled:e.disabledZoomIn,pinBottom:!n.uatraits.isMobile||i})))),o.createElement("div",{className:d("zoom-out")},o.createElement(u.Z,{text:"Отдалить",position:"left",isDisabled:e.disabledZoomOut,isAir:!0},o.createElement(c.ZP,{name:"zoom_out",logClick:!0},o.createElement(s.Z,{view:"air",size:p,icon:o.createElement("div",{className:d("icon"),dangerouslySetInnerHTML:{__html:v}}),ariaLabel:"Отдалить",onClick:e.onZoomOut,disabled:e.disabledZoomOut,pinTop:!n.uatraits.isMobile||i}))))))}},73911:(e,t,n)=>{"use strict";var r=n(87363),o=n(42850),i=n(44953);t.Z=function(e){return r.createElement(o.Z,{type:"mapNode"},r.createElement(i.ZP,e,e.children))}},41690:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(61533),a=n(30473),s=function(e){function t(t){var n;return(n=e.call(this,t)||this)._addListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.addEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.addEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._removeListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.removeEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.removeEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._onHideAnimationEnd=function(){var e;(null==(e=n.props.animationRef)?void 0:e.current)&&n._removeListeners(n.props.animationRef.current),i.flushSync(function(){n.setState({content:null},n.props.onHideEnd)})},n.state={content:t.children},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.children&&this.setState({content:this.props.children},this.props.onShow)},n.componentDidUpdate=function(e){var t=this.props.children;if(t)t!==e.children&&this.setState({content:t},this.state.content?void 0:this.props.onShow);else{var n,r=null==(n=this.props.animationRef)?void 0:n.current;r&&(this._addListeners(r),r.classList.add("_animation-hide")),this.props.onHideStart&&this.props.onHideStart()}},n.componentWillUnmount=function(){var e;(null==(e=this.props.animationRef)?void 0:e.current)&&this._removeListeners(this.props.animationRef.current)},n.render=function(){return this.state.content},t}(o.Component);t.Z=s},25164:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r,o=n(34788),i=n(2467),a=n(16145),s=n(80129),u=function(e){var t=s.stringify(e,{sort:function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}});return t?String(function(e){for(var t=e.length,n=5381,r=0;r<t;r++)n=33*n^e.charCodeAt(r);return n>>>0}(t)):""},c=function e(t,n,s,c){var l={csrfToken:r||s.csrfToken,sessionId:s.counters.analytics.sessionId,host_config:s.hostConfig,ajax:"1"};s.query["no-mail"]&&(l["no-mail"]=!0),s.query["no-cache"]&&(l["no-cache"]=!0),s.query.debug&&(l.debug=s.query.debug),s.mocks&&(l.mocks=0!==Object.keys(s.mocks).length?s.mocks:"1");var d={url:(n.baseUrl||s.apiBaseUrl)+"/api/"+t,method:"body"in n&&n.body?"POST":"GET",headers:(0,o._)({"X-Retpath-Y":window.location.href},n.headers)};"body"in n&&n.body&&(d.body=JSON.stringify(n.body),d.headers=(0,o._)({},d.headers,{"Content-Type":"application/json; charset=utf-8"}));var p=(0,o._)({},l,"query"in n&&n.query?n.query:{}),m=u(p);return d.query=(0,o._)({},p,{s:m}),"prestable"===s.environment&&(d.headers=(0,o._)({},d.headers,{"X-Ya-Maps-Prestable":"1"})),(0,i.Z)(d).then(function(o){if("type"in o&&"captcha"===o.type)throw window.location.href=o.captcha["captcha-page"],Error("Response is captcha");if("csrfToken"in o){if(!1!==c)return r=o.csrfToken,e(t,n,s,!1);throw Error("Invalid csrf token")}if(o.debug&&(0,a.v)(o.debug),"error"in o)throw"message"in o.error?Error(o.error.message):o.error;return o.data})}},52869:(e,t)=>{"use strict";t.Z={create:function(e,t){var n=t.success,r=t.fail,o=t.always,i=!1;return e.then(function(e){!i&&(n&&n(e),o&&o(null,e))},function(e){!i&&(r&&r(e),o&&o(e))}),{cancel:function(){return i=!0}}},cancel:function(e){e&&e.cancel()}}},30473:(e,t,n)=>{"use strict";n.d(t,{r1:()=>o});var r=n(22967),o=function(){return{events:{transitionEnd:i("transition"),animationEnd:i("animation")},styles:{transform:s("transform"),transition:s("transition"),userSelect:s("user-select")},cssStyles:{transform:a("transform"),transformOrigin:a("transform-origin")},has:{touch:"ontouchstart"in window||!!window.navigator.maxTouchPoints,retinaDisplay:window.devicePixelRatio>1,printColorAdjust:null!==u("printColorAdjust"),snapAlign:null!==u("scrollSnapAlign"),objectFit:null!==u("objectFit")}}};function i(e){var t=u(e);return t?t+(0,r.Z)(e)+"End":null!==t?e+"end":null}function a(e){var t=u(e);return t?"-"+t+"-"+e:null!==t?e:null}function s(e){var t=u(e);return t?t+c(e):null!==t?e:null}function u(e){var t=window.document.createElement("div");return void 0!==t.style[e]?"":void 0!==t.style["webkit"+c(e)]?"webkit":void 0!==t.style["Moz"+c(e)]?"Moz":void 0!==t.style["ms"+c(e)]?"ms":null}function c(e){return e.split("-").map(function(e){return(0,r.Z)(e)}).join("")}},41057:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(34788),o=n(20224),i=n(87363),a=n(71392),s=n(13752),u=function(e){var t,n=i.useRef(null),o=e.clickableRef||n,u=(0,s.p)({ref:o,skipBlurOnPress:e.skipBlurOnPress}),c=(t=({callback:e.callback}).callback,i.useCallback(function(e,n){if(e.keyCode===a.n.ENTER||e.keyCode===a.n.SPACE){var r=n||t;null==r||r(e)}},[t]));return(0,r._)({},u,{onKeyDown:c,ref:o})},c=(0,n(35645).Z)(function(e){var t=e.children,n=e.tag,a=e.forwardedRef,s=e.ariaHidden,c=e.ariaLabel,l=e.onClick,d=e.role,p=e.skipBlurOnPress,m=(0,o._)(e,["children","tag","forwardedRef","ariaHidden","ariaLabel","onClick","role","skipBlurOnPress"]),f=u({callback:e.onClick,clickableRef:a,skipBlurOnPress:p}),v=s||!l,h="string"==typeof t?t:c,g=i.useCallback(function(t){f.onMouseLeave(t),null==e.onMouseLeave||e.onMouseLeave.call(e,t)},[f,e]),y=i.useCallback(function(t){f.onMouseDown(t),null==e.onMouseDown||e.onMouseDown.call(e,t)},[f,e]);return i.createElement(void 0===n?"div":n,(0,r._)({},m,f,{onMouseDown:y,onMouseLeave:g,onClick:l,"aria-hidden":v,"aria-label":h,role:d||"button",tabIndex:v?-1:0}),t)})},35645:(e,t,n)=>{"use strict";var r=n(34788),o=n(87363);t.Z=function(e){return o.forwardRef(function(t,n){return o.createElement(e,(0,r._)({},t,{forwardedRef:n||void 0}),t.children)})}},18:(e,t,n)=>{"use strict";var r=n(34788),o=n(18188),i=n(80129),a=n(50770),s=n(94430),u=["","permission_denied","position_unavailable","timeout","unknown"],c=function(e){this.message=e,this.code=u.indexOf(e)},l={ERROR_TYPES:u,getCurrentPosition:function(e,t){var n,r,o;return(void 0===t&&(t=6e4),(null==(n=e.query.mocks)?void 0:n.geolocation)==="denied")?Promise.reject(new c("permission_denied")):(null==(r=e.query.mocks)?void 0:r.geolocation)==="unavailable"?Promise.reject(new c("position_unavailable")):(null==(o=(0,s.W)())||o.logEvent("geolocation_request"),p({timeout:t}).then(function(t){var n,r,o,i=t.coords;null==(n=(0,s.W)())||n.logEvent("geolocation_success",{accuracy:i.accuracy});var a=f(null==(r=e.query.mocks)?void 0:r.geolocation),u=a?{accuracy:null!=(o=a.accuracy)?o:i.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:i;return d(u,e),u}).catch(function(e){var t;if(null==(t=(0,s.W)())||t.logEvent("geolocation_fail",{type:(null==e?void 0:e.code)?l.ERROR_TYPES[e.code]:"unknown"}),e)throw e;throw new c("unknown")}))},watchPosition:function(e,t,n){if(void 0===n&&(n=6e4),(null==(v=t.query.mocks)?void 0:v.geolocation)==="denied")return e.onError("permission_denied"),0;if((null==(h=t.query.mocks)?void 0:h.geolocation)==="unavailable")return e.onError("position_unavailable"),0;null==(g=(0,s.W)())||g.logEvent("geolocation_watch_request");var o,i,a,u,c,m,v,h,g,y=!1;return o=function(n){y||(null==(o=(0,s.W)())||o.logEvent("geolocation_watch_success",{accuracy:n.coords.accuracy}),y=!0);var r,o,i,a=f(null==(r=t.query.mocks)?void 0:r.geolocation),u=a?{accuracy:null!=(i=a.accuracy)?i:n.coords.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:n.coords;d(u,t),e.onSuccess(u)},i=function(t){var n,r=(null==t?void 0:t.code)?l.ERROR_TYPES[t.code]:"unknown";y||(null==(n=(0,s.W)())||n.logEvent("geolocation_watch_fail",{type:r}),y=!0),e.onError(r)},a={timeout:n},(null==(c=window.yandex)?void 0:null==(u=c.mapsApp)?void 0:u.getCurrentUserLocation)?window.setInterval(function(){return p(a).then(o).catch(i)},null!=(m=null==a?void 0:a.timeout)?m:6e4):window.navigator.geolocation.watchPosition(o,i,(0,r._)({enableHighAccuracy:!0},a))},clearWatch:function(e){var t,n;(null==(n=window.yandex)?void 0:null==(t=n.mapsApp)?void 0:t.getCurrentUserLocation)?window.clearInterval(e):window.navigator.geolocation.clearWatch(e)},checkPermission:function(e){var t,n;return(null==(t=e.query.mocks)?void 0:t.geolocation)==="denied"||(null==(n=e.query.mocks)?void 0:n.geolocation)==="unavailable"?Promise.reject("denied"):window.navigator.permissions?Promise.race([window.navigator.permissions.query({name:"geolocation"}).then(function(e){return e.state}),a.Vs(2e3)]).catch(function(){}):Promise.resolve(void 0)}};function d(e,t){t.isYango||!e||e.accuracy>5e3||(new window.Image().src=t.morda.url+"/gpsave?"+i.stringify({sk:t.xscriptCsrfToken,lat:e.latitude,lon:e.longitude,precision:e.accuracy}))}function p(e){var t,n,o,i=null==(n=window.yandex)?void 0:null==(t=n.mapsApp)?void 0:t.getCurrentUserLocation;return i?Promise.race([i().then(function(e){return"string"==typeof e?JSON.parse(e):e}).catch(function(){throw new c("position_unavailable")}),a.Vs(null!=(o=null==e?void 0:e.timeout)?o:6e4).then(function(){throw new c("timeout")})]):new Promise(function(t,n){return window.navigator.geolocation.getCurrentPosition(t,n,(0,r._)({enableHighAccuracy:!0},e))})}var m=/^\d+\.?(\d+)?,\d+\.?(\d+)?(,\d+)?$/;function f(e){if(m.test(e)){var t=(0,o._)(e.split(",").map(Number),3);return{latitude:t[0],longitude:t[1],accuracy:t[2]}}}t.Z=l},13752:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(34788),o=n(18188),i=n(87363);function a(e){var t=(0,o._)(i.useState(!1),2),n=t[0],a=t[1],s=i.useCallback(function(){return a(!1)},[a]),u=i.useCallback(function(){return a(!0)},[a]),c=i.useCallback(function(){if(n&&e.ref.current===window.document.activeElement&&!e.skipBlurOnPress){var t;null==(t=e.ref.current)||t.blur()}},[e,n]);return(0,r._)({},{onMouseLeave:s,onMouseDown:u,onFocus:c})}},33228:(e,t,n)=>{"use strict";var r=n(34788),o=n(18007),i=n(87363),a=n(44748),s=n(2467),u=n(52869),c=n(41057),l=n(55877),d=n.n(l),p={},m={},f=(0,a.Z)("inline-image"),v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=i.createRef(),n._setSVGSize=function(){var e,t=null==(e=n._ref.current)?void 0:e.firstElementChild;t&&(void 0!==n.props.width&&t.setAttribute("width",String(n.props.width)),void 0!==n.props.height&&t.setAttribute("height",String(n.props.height)))},n._load=function(){u.Z.cancel(n._loadAction);var e=n.props.url;""!==e&&(m[e]||(m[e]=(0,s.Z)({url:e,parser:"string"}),m[e].then(function(t){return p[e]=t},function(){return delete m[e]})),n._loadAction=u.Z.create(m[e],{success:function(){return n.setState({loaded:!0})}}))},n._generatedId=d().v4(),n.state={loaded:!!p[n.props.url]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.loaded?this._setSVGSize():this._load()},n.componentDidUpdate=function(e,t){if(!t.loaded&&this.state.loaded&&this._setSVGSize(),this.props.url!==e.url){this._setSVGSize(),u.Z.cancel(this._loadAction);var n=!!p[this.props.url];this.setState({loaded:n}),n||this._load()}},n.componentWillUnmount=function(){u.Z.cancel(this._loadAction)},n.render=function(){var e,t=this.props,n=p[t.url],o=null==n?void 0:null==(e=n.match(/<clipPath[^>]+id="([^"]+)"/))?void 0:e[1];return(o&&(n=n.replace(RegExp(o,"g"),this._generatedId)),t.children)?t.children(n||""):i.createElement(c.Z,{tag:"span",ref:this._ref,key:this.state.loaded?0:1,style:(0,r._)({},t.style,{fontSize:0,lineHeight:0}),ariaLabel:t.ariaLabel,ariaHidden:t.ariaHidden,className:f({loaded:this.state.loaded})+(t.className?" "+t.className:""),onClick:t.onClick,dangerouslySetInnerHTML:n?{__html:n}:void 0},n?null:i.createElement("svg",{width:this.props.width,height:this.props.height}))},t}(i.PureComponent);t.Z=v},70427:(e,t,n)=>{"use strict";var r=n(11912),o={};t.Z=function(e,t){var n=e.toString();return o[n]||Object.keys(t).reduce(function(t,i){return t[i]=function(){for(var t=arguments.length,a=Array(t),s=0;s<t;s++)a[s]=arguments[s];return function(t){var s,u=function(e){return t((s=e)[i].apply(s,(0,r._)(a)))};return o[n]?u(o[n]):e().then(function(e){var t=e.default;return u(o[n]=t)},function(e){var n;return t((n=e.message,function(e,t){e({type:"EXTEND",payload:{loadingErrors:(0,r._)(t().loadingErrors).concat([n])}})}))})}},t},{})}},88599:(e,t,n)=>{"use strict";var r=n(18007),o=n(20224),i=n(87363),a=n(28216);t.Z=function(e,t,n){void 0===n&&(n={});var s=!1,u=function(t){function a(){return t.apply(this,arguments)}(0,r._)(a,t);var u=a.prototype;return u.shouldComponentUpdate=function(e){return n.withSideEffect?e.shouldRender:!s&&!this.props.shouldRender&&e.shouldRender},u.componentDidUpdate=function(e){!e.shouldRender&&this.props.shouldRender&&(s=!0)},u.render=function(){var t=this.props,r=t.shouldRender,a=(0,o._)(t,["shouldRender"]);return r?i.createElement(e,a):n.placeholder||null},a}(i.Component);return a.$j(function(e){return{shouldRender:t(e)}})(u)}},65807:(e,t)=>{"use strict";var n={};t.Z=function(e,t){if(void 0===t&&(t=!0),e in n)return n[e];var r=window.document.createElement("script");return r.type="text/javascript",r.charset="utf-8",e.includes("//")&&!e.startsWith(window.location.origin)&&t&&(r.crossOrigin="anonymous"),r.src=("file:"===window.location.protocol&&e.startsWith("//")?"http:":"")+e,r.async=!0,n[e]=new Promise(function(e,t){r.onload=function(){r.onload=function(){return null},r.onerror=r.onload,e()},r.onerror=function(){r.onload=function(){return null},r.onerror=r.onload,t(Error("Failed to load "+r.src))};var n=window.document.getElementsByTagName("head")[0];n.insertBefore(r,n.lastChild)}),n[e]}},43272:(e,t,n)=>{"use strict";n.d(t,{k7:()=>o,sL:()=>i,M8:()=>u,Uc:()=>c,h9:()=>f,OO:()=>v,b:()=>h,aC:()=>a,EB:()=>s,mH:()=>l,B1:()=>d,iR:()=>p,WN:()=>m,mu:()=>g,US:()=>y,az:()=>_,Uv:()=>b,cg:()=>w,Cb:()=>E});var r=n(11912),o=["object/add"],i=["entrance/add","address/add","road/add","other/add","transit/stop/add","parking/add","barrier/add","fence/add","crosswalk/add","gate/add","provider/add"],a=["object/edit"],s=["object/other","address/edit","entrance/edit","object/location/edit","object/name/edit","object/not-found"],u=["assignment/organization/status"],c=["assignment/barrier/edit","assignment/gate/edit","assignment/entrance/edit","assignment/settlement/scheme/add","assignment/address/add"],l=["transit/stop/edit"],d=["transit/stop/not-found","transit/stop/name/edit","transit/stop/location/edit","transit/stop/route/incorrect","transit/stop/other"],p=["subway/edit"],m=["subway/not-found","subway/name/edit","subway/location/edit","subway/other"],f=["organization/add"],v=["organization/edit","organization/closed"],h=["organization/edit-info","organization/other","organization/closed-full","organization/closed/permanently","organization/closed/temporary","organization/closed/unknown","organization/opened","organization/moved","organization/location/edit","organization/edit-accessibility"],g=["route/edit","route/incorrect"],y=["route/edit/better","route/incorrect/road-closed","route/incorrect/poor-condition","route/incorrect/prohibiting-sign","route/incorrect/obstruction","route/incorrect/other","route/other"],_=["object/select"],b=["map/edit"],w=["spot/other"];(0,r._)(["ru.yandex.yandexnavi","ru.yandex.yandexnavi.inhouse","ru.yandex.yandexnavi.sandbox","ru.yandex.yandexnavi.debug","ru.yandex.yandexnavi.pr","ru.yandex.mobile.navigator","ru.yandex.mobile.navigator.inhouse","ru.yandex.mobile.navigator.sandbox"]).concat((0,r._)(["desktop-yango-maps","touch-yango-maps","com.yango.maps.android.pr","com.yango.maps.android.debug","com.yango.maps.ios.inhouse","com.yango.maps.ios.sandbox","com.yango.maps.android","com.yango.maps.ios","ru.yandex.yango","ru.yandex.yango.develop","ru.yandex.yango.inhouse","com.yandex.yango","com.yandex.yango.develop","com.yandex.yango.debug","com.yango.driver","com.yango.driver.beta","com.yango.driver.flutter.ios","com.yango.driver.flutter.ios.develop","ru.yandex.taximeter","ru.yandex.taximeter.flutter.ios","ru.yandex.taximeter.flutter.ios.develop","ru.yandex.taximeter.flutter.ios.develop.debug","ru.yandex.taximeter.flutter.ios.inhouse","ru.yandex.taximeter.beta","com.yango.delivery"]),["web","mobile_maps_android","mobile_maps_ios","serp","tycoon","webview_form","ugc","nyak","ru.yandex.searchplugin","ru.yandex.yandexmaps","ru.yandex.traffic","ru.yandex.traffic.sandbox","ru.yandex.traffic.inhouse","ru.yandex.yandexmaps.debug","ru.yandex.yandexmaps.pr","com.yandex.maps.TestApp","com.yandex.maps.testapp","com.yandex.maps.mrctestapp","com.yandex.maps.mrctestapp.testing","com.yandex.browser","ru.yandex.mobile","ru.yandex.mobile.search","desktop-maps","touch-maps","touch-nmaps","ru.yandex.delivery"]);var E=["feedback.common.error_in_geo_object_menu","feedback.common.add_object_to_map","feedback.spot_other.finish","feedback.finish_form.edit_status_carousel","toponym.add_finish","toponym.edit_finish","organization.add_finish","organization.edit_finish","ugc_profile.feedbacks_footer","ugc_profile.feedbacks_footer.edit_map","ugc_profile.feedbacks_footer.add_object","ugc_profile.feedbacks_placeholder","ugc_profile.feedbacks_drafts.feedbacks_draft","ugc_profile.assignments_placeholder.add_object","ugc_profile.assignments_push_placeholder.edit_object","ugc_profile.organization_edit_status_assignment.edit","ugc_profile.organization_edit_status_assignment.submit","ugc_profile.barrier_assignment.edit","ugc_profile.gate_assignment.edit","ugc_profile.add_address_assignment.edit","ugc_profile.settlement_scheme_assignment.edit","ugc_profile.entrances_assignment.edit","ugc_profile.review_impression.closed","map.context","map.controls","organization.footer","organization.features","organization.search_result","toponym.search_results","toponym.default","toponym.building","toponym.building_without_address","toponym.add_object","route.routes_list","route.detailed_info","user_profile.edit_map","masstransit.default","masstransit.subway"]},89920:(e,t,n)=>{"use strict";n.d(t,{qv:()=>S,W3:()=>i,bl:()=>u,RP:()=>a,Qr:()=>s,NM:()=>c,OI:()=>l,ai:()=>d,mR:()=>p,KT:()=>m,LB:()=>f,Rf:()=>g,UZ:()=>v,pj:()=>h,xT:()=>_,cV:()=>C,T_:()=>b,XS:()=>w,fU:()=>E});var r=n(43272);function o(e){return r.sL.includes(e)}function i(e){return r.k7.includes(e)||o(e)}function a(e){return r.aC.includes(e)}function s(e){return r.EB.includes(e)}function u(e){return a(e)||s(e)}function c(e){return r.mH.includes(e)}function l(e){return r.B1.includes(e)}function d(e){return r.iR.includes(e)}function p(e){return r.WN.includes(e)}function m(e){var t;return d(e)||p(e)||c(t=e)||l(t)}function f(e){return r.h9.includes(e)}function v(e){return r.OO.includes(e)}function h(e){return r.b.includes(e)}function g(e){return v(e)||h(e)}function y(e){return r.US.includes(e)}function _(e){return r.mu.includes(e)||y(e)}function b(e){return r.az.includes(e)}function w(e){return r.Uv.includes(e)}function E(e){return r.cg.includes(e)}function S(e){var t;return r.M8.includes(e)||r.Uc.includes(e)||o(e)||s(e)||l(e)||p(e)||h(t=e)||f(t)||y(e)||E(e)}function C(e){return o(e)||y(e)||E(e)||["transit/stop/location/edit","object/location/edit","entrance/edit","subway/location/edit"].includes(e)}},72393:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(18007),o=n(87363),i=n(44748),a=n(36581),s=n(31336),u=n(44953),c=n(97313),l=n(44054),d=n(57636),p=n(85172),m=(0,i.Z)("geolocation-pin"),f={fill:"#000",fillOpacity:.05,stroke:[{width:1,opacity:.07,color:"#000"}],interactive:!1,zIndex:c.I.minimum,simplificationRate:0},v=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(o.Fragment,null,o.createElement(u.ZP,{name:"geolocation_pin"},o.createElement(a.Z,{coordinates:e.currentPosition,zIndex:c.I.minimum,nonInteractive:!0},o.createElement("div",{className:m()},o.createElement("div",{className:m("shadow")},o.createElement(d.Z,{name:"map-placemark-dot-shadow-32"})),o.createElement("div",{className:m("placemark")},o.createElement(d.Z,{name:"map-placemark-dot-32",theme:e.theme}))))),e.config.uatraits.isMobile?o.createElement(l.Z,{center:e.currentPosition,radius:e.accuracy,drawingStyle:f}):null)},t}(o.Component),h=(0,p.ZP)((0,s.ZP)(v))},25441:(e,t,n)=>{"use strict";n.d(t,{aK:()=>o,HA:()=>i});var r=n(3558);function o(e){return{permalink:e.permalink,orderIds:e.orderIds}}function i(e){var t,n,o,i,a=e.businessLinks.find(function(e){return"#hotel_traits"===e.aref}),s=r.x(e),u=(null==(i=e.advert)?void 0:null==(o=i.promo)?void 0:null==(n=o.ordInfo)?void 0:null==(t=n.client)?void 0:t.id)==="91317256";return!!(a&&!s&&u)}},89318:(e,t,n)=>{"use strict";n.d(t,{R7:()=>eF,VB:()=>eN,Gr:()=>ez,y7:()=>eU,XT:()=>eO});var r=(0,n(34788)._)({},{airport:"airports",area:"district",country_fallback:"fallback-toponym",house:"building",metro_station:"fallback-toponym",railway_station:"railway-station",other:"fallback-toponym",region:"fallback-toponym",station:"bus-station",vegetation:"park",unknown:"fallback-toponym"},{barbershop:"hairdressers",gasoline:"gas-station",hotel:"hotels","phone-shop":"mobile-phones",restaurant:"restaurants",shop:"supermarket","shopping-mall":"malls",pharmacy:"medicine","currency-exchange":"currency-exchange-fallback"}),o={medicine:"medicine-tr",drugstores:"drugstores-tr","emergency-point":"emergency-point-tr","currency-exchange":"currency-exchange-tr"},i={banks:"banks-ru","currency-exchange":"currency-exchange-ru"},a={medicine:"medicine-wd",drugstores:"drugstores-ae"},s=n(23546),u=n.n(s),c=n(54741),l=n.n(c),d=n(9912),p=n.n(d),m=n(53711),f=n.n(m),v=n(71880),h=n.n(v),g=n(50708),y=n.n(g),_=n(48102),b=n.n(_),w=n(82146),E=n.n(w),S=n(81004),C=n.n(S),k=n(19556),R=n.n(k),x=n(42552),P=n.n(x),M=n(3978),I=n.n(M),T=n(69777),Z=n.n(T),D=n(24064),L=n.n(D),A=n(57070),z=n.n(A),N=n(41197),U=n.n(N),F=n(77484),O=n.n(F),q=n(36410),B=n.n(q),H=n(17049),W=n.n(H),j=n(65606),G=n.n(j),Y=n(42363),V=n.n(Y),X=n(21524),K=n.n(X),J=n(79039),$=n.n(J),Q=n(78958),ee=n.n(Q),et=n(82461),en=n.n(et),er=n(21704),eo=n.n(er),ei=n(2509),ea=n.n(ei),es=n(5600),eu=n.n(es),ec=n(66419),el=n.n(ec),ed=n(95165),ep=n.n(ed),em=n(82490),ef=n.n(em),ev=n(12122),eh=n.n(ev),eg=n(90851),ey=n.n(eg),e_=n(11423),eb=n.n(e_),ew=n(78450),eE=n.n(ew),eS=n(35439),eC=n.n(eS),ek=n(23811),eR=n.n(ek),ex=n(26779),eP=n.n(ex),eM=n(2285),eI=n.n(eM),eT=n(72852),eZ=n.n(eT),eD={favicon:["favicon.svg"],"metro-favicon":["favicon.svg"],rubrics:["administration-14.svg","administration-24.svg","aeroexpress-14.svg","aeroexpress-24.svg","airfield-14.svg","airfield-24.svg","airports-14.svg","airports-24.svg","animation-14.svg","animation-24.svg","aquarium-14.svg","aquarium-24.svg","architect-bureau-14.svg","architect-bureau-24.svg","armenian-church-14.svg","armenian-church-24.svg","art-14.svg","art-24.svg","atm-14.svg","atm-24.svg","attraction-14.svg","attraction-24.svg","auto-14.svg","auto-24.svg","auto-parts-14.svg","auto-parts-24.svg","auto-repair-14.svg","auto-repair-24.svg","baby-shop-14.svg","baby-shop-24.svg","bakery-24.svg","banks-14.svg","banks-24.svg","banks-ru-14.svg","banks-ru-24.svg","banks-ru-central-14.svg","banks-ru-central-24.svg","bars-14.svg","bars-24.svg","baths-14.svg","baths-24.svg","beach-14.svg","beach-24.svg","beauty-14.svg","beauty-24.svg","beauty-shops-14.svg","beauty-shops-24.svg","beer-market-14.svg","beer-market-24.svg","bike-14.svg","bike-24.svg","bike-rent-14.svg","bike-rent-24.svg","bike-rent-test-14-flip.svg","bike-rent-test-24-flip.svg","boat-station-14.svg","boat-station-24.svg","bookstore-14.svg","bookstore-24.svg","bowling-14.svg","bowling-24.svg","buddhism-14.svg","buddhism-24.svg","building-14.svg","building-24.svg","bus-medium-14.svg","bus-medium-24.svg","bus-station-14.svg","bus-station-24.svg","bus-stop-14.svg","bus-stop-24.svg","butcher-shop-14.svg","butcher-shop-24.svg","cableway-14.svg","cableway-24.svg","cafe-14.svg","cafe-24.svg","canteen-14.svg","canteen-24.svg","car-14.svg","car-24.svg","car-park-14.svg","car-park-24.svg","car-park-barrier-14.svg","car-park-barrier-24.svg","car-park-disabled-14.svg","car-park-disabled-24.svg","car-park-taxi-14.svg","car-park-taxi-24.svg","car-park-toll-14.svg","car-park-toll-24.svg","car-wash-14.svg","car-wash-24.svg","catholic-church-14.svg","catholic-church-24.svg","cemetery-14.svg","cemetery-24.svg","checkpoint-14.svg","checkpoint-24.svg","childrens-camp-14.svg","childrens-camp-24.svg","childrens-playground-14.svg","childrens-playground-24.svg","christmas-bazaars-24.svg","cinemas-14.svg","cinemas-24.svg","circus-14.svg","circus-24.svg","clothes-shop-14.svg","clothes-shop-24.svg","college-14.svg","college-24.svg","concert-hall-14.svg","concert-hall-24.svg","confectionary-14.svg","confectionary-24.svg","construction-hypermarket-14.svg","construction-hypermarket-24.svg","construction-tool-14.svg","construction-tool-24.svg","country-14.svg","country-24.svg","covered-park-14.svg","covered-park-24.svg","currency-exchange-14.svg","currency-exchange-24.svg","currency-exchange-fallback-14.svg","currency-exchange-fallback-24.svg","currency-exchange-ru-14.svg","currency-exchange-ru-24.svg","currency-exchange-test-14.svg","currency-exchange-test-14_rtl.svg","currency-exchange-test-24.svg","currency-exchange-test-24_rtl.svg","currency-exchange-tr-14.svg","currency-exchange-tr-24.svg","dairy-14.svg","dairy-24.svg","dancehall-14.svg","dancehall-24.svg","dental-14.svg","dental-24.svg","district-14.svg","district-24.svg","dolmus-14.svg","dolmus-24.svg","driving-school-14.svg","driving-school-24.svg","drop-off-14.svg","drop-off-24.svg","drugstores-14.svg","drugstores-24.svg","drugstores-ae-14.svg","drugstores-ae-24.svg","drugstores-tr-14.svg","drugstores-tr-24.svg","drugstores-wd-14.svg","drugstores-wd-24.svg","dry-cleaning-14.svg","dry-cleaning-24.svg","electronics-14.svg","electronics-24.svg","emergency-14.svg","emergency-24.svg","emergency-point-tr-14.svg","emergency-point-tr-24.svg","entertainments-14.svg","entertainments-24.svg","entrance-14.svg","entrance-24.svg","equestrian-14.svg","equestrian-24.svg","exhibition-center-14.svg","exhibition-center-24.svg","factory-14.svg","factory-24.svg","fallback-14.svg","fallback-24.svg","fallback-beauty-14.svg","fallback-beauty-24.svg","fallback-civil-services-14.svg","fallback-civil-services-24.svg","fallback-common-14.svg","fallback-common-24.svg","fallback-drugstores-14.svg","fallback-drugstores-24.svg","fallback-entertainment-14.svg","fallback-entertainment-24.svg","fallback-food-drink-14.svg","fallback-food-drink-24.svg","fallback-fun-14.svg","fallback-fun-24.svg","fallback-health-14.svg","fallback-health-24.svg","fallback-hydro-14.svg","fallback-hydro-24.svg","fallback-medicine-14.svg","fallback-medicine-24.svg","fallback-outdoor-14.svg","fallback-outdoor-24.svg","fallback-services-14.svg","fallback-services-24.svg","fallback-shopping-14.svg","fallback-shopping-24.svg","fallback-toponym-14.svg","fallback-toponym-24.svg","fallback-transport-14.svg","fallback-transport-24.svg","fast-food-14.svg","fast-food-24.svg","favorite-24.svg","festival-14.svg","festival-24.svg","film-studio-14.svg","film-studio-24.svg","fire-station-14.svg","fire-station-24.svg","fireworks-24.svg","fish-store-14.svg","fish-store-24.svg","fitness-14.svg","fitness-24.svg","flower-shop-14.svg","flower-shop-24.svg","food-market-14.svg","food-market-24.svg","forest-14.svg","forest-24.svg","fountain-14.svg","fountain-24.svg","funicular-14.svg","funicular-24.svg","furniture-store-14.svg","furniture-store-24.svg","gallery-14.svg","gallery-24.svg","garage-cooperative-14.svg","garage-cooperative-24.svg","garden-14.svg","garden-24.svg","gasstation-14.svg","gasstation-24.svg","gastro-market-14.svg","gastro-market-24.svg","geyser-14.svg","geyser-24.svg","giftshop-14.svg","giftshop-24.svg","golf-14.svg","golf-24.svg","government-14.svg","government-24.svg","grass-14.svg","grass-24.svg","greengrocery-14.svg","greengrocery-24.svg","hairdressers-14.svg","hairdressers-24.svg","haulier-14.svg","haulier-24.svg","heart-24.svg","highspeed-tram-stop-14.svg","highspeed-tram-stop-24.svg","home-14.svg","home-24.svg","home-appliances-14.svg","home-appliances-24.svg","hospital-14.svg","hospital-24.svg","hostels-14.svg","hostels-24.svg","hotels-14.svg","hotels-24.svg","household-supplies-14.svg","household-supplies-24.svg","hydro-14.svg","hydro-24.svg","hypermarket-14.svg","hypermarket-24.svg","indoor-infra-elevator-disabled-14.svg","indoor-infra-elevator-disabled-24.svg","indoor-service-charging-socket-14.svg","indoor-service-charging-socket-24.svg","indoor-service-luggage-14.svg","indoor-service-luggage-24.svg","industrial-enterprise-14.svg","industrial-enterprise-24.svg","information-14.svg","information-24.svg","it-14.svg","it-24.svg","jewelry-store-14.svg","jewelry-store-24.svg","justice-14.svg","justice-24.svg","kindergarten-14.svg","kindergarten-24.svg","landmark-14.svg","landmark-24.svg","laundry-14.svg","laundry-24.svg","library-14.svg","library-24.svg","liquor-store-14.svg","liquor-store-24.svg","locality-14.svg","locality-24.svg","locker-14.svg","locker-24.svg","malls-14.svg","malls-24.svg","market-14.svg","market-24.svg","marketplace-14.svg","marketplace-24.svg","medical-14.svg","medical-24.svg","medicine-14.svg","medicine-24.svg","medicine-il-14.svg","medicine-il-24.svg","medicine-tr-14.svg","medicine-tr-24.svg","medicine-wd-14.svg","medicine-wd-24.svg","memorable-event-14.svg","memorable-event-24.svg","minibus-14.svg","minibus-24.svg","mobile-phones-14.svg","mobile-phones-24.svg","monument-14.svg","monument-24.svg","mosque-14.svg","mosque-24.svg","mountain-14.svg","mountain-24.svg","museum-14.svg","museum-24.svg","music-store-14.svg","music-store-24.svg","musicclub-14.svg","musicclub-24.svg","nail-studio-14.svg","nail-studio-24.svg","news-14.svg","news-24.svg","night-club-14.svg","night-club-24.svg","office-14.svg","office-24.svg","office-service-14.svg","office-service-24.svg","offline-14.svg","offline-24.svg","online-store-14.svg","online-store-24.svg","opticial-store-14.svg","opticial-store-24.svg","orthodox-church-14.svg","orthodox-church-24.svg","park-14.svg","park-24.svg","pawnshop-14.svg","pawnshop-24.svg","pedestrian-14.svg","pedestrian-24.svg","perfume-shop-14.svg","perfume-shop-24.svg","pet-playground-14.svg","pet-playground-24.svg","petshop-14.svg","petshop-24.svg","photo-14.svg","photo-24.svg","picnic-14.svg","picnic-24.svg","pier-14.svg","pier-24.svg","pizzeria-14.svg","pizzeria-24.svg","planetarium-14.svg","planetarium-24.svg","playground-14.svg","playground-24.svg","police-14.svg","police-24.svg","police-post-14.svg","police-post-24.svg","pool-hall-14.svg","pool-hall-24.svg","port-14.svg","port-24.svg","post-office-14.svg","post-office-24.svg","printing-services-14.svg","printing-services-24.svg","protestant-church-14.svg","protestant-church-24.svg","province-14.svg","province-24.svg","pub-14.svg","pub-24.svg","racing-14.svg","racing-24.svg","railway-entrance-14.svg","railway-entrance-24.svg","railway-station-14.svg","railway-station-24.svg","railway-terminal-14.svg","railway-terminal-24.svg","restaurants-14.svg","restaurants-24.svg","rezervation-14.svg","rezervation-24.svg","route-14.svg","route-24.svg","sanatorium-14.svg","sanatorium-24.svg","school-14.svg","school-24.svg","science-14.svg","science-24.svg","shoe-store-14.svg","shoe-store-24.svg","shooting-14.svg","shooting-24.svg","skating-rink-14.svg","skating-rink-24.svg","ski-resort-14.svg","ski-resort-24.svg","smile-24.svg","software-14.svg","software-24.svg","spa-14.svg","spa-24.svg","sport-14.svg","sport-24.svg","sport-school-14.svg","sport-school-24.svg","sportcenter-14.svg","sportcenter-24.svg","sports-bar-14.svg","sports-bar-24.svg","spring-14.svg","spring-24.svg","stadium-14.svg","stadium-24.svg","stage-14.svg","stage-24.svg","standpipe-14.svg","standpipe-24.svg","stationery-store-14.svg","stationery-store-24.svg","stenograffia-14.svg","stenograffia-24.svg","street-14.svg","street-24.svg","subway-fallback-14.svg","subway-fallback-24.svg","supermarket-14.svg","supermarket-24.svg","sushi-14.svg","sushi-24.svg","swimming-pool-14.svg","swimming-pool-24.svg","synagogue-14.svg","synagogue-24.svg","tableware-14.svg","tableware-24.svg","tailor-14.svg","tailor-24.svg","taxi-14.svg","taxi-24.svg","tennis-14.svg","tennis-24.svg","theatre-14.svg","theatre-24.svg","ticket-office-14.svg","ticket-office-24.svg","tire-fitting-14.svg","tire-fitting-24.svg","tram-stop-14.svg","tram-stop-24.svg","trash-14.svg","trash-24.svg","travel-agency-14.svg","travel-agency-24.svg","trolley-14.svg","trolley-24.svg","university-14.svg","university-24.svg","urban-leisure-house-of-culture-14.svg","urban-leisure-house-of-culture-24.svg","urban-service-nursing-room-14.svg","urban-service-nursing-room-24.svg","vet-clinic-14.svg","vet-clinic-24.svg","veterinary-14.svg","veterinary-24.svg","viewpoint-14.svg","viewpoint-24.svg","waterfall-14.svg","waterfall-24.svg","waterpark-14.svg","waterpark-24.svg","wc-14.svg","wc-24.svg","wedding-14.svg","wedding-24.svg","well-14.svg","well-24.svg","wine-14.svg","wine-24.svg","work-14.svg","work-24.svg","ya-electro-station-14.svg","ya-electro-station-24.svg","ya-gas-station-14.svg","ya-gas-station-24.svg","yoga-14.svg","yoga-24.svg","zoo-14.svg","zoo-24.svg"],service:["bookmark-14.svg","bookmark-list-14.svg","geolocation-14.svg","home-14.svg","home-24.svg","like-14.svg","like-24.svg","lock-24.svg","message-24.svg","my-location-14.svg","personal-14.svg","poll-24.svg","search-14.svg","search-24.svg","show-map-14.svg","web-24.svg","work-14.svg","work-24.svg"],"yango-favicon":["favicon.svg"]},eL={small:14,normal:24,large:38},eA={light:{red:{ru:Z(),uk:L(),en:z(),tr:U(),uz:O(),kk:B(),az:z(),ar:z(),"sr-Latn":z(),hy:z(),es:z()},"red-border":{ru:en(),uk:eo(),en:ea(),tr:eu(),uz:el(),kk:ep(),az:ea(),ar:ea(),"sr-Latn":ea(),hy:ea(),es:ea()},black:{ru:u(),uk:l(),en:p(),tr:f(),uz:h(),kk:y(),az:p(),ar:p(),"sr-Latn":p(),hy:p(),es:p()},portal:{ru:eP(),en:eR(),tr:eR(),uk:eP(),uz:eR(),kk:eP(),az:eR(),ar:eR(),"sr-Latn":eR(),hy:eR(),es:eR()}},dark:{red:{ru:W(),uk:G(),en:V(),tr:K(),uz:$(),kk:ee(),az:V(),ar:V(),"sr-Latn":V(),hy:V(),es:V()},"red-border":{ru:ef(),uk:eh(),en:ey(),tr:eb(),uz:eE(),kk:eC(),az:ey(),ar:ey(),"sr-Latn":ey(),hy:ey(),es:ey()},black:{ru:b(),uk:E(),en:C(),tr:R(),uz:P(),kk:I(),az:C(),ar:C(),"sr-Latn":C(),hy:C(),es:C()},portal:{ru:eZ(),en:eI(),tr:eI(),uk:eZ(),uz:eI(),kk:eZ(),az:eI(),ar:eI(),"sr-Latn":eI(),hy:eI(),es:eI()}}};function ez(e,t){var n,s=e.type,u=e.name,c=e.size,l=(n=u.toLowerCase().replace(/\s+/g,"-"),t.isYango&&a[n]?a[n]:"yandex.ru"===t.domain&&i[n]?i[n]:"yandex.kz"===t.domain&&a[n]?a[n]:"tr"===t.lang&&o[n]?o[n]:r[n]||n);if(!l)return null;var d=l+"-"+eL[c]+".svg";return eD[s]&&eD[s].includes(d)?t.staticHost+"static/v51/icons/"+s+"/"+d:null}function eN(e,t){var n=e.name,r=e.size,o=ez({type:"rubrics",name:n,size:r},t),i=ez({type:"rubrics",name:"fallback",size:r},t);return o||i}function eU(e){return"//yastatic.net/s3/front-maps-static/constructor-icons/"+e+".svg"}function eF(e){var t=e.type,n=e.lang;return eA[e.theme][t][n]}function eO(e){return["ru","uk","kk"].includes(e.lang)}},25663:(e,t,n)=>{"use strict";n.r(t);var r=n(34788),o=n(18007),i=n(18188),a=n(11912),s=n(87363),u=n(61533),c=n(39705),l=n(35846),d=n(49297),p=n(88237),m=n(73754),f=n(56590),v=n(47220),h=n(96976),g=n(93813),y=n(16647),_=n(13688),b=n(67677),w=n(52869),E=n(7418),S=n(18),C=n(92830),k=n(31336),R=n(93265),x=n(33418),P=n(72393),M=n(13109),I=n(66652),T=n(50607),Z=n(41126),D=n(4307),L=n(35137),A=n(39572),z=n(77840),N=n(18413),U=n(86187),F=n(57689),O=n(32002),q=n(23840),B=n(14479),H=n(36522),W=n(37830),j=n(35501),G=(0,l.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,14272))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 14272}},{ssr:!1}),Y=(0,l.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,46552))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 46552}},{ssr:!1}),V=[50,70,72,50],X={passive:!1},K=function(e){function t(t){(n=e.call(this,t)||this)._getInitialContent=function(){var e=n.props,t=null==(i=e.config.mapWidget)?void 0:i.activeMode,r=j.Y(null==(a=n.props.config.poiPreloadedResults)?void 0:a.items),o="whatshere"===t&&j.Y(null==(s=n.props.config.whatsherePreloadedResults)?void 0:s.items)?j.Y(null==(u=n.props.config.whatsherePreloadedResults)?void 0:u.items):void 0;if("routes"===t&&n.props.config.routerResponse)return{type:"route",data:{}};if("poi"===t&&r)return{type:"search",data:{result:r,coordinates:r.coordinates}};if("stop"===t&&e.config.masstransitStop)return{type:"masstransit-stop",data:{stop:e.config.masstransitStop,coordinates:e.config.masstransitStop.coordinates}};if(o)return{type:"search",data:{result:o,coordinates:o.coordinates}};if("search"===t&&(n.props.config.searchPreloadedResults||(null==(c=n.props.config.mapWidget)?void 0:c.activeObject))){var i,a,s,u,c,l,d,p,m,f=null==(d=n.props.config.mapWidget)?void 0:null==(l=d.activeObject)?void 0:l.items[0],v=(null==(p=n.props.config.searchPreloadedResults)?void 0:p.resultsCount)===1?n.props.config.searchPreloadedResults.items[0]:void 0,h=f||(null==(m=n.props.config.searchPreloadedResults)?void 0:m.exactResult)||v;if((null==h?void 0:h.type)==="business"||(null==h?void 0:h.type)==="toponym")return{type:"search",data:{result:h,coordinates:h.coordinates}};if(!h&&!(0,q.h)(e.mapSize))return{type:"search-list"}}return null},n._getInitialRoutesState=function(){var e,t=null!=(e=({auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle"})[n.props.config.query.rtt])?e:"auto";return{routerResponse:n.props.config.routerResponse?p.N(n.props.config.routerResponse):null,routePoints:n.props.config.routePoints||[],travelMode:t,activeRouteIndex:Number(n.props.config.query.rtn)||0,formActiveFieldIndex:-1,isPointDragging:!1,isFormFocused:!1,isFormOpened:!1}},n._isRichRoutesClient=function(){var e;return!!(null==(e=n.props.config.mapWidget)?void 0:e.constructorApiValidKey)},n._onRouterResponseLoad=function(e){n.setState((0,r._)({},n.state,{routes:(0,r._)({},n.state.routes,{routerResponse:e,activeRouteIndex:0})})),n._updateContentData({type:"route",data:{}})},n._onRouterResponseError=function(e){n.setState((0,r._)({},n.state,{routes:(0,r._)({},n.state.routes,{routerResponse:e})}))},n._getIsPoiEnabled=function(e,t){return e>=295&&t>=400},n._deepSetState=function(e,t){n.setState(function(t){return(0,E.Z)(t,e)},t)},n._onGeolocationControlClick=function(){n._makeGeolocationRequest()},n._makeGeolocationRequest=function(){var e=n.props.config;n.setState({geolocation:{isStarted:!0}}),n._getLocationAction=w.Z.create(S.Z.getCurrentPosition(e,1500),{success:n._onGeolocationSuccess,fail:n._onGeolocationFail})},n._onGeolocationSuccess=function(e){n._updateLocationRequest({center:[e.longitude,e.latitude],duration:1e3,zoom:e.accuracy<=200?16:void 0}),n._deepSetState({geolocation:{isStarted:!1,accuracy:e.accuracy,currentPosition:[e.longitude,e.latitude]}})},n._onGeolocationFail=function(){var e;(null==(e=n.props.config.mapWidget)?void 0:e.userCoordinates)&&(n._updateLocationRequest({center:n.props.config.mapWidget.userCoordinates,duration:1e3}),n._deepSetState({geolocation:{isStarted:!1,currentPosition:n.props.config.mapWidget.userCoordinates,accuracy:1e3}}))},n._updateLocation=function(e){n._deepSetState({map:{location:e}})},n._updateLocationRequest=function(e){n.setState(function(t){return{map:(0,r._)({},t.map,{locationRequest:e})}})},n._onRoutesBoundsChange=function(e){var t=d.$Y({bounds:e},V,n.state.map.size);n._updateLocationRequest(t)},n._onSearchBoundsChange=function(e){var t=d.$Y({bounds:e},V,n.state.map.size);n._updateLocationRequest(t)},n._updateRuler=function(e){n._deepSetState({ruler:e})},n._onTrafficLevelChange=function(e){n._deepSetState({traffic:{level:e}})},n._onTrafficControlClick=function(){var e=n._getContentData("traffic");n._deepSetState({traffic:{isActive:!n.state.traffic.isActive},content:e?void 0:n.state.content})},n._onRichRoutesControlClick=function(){var e=!n.state.routes.isFormOpened,t=2===n.state.routes.routePoints.length,o=t?n.state.routes.routePoints:[m.Y(),m.Y()];n._deepSetState({routes:(0,r._)({isFormOpened:e},e?{isFormFocused:!0,routePoints:o,routerResponse:t?n.state.routes.routerResponse:null}:{})},function(){n._deepSetState({routes:{formActiveFieldIndex:n._getEmptyRoutePointIndex()}})})},n._setMapSize=function(e){n._deepSetState({map:{size:e}})},n._updateContentData=function(e){n.setState({content:e})},n._processMapObjectClick=function(e,t){var r=n._getEmptyRoutePointIndex();-1!==r?n._updateRoutePointByMap(e,r):t()},n._onTrafficLayerClick=function(e,t){var r,o=n.props;if(e){var i=e.properties,a=i.HotspotMetaData,s=i.vectorMetadata,u=(null==s?void 0:s.get("objectId"))||(null==a?void 0:a.id);if(u){var c=null==(r=e.geometry)?void 0:r.coordinates;n._processMapObjectClick({value:"",coords:c&&2===c.length?c:t.coordinates},function(){c&&2===c.length&&(w.Z.cancel(n._asyncRoadEventAction),n._asyncRoadEventAction=w.Z.create(C.Z.getRoadEvent(u,o.config),{success:function(e){e&&e.position&&n._updateContentData({type:"traffic",data:{event:e,coordinates:e.position}})},fail:function(){return n._resetContentData()}}))})}}},n._onRouteClick=function(e,t){var r,o=((null==(r=n.state.routes.routerResponse)?void 0:r.routes)||[]).indexOf(e);n._updateContentData({type:"route",data:{coordinates:t}}),n._deepSetState({routes:{activeRouteIndex:-1!==o?o:0}})},n._onUserMapsFeatureClick=function(e,t){n._processMapObjectClick({coords:t,value:""},function(){var r,o=null==(r=n.props.config.userMap)?void 0:r.features[e];o&&n._updateContentData({type:"user-maps",data:{feature:o,coordinates:t}})})},n._onPlacemarkClick=function(e){var t={coords:e.coordinates,value:e.title,uri:e.uri};n._processMapObjectClick(t,function(){if(n.state.isPoiEnabled)n._updateContentData({type:"search",data:{result:e,coordinates:e.coordinates}});else{var t="business"===e.type?v.S({id:e.id,seoname:e.seoname}):h.h(e,e.region,{skipPointCheck:!0});if(t){var r=(0,_._)(g.e("/"+t,n.props.config));window.open(r,"_blank")}}})},n._onMasstransitPlacemarkClick=function(e){var t,r={coords:e.coordinates,value:e.name,uri:null==(t=e.searchResult)?void 0:t.uri};n._processMapObjectClick(r,function(){if(n.state.isPoiEnabled)n._updateContentData({type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}});else{var t=e.region?y.u(e,e.region):"";if(t){var r=(0,_._)(g.e("/"+t,n.props.config));window.open(r,"_blank")}}})},n._resetContentData=function(){n._deepSetState({content:null})},n._updateRoutePointDragging=function(e){u.flushSync(function(){var t;n._deepSetState({routes:{isPointDragging:e},content:(null==(t=n.state.content)?void 0:t.type)==="route"?null:n.state.content})})},n._updateRoutePointByMap=function(e,t){if(n.state.routes.isPointDragging){var r=(0,a._)(n.state.routes.routePoints);r[t]=e,n._deepSetState({routes:{routePoints:r}})}else n._getRoutePointAction=w.Z.create((0,x.Kc)(e,n.props.config,"router").catch(function(){return null}),{success:function(r){r?(e.value=(null==r?void 0:r.title)||"",e.input=(null==r?void 0:r.title)||"",e.searchResult=r):e.coords&&(e.value=(0,c.s)(e.coords),e.input=(0,c.s)(e.coords));var o=(0,a._)(n.state.routes.routePoints);o[t]=e,n._deepSetState({routes:{routePoints:o}})}})},n._getEmptyRoutePointIndex=function(e){return(void 0===e&&(e=n.state.routes.routePoints),n._isRichRoutesClient()&&!n.state.routes.isFormOpened)?-1:e.findIndex(function(e){return!e.coords})},n._getRoutePointsDraggableIndexes=function(){return n._isRichRoutesClient()?(n.state.routes.routePoints||[]).map(function(e,t){return t}):(n.props.config.routePoints||[]).reduce(function(e,t,n){return t.coords||e.push(n),e},[])},n._onRoutesFormTravelModeChange=function(e){n._deepSetState({routes:{travelMode:e}})},n._onRoutesFormFocus=function(e){n._deepSetState({routes:{isFormFocused:!0,formActiveFieldIndex:e}})},n._onRoutesFormBlur=function(){n._deepSetState({routes:{isFormFocused:!1,formActiveFieldIndex:-1}})},n._onRoutesFormReset=function(){n._deepSetState({routes:{routePoints:[m.Y(),m.Y()],routerResponse:null}})},n._onRoutesFormClose=function(){n._deepSetState({routes:{isFormOpened:!1}})},n._onRoutesFormRoutePointSubmit=function(e,t){var r=(0,a._)(n.state.routes.routePoints);r[t]=e;var o=n._getEmptyRoutePointIndex(r);n._deepSetState({routes:{routePoints:r,formActiveFieldIndex:o}})},n._onRoutesFormRoutePointInputChange=function(e,t){var r=(0,a._)(n.state.routes.routePoints);r[t]=e,n._deepSetState({routes:{routePoints:r}})},n._onRoutesFormRoutePointClear=function(e){var t=(0,a._)(n.state.routes.routePoints);t[e]=m.Y(),n._deepSetState({routes:{routePoints:t,routerResponse:null}})},n._onRoutesFormRoutePointMovePosition=function(e,t){var r=(0,a._)(n.state.routes.routePoints),o=(0,i._)(r.splice(e,1),1)[0];r.splice(t,0,o),n._deepSetState({routes:{routePoints:r}})},n._onPoiClick=function(e,t){var r=e.properties.uri,o=e.geometry&&e.geometry.coordinates||t.coordinates;n._processMapObjectClick({coords:o,value:e.properties.name||"",uri:r},function(){n.setState({poiData:{coordinates:o,feature:e}})})},n._getCursor=function(){var e=n._getEmptyRoutePointIndex();if(-1!==e&&!n.props.config.uatraits.isPhone&&!n.state.ruler.isEnabled)return f.B(e,n.state.routes.routePoints)+"_"+e},n._getContentData=function(e){var t;if((null==(t=n.state.content)?void 0:t.type)===e)return n.state.content},n._preventZoomByPinching=function(e){"scale"in e&&1!==e.scale&&e.touches.length>1&&e.preventDefault()},n._renderRichRoutesControl=function(){return n._isRichRoutesClient()?s.createElement(G,{isActive:n.state.routes.isFormOpened,onClick:n._onRichRoutesControlClick}):null},n._renderInMapsControl=function(e){return W.m(n.props.config)?null:s.createElement(B.Z,{state:n.state,size:e})},n._renderGeolocationPin=function(){return n.state.geolocation.currentPosition&&n.state.geolocation.accuracy?s.createElement(P.Z,{currentPosition:n.state.geolocation.currentPosition,accuracy:n.state.geolocation.accuracy}):null},n._renderTrafficLayer=function(){return n.state.traffic.isActive?s.createElement(D.Z,{mapLocation:n.state.map.location,mapSize:n.state.map.size,updateLocationRequest:n._updateLocationRequest,onClick:n._onTrafficLayerClick,onTrafficLevelChange:n._onTrafficLevelChange,resetContentData:n._resetContentData,content:n._getContentData("traffic")}):null},n._renderUserMaps=function(){return n.props.config.userMap?s.createElement(A.Z,{userMap:n.props.config.userMap,mapLocation:n.state.map.location,mapSize:n.state.map.size,updateLocationRequest:n._updateLocationRequest,onFeatureClick:n._onUserMapsFeatureClick,cursor:n._getCursor(),resetContentData:n._resetContentData,content:n._getContentData("user-maps")}):null},n._renderSearchResult=function(){return s.createElement(z.Z,{mapSize:n.state.map.size,mapLocation:n.state.map.location,isTrafficLayerEnabled:n.state.traffic.isActive,updateLocationRequest:n._updateLocationRequest,content:n.state.isPoiEnabled?n._getContentData("search"):void 0,onContentClose:n._resetContentData,onStaticPlacemarkClick:n._onPlacemarkClick})},n._renderSearchComponentWithControl=function(){var e;return s.createElement(O.Z,{mapLocation:n.state.map.location,mapSize:n.state.map.size,activeResult:null==(e=n._getContentData("search"))?void 0:e.data.result,onSearchBoundsChange:n._onSearchBoundsChange,isResultsListShown:!!n._getContentData("search-list"),onResultClick:n._onPlacemarkClick,onResultsListOpen:function(){return n._updateContentData({type:"search-list"})},onResultsListClose:function(){return n._updateContentData(null)}})},n._renderRichRoutesForm=function(){var e=n.state;return n._isRichRoutesClient()&&e.routes.isFormOpened?s.createElement(Y,{travelMode:e.routes.travelMode,routePoints:e.routes.routePoints,routerResponse:e.routes.routerResponse,activeFieldIndex:e.routes.formActiveFieldIndex,isFocused:e.routes.isFormFocused,mapLocation:e.map.location,mapSize:e.map.size,onTravelModeChange:n._onRoutesFormTravelModeChange,onReset:n._onRoutesFormReset,onClose:n._onRoutesFormClose,onFocus:n._onRoutesFormFocus,onBlur:n._onRoutesFormBlur,onRoutePointSubmit:n._onRoutesFormRoutePointSubmit,onRoutePointInputChange:n._onRoutesFormRoutePointInputChange,onRoutePointClear:n._onRoutesFormRoutePointClear,onRoutePointMovePosition:n._onRoutesFormRoutePointMovePosition}):null},n._renderRoutes=function(){var e=n.state;return s.createElement(s.Fragment,null,s.createElement(L.Z,{routerResponse:e.routes.routerResponse,activeRouteIndex:e.routes.activeRouteIndex,routePoints:e.routes.routePoints,mapLocation:e.map.location,mapSize:e.map.size,emptyPointIndex:n._getEmptyRoutePointIndex(),isTrafficLayerEnabled:e.traffic.isActive,isRoutePointDragging:e.routes.isPointDragging,cursor:n._getCursor(),setDragging:n._updateRoutePointDragging,draggablePointIndexes:n._getRoutePointsDraggableIndexes(),updateRoutePoint:n._updateRoutePointByMap,onRouteClick:n._onRouteClick,onBoundsChange:n._onRoutesBoundsChange,resetContentData:n._resetContentData,content:n._getContentData("route")}),s.createElement(F.Z,{routePoints:e.routes.routePoints,travelMode:e.routes.travelMode,onLoad:n._onRouterResponseLoad,onError:n._onRouterResponseError}),n._renderRichRoutesForm())},n._renderBanner=function(){if(!(null==(e=n.props.config.banner)?void 0:e.blockIds.widget))return null;var e,t=n.props.config.banner.blockIds.widget,r=n.props.config.banner.blockIds.largeWidget;return s.createElement(H.default,{id:t,largeBannerId:r,mapSize:n.state.map.size,usePortal:!0})};var n,o,l,k=d.$Y(n.props.config.mapLocation,V,{width:t.mapSize.width,height:t.mapSize.height}),M=n._getIsPoiEnabled(t.mapSize.width,t.mapSize.height);return n.state={placemarks:t.config.query.pt?b.Q(t.config.query.pt):void 0,map:{location:k,size:t.mapSize},geolocation:{isStarted:!1},ruler:(0,R.H)(t.config),traffic:{isActive:(null==(o=t.config.query.l)?void 0:o.includes("trf"))||(null==(l=t.config.userMap)?void 0:l.isTrafficShown),level:null},routes:n._getInitialRoutesState(),content:n._getInitialContent(),isPoiEnabled:M},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.body.classList.add("_app_ready"),document.addEventListener("touchmove",this._preventZoomByPinching,X)},n.componentDidUpdate=function(e,t){if(t.map.size!==this.state.map.size){var n=this._getIsPoiEnabled(this.state.map.size.width,this.state.map.size.height);this._deepSetState({isPoiEnabled:n})}},n.componentWillUnmount=function(){w.Z.cancel(this._getLocationAction),w.Z.cancel(this._getRoutePointAction)},n.render=function(){var e,t=this.state,n=!!(null==(e=this.props.config.flyover)?void 0:e.isEnabled),r=W.m(this.props.config);return s.createElement(I.Z,{location:t.map.location,locationRequest:t.map.locationRequest,margin:V,onLocationChange:this._updateLocation,onSizeChange:this._setMapSize,isPoiEnabled:!n&&!r&&this.state.isPoiEnabled,onPoiClick:n||r?void 0:this._onPoiClick},s.createElement(T.ZP,{mapSize:t.map.size,geolocation:{isStarted:t.geolocation.isStarted,onClick:this._onGeolocationControlClick},location:t.map.location,ruler:{isEnabled:t.ruler.isEnabled,updateRuler:this._updateRuler},traffic:{isActive:t.traffic.isActive,level:t.traffic.level,onClick:this._onTrafficControlClick},search:{render:this._renderSearchComponentWithControl},inMaps:{render:this._renderInMapsControl},routes:{render:this._renderRichRoutesControl}}),this._renderBanner(),this._renderUserMaps(),this._renderGeolocationPin(),this._renderTrafficLayer(),this._renderRoutes(),this._renderSearchResult(),s.createElement(Z.Z,{ruler:t.ruler,updateRuler:this._updateRuler}),s.createElement(M.Z,{points:t.placemarks}),s.createElement(N.Z,{content:t.isPoiEnabled?this._getContentData("masstransit-stop"):void 0,mapSize:t.map.size,mapLocation:t.map.location,updateLocationRequest:this._updateLocationRequest,onContentClose:this._resetContentData,onStaticPlacemarkClick:this._onMasstransitPlacemarkClick}),s.createElement(U.Z,{poiData:t.poiData,updateContent:this._updateContentData}))},t}(s.Component);t.default=(0,k.ZP)(K)},36522:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var r,o,i=n(18188),a=n(87363),s=n(44748),u=n(18007),c=n(65807),l="yaContextCb",d=!1,p={load:function(e){return d||(r=new Promise(function(t,n){Array.isArray(window[l])||(window[l]=[]),window[l].push(function(){return t(window.Ya.Context.AdvManager)}),(0,c.Z)(e).catch(n)})).then(function(){d=!0}),r}},m=n(52869),f=n(31336),v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onLoadEnd=function(e){n.props.onLoadEnd&&n.props.onLoadEnd(e)},n.state={advertManager:o,isLoadingFailed:!1},n}(0,u._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props.config.hosts.advertLoader;!o&&t&&(this._loadAction=m.Z.create(p.load(t),{success:function(t){o=t,e.setState({advertManager:o},function(){return e._onLoadEnd(o)})},fail:function(){e.setState({isLoadingFailed:!0},function(){return e._onLoadEnd()})}}))},n.componentWillUnmount=function(){m.Z.cancel(this._loadAction)},n.render=function(){return this.state.advertManager?this.props.children(this.state.advertManager):this.state.isLoadingFailed&&this.props.renderFallback?this.props.renderFallback():null},t}(a.Component),h=(0,f.ZP)(v),g=n(34788);n(72450);var y=n(55877),_=n.n(y),b=n(90585),w=n(28342),E=n(77558),S=n(49481),C=n(44953),k=function(e){var t=(0,i._)((0,S.Y)({threshold:.5,triggerOnce:!0}),3),n=t[0],r=t[2];return a.createElement(a.Fragment,null,e.children(n),void 0!==r?a.createElement(C.ZP,{name:"advert_visible",nodeState:{visible_part:r.intersectionRatio}}):null)},R=n(41740),x=n(85172),P=(0,s.Z)("banner-view");function M(e){return Math.floor(e.getTime()/1e3)}var I=(0,b.Z)(f.ZP,w.ZP,x.ZP)(function(e){function t(t){var n;return(n=e.call(this,t)||this)._isWindowActive=!1,n._refreshCount=0,n._lastShowSeconds=0,n._isVisibleEnough=!1,n._setWindowActive=function(){n._isWindowActive=!0},n._setWindowInactive=function(){n._isWindowActive=!1},n._getElementId=function(){return String(n._bannerContainerId)+n.props.id},n._init=function(){n._refreshCount=0,n._refresh(),n._refreshBannerIntervalId&&window.clearInterval(n._refreshBannerIntervalId),n._refreshBannerIntervalId=window.setInterval(n._clockTick,1e3)},n._refresh=function(){var e,t=n.props,r=null==(e=t.id)?void 0:e.trim();if(r){n._lastShowSeconds=M(t.getToday()),n._refreshCount++;var o=(0,g._)({},t.extParams,{"test-ids":t.testIds});t.advertManager.render({blockId:r,renderTo:n._getElementId(),cspNonce:t.cspNonce,extParams:o,format:t.format,position:t.position,darkTheme:"dark"===t.theme,allowRepeatAds:{screen:-1},onError:n._onError,onRender:n._onRender,onHide:t.onHide},t.altCallback)}},n._onError=function(e){var t=n.props,r=t.config;null==t.onDisplay||t.onDisplay.call(t),null==t.onError||t.onError.call(t),"VIDEO_ERROR"!==e.code&&(0,R.H)(Error("AdvertManager "+e.type+" ("+e.code+"): "+e.text),{config:r,block:"BannerView",additional:{id:t.id,format:t.format,position:t.position}})},n._onRender=function(e){n.state.isAdvertRendered||n.setState({isAdvertRendered:!0}),null==n.props.onRender||n.props.onRender.call(n.props,e),null==n.props.onDisplay||n.props.onDisplay.call(n.props)},n._clockTick=function(){!(n._refreshCount>20)&&n._isWindowActive&&n._isVisibleEnough&&M(n.props.getToday())-n._lastShowSeconds>=35&&n._refresh()},n._onIntersectionChange=function(e){n._isVisibleEnough=e},n._bannerContainerId=_().v4().replace(/-/g,""),n.state={isAdvertRendered:!1},n}(0,u._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isWindowActive=!0,window.document.addEventListener("keydown",this._setWindowActive),this._init()},n.componentDidUpdate=function(e){e.id!==this.props.id&&this._init()},n.componentWillUnmount=function(){window.document.removeEventListener("keydown",this._setWindowActive),window.clearInterval(this._refreshBannerIntervalId);var e,t=null==(e=this.props.id)?void 0:e.trim();this.props.advertManager.destroy({blockId:t,renderTo:this._getElementId()})},n.render=function(){var e=this,t=[P(),this.props.className].filter(Boolean).join(" ");return a.createElement("div",{"aria-hidden":!0,"aria-live":"polite"},a.createElement(S.Z,{as:"div",threshold:.3,onChange:this._onIntersectionChange},a.createElement(k,null,function(n){return a.createElement("div",{ref:e.state.isAdvertRendered?n:void 0,className:t,id:e._getElementId(),style:{maxHeight:e.props.maxHeight}})})),a.createElement(E.Z,{type:"focus",listener:this._setWindowActive}),a.createElement(E.Z,{type:"blur",listener:this._setWindowInactive}))},t}(a.Component)),T=n(50607),Z=(0,s.Z)("map-widget-banner-component"),D=function(e){var t=(0,f.ZR)(),n=(0,i._)(a.useState(!1),2),r=n[0],o=n[1],s=(0,i._)(a.useState(!1),2),u=s[0],c=s[1],l=(0,i._)(a.useState(!1),2),d=l[0],p=l[1],m=(0,i._)(a.useState(!1),2),v=m[0],g=m[1],y=e.mapSize,_=t.uatraits.isMobile;a.useEffect(function(){g(!(_?y.height>=250&&y.width>=250:y.height>=200&&y.width>=250)),p(y.height>600&&!t.uatraits.isMobile)},[y,g,_,t]);var b=d?e.largeBannerId:e.id,w="string"==typeof b?b:void 0;if(r||v||!w)return null;var E=e.usePortal?T.v7:a.Fragment;return a.createElement(E,null,a.createElement("div",{className:Z({displayed:u,large:d})},a.createElement("div",{className:Z("content")},a.createElement(h,{onLoadEnd:function(e){return o(!e)},renderFallback:function(){return null}},function(e){return a.createElement(I,{id:w,maxHeight:d?"90px":_?"50px":"56px",advertManager:e,cspNonce:t.cspNonce,onError:function(){return o(!0)},onDisplay:function(){return c(!0)}})}))))}},14479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(87363),o=n(83466),i=n(34788),a=n(18188),s=n(11912),u=n(39705),c=n(95930),l=n(80283),d=n(4670);function p(e){return e[0][0]=Math.round(e[0][0]),e[0][1]=Math.round(e[0][1]),e[1][0]=Math.round(e[1][0]),e[1][1]=Math.round(e[1][1]),e}var m=n(37048),f=n(37806),v=n(36897),h=n(38024),g=n(28361),y=n(73754),_=n(15462),b=n(35501),w=n(6241);function E(e){return e.isPoiEnabled&&!!(e.content&&["masstransit-stop","search"].includes(e.content.type))}function S(e){return{params:{ll:(0,u.s)(e.map.location.center),z:Math.round(100*e.map.location.zoom)/100}}}function C(e){var t;return e.isPoiEnabled&&(null==(t=e.content)?void 0:t.type)==="masstransit-stop"?{params:{masstransit:{stopId:e.content.data.stop.id},mode:"stop"}}:{}}function k(e,t){var n,r,o,i,a=b.Y(null==(r=t.mapWidget)?void 0:null==(n=r.activeObject)?void 0:n.items);if(e.isPoiEnabled&&(null==(o=e.content)?void 0:o.type)==="search"){var s=e.content.data.result,u={};return"business"!==s.type||e.routes.routerResponse||t.searchPreloadedResults?u.poi={uri:s.uri,point:s.coordinates}:u.orgpage={id:s.id},{params:u}}return!E(e)&&a&&(null==(i=t.mapWidget)?void 0:i.activeMode)==="search"?{params:{poi:{uri:a.uri,point:a.coordinates}}}:{}}function R(e,t){var n,r,o,i;return(null==(n=t.mapWidget)?void 0:n.activeMode)==="search"?{params:{filter:t.query.filter,text:null==(r=t.searchPreloadedResults)?void 0:r.requestQuery,"display-text":null==(i=t.searchPreloadedResults)?void 0:null==(o=i.chain)?void 0:o.name}}:{}}function x(e,t){var n=D(e,t);if(n)return{textContent:"Как добраться",params:(0,i._)({},g.D({routerResponse:null,travelMode:e.routes.travelMode,detailedIndex:-1,activeRouteIndex:0,viaIndexes:[],routePoints:[y.Y(),n]},t),{mode:"routes"})};if(e.routes.routePoints.length>0){var r,o,a,s,u,v,h,_,b,w=g.D({routerResponse:null,travelMode:e.routes.travelMode,detailedIndex:-1,activeRouteIndex:e.routes.activeRouteIndex,viaIndexes:(null==(v=e.routes.routerResponse)?void 0:v.viaIndexes)||[],routePoints:e.routes.routePoints},t),S=(0,i._)({},w,{rtm:t.query.rtm,mode:(null==(h=t.mapWidget)?void 0:h.activeMode)!=="routes"||E(e)?void 0:"routes"}),C=null==(_=e.routes.routerResponse)?void 0:_.routes[e.routes.activeRouteIndex];return{params:S,textContent:!E(e)&&(!t.searchPreloadedResults||(null==(b=t.mapWidget)?void 0:b.activeMode)==="routes")&&(null==C?void 0:C.bounds)&&(r=e.map.location.bounds,o=C.bounds,a=(0,c.Z)(f.m6),s=(0,l.C)((0,m.n)(r,f.m6),a),u=(0,l.C)((0,m.n)(o,f.m6),a),s.some(function(e){return u.some(function(t){return(0,d.Y)(p(e),p(t))})}))?"Открыть маршрут":void 0}}return{}}function P(e,t){return{params:{rl:e.ruler.points.slice(0,t.ruler.maxCount).map(function(e,t,n){var r=e.coordinates,o=n[t-1]&&n[t-1].coordinates,i=0===t?r:[r[0]-o[0],r[1]-o[1]];return(0,u.s)(i)}).join("~")||null}}}function M(e,t){return{layers:{trf:e.traffic.isActive,trfe:e.traffic.isActive&&_.W(t)}}}function I(e,t){var n=t.userMap;return n?{params:{um:n.id}}:{}}function T(e,t){var n,r,o,i,a,c,l,d,p,m=D(e,t),f=e.content&&"data"in e.content&&e.content.data.coordinates,h=E(e)||(null==(n=t.mapWidget)?void 0:n.activeMode)!=="search"?null==(r=b.Y(null==(i=t.mapWidget)?void 0:null==(o=i.activeObject)?void 0:o.items))?void 0:r.coordinates:void 0,g=null==(a=b.Y(null==(c=t.poiPreloadedResults)?void 0:c.items))?void 0:a.coordinates,y=null==(l=b.Y(null==(d=t.whatsherePreloadedResults)?void 0:d.items))?void 0:l.coordinates,_=null==(p=t.masstransitStop)?void 0:p.coordinates,w=(0,s._)((e.placemarks||[]).map(function(e){return e.coordinates})).concat([h,g,y,_]).filter(function(e){return!!(e&&(!(null==m?void 0:m.coords)||!(0,v.J)(null==m?void 0:m.coords,e))&&(!f||!(0,v.J)(f,e)))});return{params:{pt:w.length>0?w.map(function(e){return(0,u.s)(e)}).join("~"):void 0}}}function Z(){return{params:{source:"mapframe",utm_source:"mapframe",from:"mapframe"}}}function D(e,t){if(!((null==(n=t.mapWidget)?void 0:n.activeMode)==="search"||E(e))){var n,r,o,i=[],a=b.Y(null==(r=t.poiPreloadedResults)?void 0:r.items);t.poiPreloadedResults&&t.poiPreloadedResults.resultsCount>0&&a&&i.push({coords:a.coordinates,value:a.title});var s=b.Y(null==(o=t.whatsherePreloadedResults)?void 0:o.items);return t.whatsherePreloadedResults&&t.whatsherePreloadedResults.resultsCount>0&&s&&i.push({coords:s.coordinates,value:s.title}),t.masstransitStop&&i.push({coords:t.masstransitStop.coordinates,value:t.masstransitStop.name}),i.find(function(t){return(0,h.V)(e.map.location.bounds,t.coords)})}}var L=n(31336),A=n(94507),z=n(57793),N=function(e){var t,n,u,c,l,d,p,m=(0,L.ZR)(),f=(t=e.state,c=void 0===(u=(n=[S,C,k,R,x,P,M,I,T,Z].reduce(function(e,n){var r=n(t,m);return{textContent:e.textContent||r.textContent,params:(0,i._)({},e.params||{},r.params||{}),layers:(0,i._)({},e.layers||{},r.layers||{})}},{})).params)?{}:u,l=n.layers,d=n.textContent,c.l=Object.entries(void 0===l?{}:l).reduce(function(e,t){var n=(0,a._)(t,2),r=n[0],o=n[1];return(0,s._)(e.filter(function(e){return e!==r})).concat((0,s._)(o?[r]:[]))},[]).join(",")||null,p=Object.entries(c).reduce(function(e,t){var n=(0,a._)(t,2),r=n[0],o=n[1];return null!==o&&(e[r]=o),e},{}),{url:w.render(m.hosts.maps,p),textContent:d}),v=f.url,h=f.textContent,g=(0,z.d)(e.state.map.size,m),y=r.createElement("div",{style:{marginLeft:""+g.toFixed(0)+"px"}},r.createElement(o.Z,{url:v},function(){switch(e.size){case"tiny":break;case"small":return"Открыть в Картах";case"medium":return h||"Открыть в Яндекс Картах"}return null}()));return"tiny"===e.size?r.createElement(A.Z,{text:"Открыть в Яндекс Картах",position:"right",isAir:!0},y):y}},66652:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ed});var r,o,i=n(34788),a=n(18007),s=n(11912),u=n(87363),c=n(50576),l=n(44748),d=n(31336),p=n(83840);function m(e,t,n){return(m=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,p.b)(o,n.prototype),o}:Reflect.construct).apply(null,arguments)}var f=n(2267),v=n(18188),h=n(90585),g=n(30473),y=n(99870),_=n(78597),b=n(52869),w=n(36897),E=n(49297),S=n(12574),C=n(1477),k=n(77558),R=n(99111),x=n(78510),P=n(41372),M={failIfMajorPerformanceCaveat:!0,antialias:!1,depth:!0,stencil:!0,alpha:!1},I=[{renderer:/SwiftShader/},{renderer:/Parallels/}];function T(e){try{var t=document.createElement("canvas");t.width=1,t.height=1;var n=(0,P.pi)({},M);(null==e?void 0:e.allowSoftware)&&(n.failIfMajorPerformanceCaveat=!1);var r=t.getContext("webgl",n);if(r)return r}catch(o){}Z()}function Z(){r={supported:!1,reasonsFailed:["HasWebGl"],info:{}}}var D=n(84238),L=n(38614),A=n(44953),z=n(41740),N=n(1251),U="undefined"==typeof window,F=[],O=0;function q(){U=!0,F.forEach(function(e){return e()}),o&&o.disconnect()}U||(0,N.Z)(function(){if(!window.PerformanceObserver||!window.PerformanceLongTaskTiming||!window.performance||!window.performance.now){setTimeout(q,5e3);return}(o=new window.PerformanceObserver(function(e){var t=e.getEntries().pop();t&&(O=t.startTime+t.duration)})).observe({entryTypes:["longtask"]}),function e(){var t=window.performance.now();if(t>2e4){q();return}(O?3e3-(t-O):3e3)<=0?q():setTimeout(e,1e3)}()});var B=function(e){U?e():F.push(e)},H=n(18898),W=n(85172),j=function(){function e(){}var t=e.prototype;return t.submit=function(e,t){if("0"!==t.visible)for(var n=this._getViewportSuffix(t),r=0,o=Object.keys(t);r<o.length;r++){var i=o[r],a=parseFloat(t[i]);"firstViewport"!==i&&"visible"!==i&&Number.isFinite(a)&&(0,z.s4)(""+e+n+"."+i,a)}},t._getViewportSuffix=function(e){if(!("firstViewport"in e))return"";switch(e.firstViewport){case"0":return".viewport_regular";case"1":return".viewport_first"}return""},e}(),G=function(){return Promise.all([n.e("ymaps").then(n.bind(n,73154)),n.e("ymaps").then(n.bind(n,19377)),n.e("ymaps").then(n.t.bind(n,58040,23))]).then(function(e){var t=(0,v._)(e,3),n=t[0],r=t[1].EventBlockerLayer,o=t[2];return new Promise(function(e){return setTimeout(function(){return e([(0,i._)({},n,{EventBlockerLayer:r}),o.default])},0)})})},Y=(0,h.Z)(d.ZP,W.ZP)(function(e){function t(t){(o=e.call(this,t)||this)._isMapCreated=!1,o._ref=u.createRef(),o._onYmaps3Load=function(e){var t=(0,v._)(e,2),n=t[0],r=t[1];o._ymaps3=n,n.errorLoggerFactory(function(e){var t=new r;return t.initErrors(e),t.logError}),o._createMap()},o._handleMapLocationRequest=function(e){var t=o._map;if(o._location&&e&&t){var n=o._location,r="bounds"in e?(0,E.$Y)({bounds:e.bounds},o._margin,o._getSize(),o.props.config.uatraits.isMobile||"snap"===t.effectiveZoomRounding):void 0,i=n.center,a=n.zoom;r?i=r.center:"center"in e&&(i=e.center),r?a=r.zoom:"zoom"in e&&e.zoom&&(a=e.zoom),a===n.zoom&&(0,w.J)(i,n.center)||t.animateCenterAndZoom(i,a,e.duration||0)}},o._createMap=function(){var e=o.props,t=o.state,i=o._isElementProvided?e.element:o._ref.current;if(i&&!o._isMapCreated&&o._ymaps3){o._isMapCreated=!0,e.config.query["disable-vector-force"]?(L.Z.set("disable_vector_force",!0),o.setState({isVectorDisabledForce:!0})):L.Z.get("disable_vector_force")&&o.setState({isVectorDisabledForce:!0});var a,u,c,l,d,p,f,h,_=e.locationRequest,b=_&&"center"in _&&_.center||e.initialLocation.center,w=_&&"zoom"in _&&_.zoom||e.initialLocation.zoom;o._location={center:b,zoom:w},o._margin=e.marginRequest,o._camera=e.initialCamera||{azimuth:0,tilt:0};var E=(0,y.mt)({config:e.config,theme:e.theme,modeFutureSelected:e.modeFutureSelected}),S=o._getMapMode(),C=o._ymaps3.YaMap,k=Object.values(y.UZ),R=(0,y.c8)(k,o._ymaps3.EventBlockerLayer,e.config),x=R.topRasterLayers,P=R.mainLayers;i.dir="ltr";var M=new C({mode:S,element:i,center:b,zoom:w,margin:o._margin,zoomRange:e.zoomRange||{min:2,max:21},dataSources:E,topRasterLayers:x,mainLayers:P,behaviors:e.behaviors,zoomRounding:e.zoomRounding,eventObjectsFilter:e.eventObjectsFilter,nonRotatableRasterSources:y.Iw});e.initialCamera&&(e.initialCamera.azimuth||e.initialCamera.tilt)&&M.on("vectorStart",function(){var t,n;(null==(t=e.initialCamera)?void 0:t.azimuth)&&(0,H.Cm)(M,e.initialCamera.azimuth),(null==(n=e.initialCamera)?void 0:n.tilt)&&(0,H.lp)(M,e.initialCamera.tilt)}),window.yandex_map=M,M.events.clickTimeout=300,M.events.waitHotspotsTimeout=1e3,(0,g.r1)().has.touch?o._ymaps3.loadHotspotsForViewport(M):o._ymaps3.loadHotspotsByPointerPosition(M),e.vector&&e.config.isVectorEnabled&&!t.isVectorDisabledForce&&((r?!r.supported:(!window.WebGLRenderingContext||(l=navigator.userAgent,!(/YandexSearch\//.test(l)||/YaApp/.test(l)||/YaBrowser\/[0-9][0-9.]* YaApp_iOS\/[0-9][0-9.]*/.test(l))&&!/MiuiBrowser\//.test(l)&&/Mac OS X [0-9_]+;.*HTC[_/ ]/.test(l)||/Mac OS X 10_[0-8][^0-9]/.test(navigator.userAgent)||/SamsungBrowser\//.test(l)||(p=null===(d=navigator.userAgent)||void 0===d?void 0:d.match(/WebKit\/?(\d+)/i))&&537>Number(p[1])||(h=null===(f=navigator.userAgent)||void 0===f?void 0:f.match(/Chrome\/(\d+)/i))&&57>Number(h[1])))&&(Z(),1))?o.setState({isVectorSupported:!1}):Promise.all([(a=e.config.baseUrl,u=e.config.experiments.ui,c=new j,Promise.all([n.e("ymaps-vector").then(n.bind(n,96507)),n.e("ymaps-vector").then(n.t.bind(n,26259,23)),a+new URL(n(32448),n.b).pathname]).then(function(e){var t=(0,v._)(e,3),n=t[0],r=t[1],o=t[2];return function(e){return function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return m(n.VectorMapEngine,[r.default,o,e,c].concat((0,s._)(i)))}}})),new Promise(function(e,t){setTimeout(function(){var n=T();n&&function(e){if(void 0===r){var t=e||T();t?r=function(e){for(var t=!0,n=[],r=0,o=["requestAnimationFrame","Worker","URL","Blob","XMLHttpRequest","Set","Map"];r<o.length;r++){var i=o[r];window[i]||(t=!1,n.push("WindowPropertyNotExist-".concat(i)))}"function"!=typeof Math.trunc&&(t=!1,n.push("MathTrunc")),0===e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(t=!1,n.push("MAX_VERTEX_TEXTURE_IMAGE_UNITS")),e.getExtension("OES_vertex_array_object")||(t=!1,n.push("OES_vertex_array_object")),e.getExtension("OES_standard_derivatives")||(t=!1,n.push("OES_standard_derivatives"));var a=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);a&&0!==a.precision||(t=!1,n.push("Highp")),!function(e){if(!e)return!1;var t=e.createShader(e.VERTEX_SHADER);if(!t)return!1;e.shaderSource(t,"#version 100\nattribute vec2 p;\nvoid main() {\n    gl_Position = vec4(p,0,1);\n    gl_PointSize = 1.0;\n}"),e.compileShader(t);var n=e.createShader(e.FRAGMENT_SHADER);if(!n)return!1;e.shaderSource(n,"#version 100\nvoid main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"),e.compileShader(n);var r=e.createProgram();if(!r)return!1;e.attachShader(r,t),e.attachShader(r,n),e.bindAttribLocation(r,0,"p"),e.linkProgram(r);var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.clearColor(0,1,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(r),e.drawArrays(e.POINTS,0,1);var i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteBuffer(o),e.deleteShader(t),e.deleteShader(n),e.deleteProgram(r),255===i[0]}(e)&&(t=!1,n.push("TestPoints"));for(var s=e.getExtension("WEBGL_debug_renderer_info"),u=s&&e.getParameter(s.UNMASKED_VENDOR_WEBGL),c=s&&e.getParameter(s.UNMASKED_RENDERER_WEBGL),l="string"==typeof u?u:"",d="string"==typeof c?c:"",p=navigator.userAgent,m=0;m<I.length;m++)if(function(e,t){return Object.keys(e).every(function(n){var r=e[n],o=t[n];return!r||r.test(o)})}(I[m],{vendor:l,renderer:d,ua:p})){t=!1,n.push("BlacklistedGpu");break}return{supported:t,reasonsFailed:n,info:{vendor:l,renderer:d}}}(t):Z()}return r}(n).supported||t(Error("Vector is not supported")),e(n)})})]).then(function(e){var t=(0,v._)(e,2),n=t[0],r=t[1];M.destroyed||M.provideVectorMapEngineFactory(n(r))}).catch(function(){o.setState({isVectorSupported:!1})})),o._map=M,o._onMapUpdate(),o._onZoomRoundingChange(),o._onMapSizeChange(),o._addFilter(),null==o.props.onMarginChange||o.props.onMarginChange.call(o.props,o._margin||[0,0,0,0]),e.onReady&&e.onReady(M),o._handleMapLocationRequest(_),o.forceUpdate()}},o._addFilter=function(){var e=o.props.getFilter;e&&(o._filter=e(o._ymaps3),o._map.addObjectFilter(o._filter))},o._onMapUpdate=function(){var e=o._map;if(!e.isInAction){var t=[e.center[0],e.center[1]],n=o._location.zoom!==e.zoom||!(0,w.J)(o._location.center,t);(0,c.Z)(o._margin,e.margin)||(o._margin=e.margin,null==o.props.onMarginChange||o.props.onMarginChange.call(o.props,e.margin)),n&&(o._location={zoom:Math.round(100*e.zoom)/100,center:t},o._onLocationChange()),(o._camera.azimuth!==e.azimuth||o._camera.tilt!==e.tilt)&&(o._camera={azimuth:e.azimuth,tilt:e.tilt},o.props.onCameraChange&&o.props.onCameraChange(o._camera))}},o._onLocationChange=function(){var e=o.props.onLocationChange;if(e){var t=(0,E.$Y)(o._location,o._margin,o._getSize()),n=t.bounds,r=t.span;e((0,i._)({},o._location,{bounds:n,span:r}))}},o._onMapSizeChange=function(){o.props.onSizeChange&&o.props.onSizeChange(o._getSize(),o._map.offset),o._onLocationChange()},o._getSize=function(){var e=o._map.size;return{width:e.x,height:e.y}},o._onResize=function(){var e=o._map;e&&e.resize()},o._onDragStart=function(){o.setState({isDragged:!0})},o._onDragEnd=function(){o.setState({isDragged:!1})},o._onZoomRoundingChange=function(){o.props.onZoomRoundingChange&&o._map&&o.props.onZoomRoundingChange(o._map.effectiveZoomRounding)},o._onThemeChange=function(){var e=o.props,t=o._map;Object.entries((0,y.mt)({config:e.config,theme:e.theme,modeFutureSelected:e.modeFutureSelected})).filter(function(e){return"tile"===(0,v._)(e,2)[1].type}).forEach(function(e){var n=(0,v._)(e,2),r=n[0],o=n[1];null==t||t.updateTileDataSource(r,o)})},o._onMapModeFutureToggle=function(){var e=o.props,t=o._map,n=(0,y.mt)({config:e.config,theme:e.theme,modeFutureSelected:e.modeFutureSelected});null==t||t.updateTileDataSource("map",n.map)},o._renderLayers=function(){var e=o.props;return"satellite"===e.type?u.createElement(x.ZP,{layer:"sat"}):"hybrid"===e.type?u.createElement(u.Fragment,null,u.createElement(x.ZP,{layer:"sat"}),u.createElement(x.ZP,{layer:"skl",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}})):u.createElement(u.Fragment,null,u.createElement(x.ZP,{layer:"map",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}}),!e.disablePersonalizedPoi&&!e.config.bunker.disablePersonalizedPoi&&e.config.authorization&&e.config.hosts.tilesApi?u.createElement(x.ZP,{layer:"personalizedPoi",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}}):null)},o.state={isDragged:!1,isVectorSupported:!0,isVectorDisabledForce:!1};var o,a=o.props.updateTimeout||300;return o._onMapUpdateDebounced=(0,R.Z)(o._onMapUpdate,a),"undefined"!=typeof window&&(t.delayLoad?(o._loadDelayStart=Date.now(),(0,z.J3)("mapLoadDelay",o._loadDelayStart),B(function(){o._loadAction||((0,z.J3)("mapLoadDelayCompleted",Date.now()-o._loadDelayStart),o._loadAction=b.Z.create(G(),{success:o._onYmaps3Load}))})):o._loadAction=b.Z.create(G(),{success:o._onYmaps3Load})),o}(0,a._)(t,e);var o=t.prototype;return o.componentDidMount=function(){this._createMap(),this._previousWindowMap=window.yandex_map},o.componentDidUpdate=function(e){!e.delayLoad||this.props.delayLoad||this._loadAction||((0,z.J3)("mapLoadDelayAborted",Date.now()-this._loadDelayStart),this._loadAction=b.Z.create(G(),{success:this._onYmaps3Load}));var t=this._map;if(!t)return this._createMap();var n=this.props;n.behaviors&&!(0,c.Z)(n.behaviors,e.behaviors)&&t.behaviors.setEnabled(n.behaviors);var r=n.locationRequest;r!==e.locationRequest&&this._handleMapLocationRequest(r),(0,c.Z)(n.marginRequest,e.marginRequest)||t.setMargin(n.marginRequest);var o=this._getMapMode();t.setMode(o),n.getFilter!==e.getFilter&&(this._filter&&(t.removeObjectFilter(this._filter),this._filter=void 0),this._addFilter()),e.theme!==n.theme&&this._onThemeChange(),e.modeFutureSelected!==n.modeFutureSelected&&this._onMapModeFutureToggle()},o.componentWillUnmount=function(){b.Z.cancel(this._loadAction),this._onMapUpdateDebounced.cancel(),this._map&&this._map.destroy(),window.yandex_map=this._previousWindowMap||window.yandex_map},o._getMapMode=function(){var e=this.state.isVectorSupported&&this.props.vector&&this.props.config.isVectorEnabled&&!this.state.isVectorDisabledForce,t=this.props.config.uatraits.isMobile;return e?t?"vector":"auto":"raster"},o.render=function(){var e=this.props,t=this.state;return u.createElement(u.Fragment,null,this._isElementProvided?null:u.createElement("div",{className:e.className,ref:this._ref}),u.createElement(_.Ib,{value:{map:this._map,ymaps3:this._ymaps3}},this._renderLayers(),u.createElement(S.Z,{onUpdate:this._onMapUpdateDebounced,onDragStart:this._onDragStart,onInertiaStart:this._onDragEnd,onDragEnd:this._onDragEnd,onResize:this._onMapSizeChange,onZoomRoundingChanged:this._onZoomRoundingChange}),e.children,this.state.isDragged?u.createElement(D.Z,{cursor:"grabbing"}):null),u.createElement(C.Z,{onResize:this._onResize}),u.createElement(k.Z,{type:"resize",listener:this._onResize}),t.isVectorDisabledForce?u.createElement(A.ZP,{name:"disable_vector_force"}):null)},(0,f._)(t,[{key:"_isElementProvided",get:function(){return"element"in this.props}}]),t}(u.Component)),V=n(24063),X=(0,h.Z)(d.ZP,(0,_.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._update=function(){var e=n.props,t=e.map.getLayers(),r=t.topRasterLayers,o=t.mainLayers,i=(0,s._)(r).concat((0,s._)(o)).map(function(e){return e.split(":")[0]}),a=y.Hi.filter(function(e){return i.includes(e)});b.Z.cancel(n._loadAction);var u=(0,c.Z)(a,["map"])?Promise.resolve({map:{copyrights:["© Яндекс"]}}):V.Z.getLayers({layers:a,center:e.map.center,zoom:e.map.zoom},e.config);n._loadAction=b.Z.create(u,{success:n._onDataLoad})},n._onDataLoad=function(e){var t=n.props.map;Object.entries(e).forEach(function(e){var n=(0,v._)(e,2),r=n[0],o=n[1];if(o){var a=t.getDataSource(r),s=(0,i._)({},a);if("zoomRange"in o&&o.zoomRange){var u=(0,v._)(o.zoomRange,2),l=u[0],d=u[1];s.zoomRange={min:l,max:d}}s.copyrights="copyrights"in o?o.copyrights:void 0,(0,c.Z)(a,s)||t.updateTileDataSource(r,s)}})},n._updateDebounced=(0,R.Z)(n._update,500),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateDebounced()},n.componentWillUnmount=function(){this._updateDebounced.cancel(),b.Z.cancel(this._loadAction)},n.render=function(){return u.createElement(S.Z,{onUpdate:this._updateDebounced})},t}(u.Component)),K=n(2467),J=["map","indoor","personalizedPoi","directPoi"],$=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._loadFile=function(){var e=t.props,n=e.config.staticHost+"static/v51/map-customizations/"+e.name+".json";b.Z.cancel(t._loaderAction),t._loaderAction=b.Z.create((0,K.Z)({url:n,parser:"json"}),{success:t._setMapCustomization})},t._setMapCustomization=function(e){void 0===e&&(e={});var n,r=t.props;(null!=(n=r.dataSourceIds)?n:J).forEach(function(t){var n=r.map.getDataSource(t);n&&"tile"===n.type&&r.map.updateTileDataSource(t,(0,y._I)(n,e))})},t}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadFile()},n.componentDidUpdate=function(e){this.props.name!==e.name&&this._loadFile()},n.componentWillUnmount=function(){this._setMapCustomization(),b.Z.cancel(this._loaderAction)},n.render=function(){return null},t}(u.PureComponent),Q=(0,d.ZP)((0,_.ZP)({shouldWait:!0})($)),ee=n(67105),et=n(9322),en=n(91086),er=function(e){function t(t){var r;return(r=e.call(this,t)||this)._shouldHover=function(e){var t,n;return(r.props.shouldHover?r.props.shouldHover(e):!!r.props.onClick)&&(!!(null==(t=e.properties.vectorMetadata)?void 0:t.has("uri"))||Number(null==(n=e.properties.vectorMetadata)?void 0:n.get("itemId"))>0)},r._dataSource={type:"tile3d",priority:"high",theme:(0,y.gh)(t.theme),workerUrl:r.props.config.baseUrl+new URL(n(1367),n.b).pathname},r}(0,a._)(t,e);var r=t.prototype;return r.componentDidMount=function(){this._addLayer()},r.componentDidUpdate=function(e){this.props.theme!==e.theme&&(this._dataSource=(0,i._)({},this._dataSource,{theme:(0,y.gh)(this.props.theme)}),this.props.map.updateTile3dDataSource(en.Y0,this._dataSource))},r.componentWillUnmount=function(){this._removeLayer()},r._getMapLayers=function(){var e=this.props.map.getLayers(),t=e.mainLayers,n=e.topRasterLayers;return(0,s._)(t).concat((0,s._)(n))},r._setMapLayers=function(e){this.props.map.setLayers((0,y.c8)(e,this.props.ymaps3.EventBlockerLayer,this.props.config))},r._addLayer=function(){this.props.map.addDataSource(en.Y0,this._dataSource);var e=this._getMapLayers();e.push.apply(e,(0,s._)((0,y.se)(en.Y0))),this._setMapLayers(e)},r._removeLayer=function(){var e=(0,y.se)(en.Y0),t=this._getMapLayers().filter(function(t){return!e.includes(t)});this._setMapLayers(t),this.props.map.getDataSource(en.Y0)&&this.props.map.removeDataSource(en.Y0)},r.render=function(){return u.createElement(et.Z,(0,i._)({layer:en.Y0},this.props,{shouldHover:this._shouldHover}))},t}(u.Component),eo=(0,h.Z)(d.ZP,(0,_.ZP)({shouldWait:!0}),W.ZP)(er),ei="_vector_ready",ea=["drag","dblClick","magnifier","oneFingerZoom","pinchZoom"],es=["scrollZoom"],eu=["mouseRotate","pinchRotate","mouseTilt","panTilt"],ec=(0,l.Z)("map-widget-map-component"),el=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onReady=function(e){window.document.body.classList.add("_map_ready"),n._map=e,n.setState({isReady:!0})},n._getBehaviors=function(){var e;return(0,s._)(ea).concat((0,s._)((null==(e=n.props.config.flyover)?void 0:e.isEnabled)?eu:[]),(0,s._)(n.props.config.isScrollDisabled?[]:es))},n._onMainEngineChanged=function(){var e;(null==(e=n._map)?void 0:e.getEffectiveMode())!=="vector"||window.document.body.classList.contains(ei)||window.document.body.classList.add(ei)},n._setTile3dLayerInitialized=function(){n.state.flyover.isLayerInitialized||n.setState(function(e){return{flyover:(0,i._)({},e.flyover,{isLayerInitialized:!0})}})},n._setFlyoverObject=function(e){var t;(null==(t=n.state.flyover.flyoverObject)?void 0:t.tile.id)!==(null==e?void 0:e.tile.id)&&n.setState(function(t){var n;return{flyover:(0,i._)({},t.flyover,{flyoverObject:e,activeTile3dId:null!=(n=null==e?void 0:e.tile.id)?n:null})}})},n._setFlyoverHoverState=function(e){(0,c.Z)(n.state.flyover.hoverState,e)||n.setState(function(t){return{flyover:(0,i._)({},t.flyover,{hoverState:e})}})},n.state={isReady:!1,flyover:{isLayerInitialized:!1,activeTile3dId:null,flyoverObject:null,hoverState:null,setLayerInitialized:n._setTile3dLayerInitialized,setFlyoverObject:n._setFlyoverObject,setHoverState:n._setFlyoverHoverState}},n}return(0,a._)(t,e),t.prototype.render=function(){var e,t=this.props,n=(null==(e=t.config.flyover)?void 0:e.isEnabled)&&this.state.flyover.isLayerInitialized;return u.createElement(Y,{className:ec(),type:t.config.mapType,initialLocation:t.location,vector:t.config.isVectorEnabled,isPoiEnabled:t.isPoiEnabled,onReady:this._onReady,locationRequest:t.locationRequest,marginRequest:t.margin,onPoiClick:t.onPoiClick,onLocationChange:t.onLocationChange,onSizeChange:t.onSizeChange,behaviors:this._getBehaviors()},u.createElement(X,null),n?u.createElement(u.Fragment,null,u.createElement(eo,null),u.createElement(Q,{name:"realty",dataSourceIds:["map"]})):null,this.state.isReady?u.createElement(ee.v6,{value:this.state.flyover},t.children):null,u.createElement(S.Z,{onMainEngineChanged:this._onMainEngineChanged}))},t}(u.Component),ed=(0,d.ZP)(el)},18413:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var r=n(18007),o=n(87363),i=n(31336),a=n(91027),s=n(44748),u=n(39705),c=n(16647),l=n(93813),d=n(13688),p=n(81194),m=n(57636),f=n(32584),v=n(85172),h=(0,s.Z)("masstransit-underground-line-name-view"),g=function(e){var t,n,r=e.transport,i=(0,v.Fg)(),a=r.transportSystemId?null==(t=f.x[r.transportSystemId])?void 0:t.small:null;return o.createElement("div",{className:h()},a?o.createElement("div",{className:h("icon")},o.createElement(m.Z,{inline:!0,name:a,theme:i})):null,o.createElement("div",{className:h("line-number"),style:{backgroundColor:r.Style&&r.Style.color||"transparent"}},null!=(n=r.shortName)?n:null),o.createElement("div",{className:h("line-name")},r.name))},y=n(5130),_=n(59093),b=n(6241),w=(0,s.Z)("map-widget-masstransit-stop-content-view"),E=function(e){var t,n,r,a=(0,i.ZR)(),s=e.content.data.stop,m=s.region?c.u(s,s.region):"",f=(0,d._)(l.e("/"+m,a)),v={coords:s.coordinates,value:"",uri:null==(t=s.searchResult)?void 0:t.uri},h=(0,d.V)([{coords:null,value:""},v],{},a);return o.createElement("div",{className:w()},o.createElement(y.Z,{title:("underground"===s.type?"Станция метро":"railway"===s.type?"Ж/д станция":"Остановка")+" "+s.name,titleUrl:f,subtitle:"underground"!==s.type?null==(n=s.searchResult)?void 0:n.description:void 0}),"underground"===s.type&&s.transports[0]?o.createElement("div",{className:w("underground-title")},o.createElement(g,{transport:s.transports[0]})):null,o.createElement("div",{className:w("buttons-container")},o.createElement("div",{className:w("button-container")},o.createElement(p.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:h,target:"_blank"},"Как добраться")),o.createElement("div",{className:w("button-container")},o.createElement(p.Z,{view:"primary",size:"small",isStretched:!0,url:function(){if("railway"===s.type){var e,t=null==(e=s.links)?void 0:e.find(function(e){return"timetable"===e.type});return null==t?void 0:t.href}if("underground"===s.type)return b.format(a.hosts.metro,{ll:(0,u.s)(s.coordinates)});if("urban"===s.type&&s.region){var n=c.u(s,s.region)||"";return(0,d._)(l.e("/"+n,a))}}(),target:"_blank"},"underground"===s.type?"Схема метро":"railway"===s.type?"Показать расписание":"Список маршрутов"))),(null==(r=s.searchResult)?void 0:r.metro)&&"underground"!==s.type?o.createElement("div",{className:w("nearest-stops")},o.createElement(_.Z,{result:s.searchResult})):null)},S=n(23363),C=n(73911),k=n(33228),R=n(36581),x=n(61111),P=n(97313),M=n(37358),I={bus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},minibus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},tramway:{small:"rubrics-tram-stop-14",normal:"rubrics-tram-stop-24"},trolleybus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},water:{small:"rubrics-pier-14",normal:"rubrics-pier-24"},underground:{small:"rubrics-subway-fallback-14",normal:"rubrics-subway-fallback-24"},suburban:{small:"rubrics-railway-station-14",normal:"rubrics-railway-station-24"},suburban_express:{small:"rubrics-railway-station-14",normal:"rubrics-railway-station-24"},funicular:{small:"rubrics-funicular-14",normal:"rubrics-funicular-24"},cable:{small:"rubrics-cableway-14",normal:"rubrics-cableway-24"},aeroexpress:{small:"aeroexpress-14",normal:"aeroexpress-24"},fallback:{small:"rubrics-fallback-14",normal:"rubrics-fallback-24"}},T=function(e){var t,n,r,i,a=(0,v.Fg)();if(!e.vehicleType)return null;var s=null==(t=f.x[null!=(i=e.transportSystemId)?i:""])?void 0:t[e.size],u=s||(null==(n=I[e.vehicleType])?void 0:n[e.size])||(null==(r=I.fallback)?void 0:r[e.size]);return u?o.createElement(m.Z,{inline:!0,name:u,className:e.className,theme:s?a:void 0}):null},Z=n(45350),D=n.n(Z),L=n(55172),A=n.n(L),z=n(65560),N=n.n(z),U=(0,s.Z)("masstransit-stop-placemark"),F=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(C.Z,{name:"masstransit_stop_placemark",logClick:!0},o.createElement(R.Z,{coordinates:e.coordinates,onClick:e.onClick,zIndex:P.I.masstransitStop},o.createElement("div",{className:U({bookmark:e.isBookmark})},!e.hotspotIconUrl||e.isBookmark?o.createElement(T,{className:U("content-icon"),size:"normal",vehicleType:e.type,transportSystemId:e.transportSystemId}):null,e.hotspotIconUrl&&!e.isBookmark?o.createElement("img",{alt:"",src:e.hotspotIconUrl,className:U("background-icon"),width:"60",height:"68"}):o.createElement(k.Z,{className:U("background-icon"),url:e.isBookmark?A():e.transportSystemId?N():D()}),e.name?o.createElement("div",{className:U("name")},e.name):null)),e.id?o.createElement(x.Z,{uri:M.p1(e.id)}):null)},t}(o.PureComponent),O=(0,i.ZP)(F),q=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStopPlacemark=function(e,t){var n,r=(0,S.Od)(e);return"underground"===r&&(n=e.transports[0].transportSystemId),o.createElement(O,{id:e.id,type:r,coordinates:e.coordinates,transportSystemId:n,name:e.name,isBookmark:!1,onClick:function(){return null==t?void 0:t(e)}})},t._renderStaticStop=function(){var e,n=t.props.config.masstransitStop;return n&&n.id!==(null==(e=t.props.content)?void 0:e.data.stop.id)?t._renderStopPlacemark(n,t.props.onStaticPlacemarkClick):null},t._renderContentStop=function(){var e=t._getDisplayType();return t.props.content?o.createElement(o.Fragment,null,o.createElement(a.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,displayType:e,mapSize:t.props.mapSize},o.createElement(E,{content:t.props.content})),"panel"===e?t._renderStopPlacemark(t.props.content.data.stop):null):null},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderContentStop(),this._renderStaticStop())},t}(o.Component),B=(0,i.ZP)(q)},86187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(87363),o=n(37358),i=n(31336),a=n(52869),s=n(34862),u=n(34788),c=(n(11912),n(57619),n(25164));n(39705);var l={getStopInfo:function(e,t){return(0,c.Z)("masstransit/getStopInfo",{query:{id:e.id,uri:e.uri,locale:t.locale,lang:t.lang,mode:"prognosis"}},t).then(function(e){if(!e)throw Error("Stop no data");return e})}},d=n(35501),p=function(e){var t=(0,i.ZR)(),n=e.poiData,c=e.updateContent;return r.useEffect(function(){var e;if(n){a.Z.cancel(e);var r,i,p,m,f,v,h,g,y,_,b,w=o.lB(n.feature.properties.uri)?(i=(r=n.feature).properties,p=r.properties.uri,(m={id:o.QT(p),uri:p,hotspotProperties:i,hotspotCoordinates:n.coordinates,clearLine:!0},l.getStopInfo(m,t).then(function(e){return(0,u._)({},e,{coordinates:m.hotspotCoordinates||e.coordinates})})).then(function(e){return{type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}}})):(y=(g=n.feature).properties,_=g.properties.uri,b={clientId:null==(f=t.mapWidget)?void 0:f.clientId,origin:null!=(h=null==(v=t.mapWidget)?void 0:v.origin)?h:"poi",from:"poi",coordinates:n.coordinates,hotspotProperties:y,uri:_},s.Z.fetchSearchResult(b,t).then(function(e){var t=d.Y(null==e?void 0:e.items);return t?{type:"search",data:{result:t,coordinates:n.coordinates}}:null}));e=a.Z.create(w,{success:function(e){e&&c(e)}})}return function(){a.Z.cancel(e)}},[n,c,t]),null}},57689:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(18007),o=n(87363),i=n(99111),a=n(50576),s=n(31336),u=n(52869),c=n(85469),l=n(47855),d=function(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?(0,l.Z)(e,r?0:i,r?i+1:o):(0,l.Z)(e,r?i+1:0,r?o:i)},p=n(34788),m=n(39705),f=n(29287),v=n(38067);function h(e,t){if("comparison"===t){for(var n=0,r=1;r<e.length;r++)n+=(0,v.t)(e[r],e[r-1]);return n<=5e4}return!0}function g(e){var t=e.searchResult,n=e.ignorePctx;if(t&&!n)return"routePoint"in t?t.routePoint&&t.routePoint.context:void 0}var y=n(51898),_=n(88237),b=n(15462),w=n(25164),E=(n(50770),{buildRoute:function(e,t){return(0,w.Z)("router/buildRoute",{query:(0,p._)({},e,{locale:t.locale,lang:t.lang})},t)}}),S=function(e){function t(t){var n;return(n=e.call(this,t)||this)._buildRoute=function(){var e,t,r,o,i,a,s,l,w,S,C,k,R,x,P,M,I,T,Z,D,L,A,z,N,U=n.props;if(T=U.routePoints,Z=[],z=(D=T.filter(function(e,t){return!Z.includes(t)}),L=function(e,t){return t>=2&&!e.input&&!e.value&&!e.coords},A=D&&D.length?d(D,(0,c.Z)(L,3),!0,!0):[]).filter(function(e){return!e.input&&!e.value&&!e.coords}),N=A.filter(function(e){return!!e.input&&!e.coords}),2===A.length?0===z.length&&N.length>0:z.length>0||N.length>0){U.onError({waypoints:[],error:"invalid_points",type:U.travelMode,routes:[]});return}var F=(e=U.config,t={travelMode:U.travelMode,routerResponse:null,routePoints:U.routePoints,activeRouteIndex:-1,viaIndexes:[],settings:{auto:{ignoreTrafficJams:b.a(U.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},i=(r={}).regionId,a=r.isRough,s=t.travelMode,l=t.routerResponse,w=t.routePoints,S=t.activeRouteIndex,C=t.viaIndexes,R=(k=w.filter(function(e){return!!e.coords})).map(function(e){return e.coords}),x=l?l.routes[S]:null,P=t.activeComparisonMode?t.activeComparisonMode:x&&"taxi"!==x.type&&x.type||void 0,M=(0,f.F)(s,t.settings,t.cargo),I=[],h(R,s)||I.push("bicycle"),h(R,s)||I.push("scooter"),"comparison"!==s||e.enableTaxi||I.push("taxi"),(0,p._)({rll:R.map(function(e){return(0,m.s)(e)}).join("~"),type:s,activeComparisonMode:P,via:C.length>0?C.join("~"):void 0,mode:function(e){var t=e.ignoreTrafficJams,n=e.travelMode,r=e.isRough;if(["auto","taxi","comparison"].includes(n))return r?"approx":t?"nojams":"best"}({ignoreTrafficJams:t.settings.auto.ignoreTrafficJams||!!(M&&M.timeDependent&&M.timeDependent.time&&"comparison"!==s),travelMode:s,isRough:a}),pctx:(o=k.map(g)).filter(Boolean).length>0?o.join("~"):void 0,ignoreTravelModes:I.length>0?I.join(","):void 0,regionId:i,enableRoutesB2B:(0,y.M)(s,e)||void 0},M,{isIntercityRoute:2===R.length&&(0,v.t)(R[0],R[1])>1e5,"no-taxi-route-hidden":e.query["no-taxi-route-hidden"],experiments:e.experiments.routerParams}));u.Z.cancel(n._buildRouteAction),n._buildRouteAction=u.Z.create(E.buildRoute(F,U.config).then(function(e){if(!e)throw Error("Unknown Error");return e}),{success:function(e){var t=_.N(e);t.error?U.onError(t):U.onLoad(t)},fail:function(){U.onError({waypoints:[],error:"unknown_error",type:U.travelMode,routes:[]})}})},n._buildRouteDebounced=(0,i.Z)(n._buildRoute,100),n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=e.routePoints.map(function(e){return e.coords}).filter(Boolean),n=this.props.routePoints.map(function(e){return e.coords}).filter(Boolean);(!(0,a.Z)(t,n)||e.travelMode!==this.props.travelMode)&&n.length>=2&&this._buildRouteDebounced()},n.componentWillUnmount=function(){u.Z.cancel(this._buildRouteAction)},n.render=function(){return null},t}(o.Component),C=(0,s.ZP)(S)},32002:(e,t,n)=>{"use strict";var r=n(34788),o=n(18188),i=n(11912),a=n(87363),s=n(54332),u=n(37839),c=n(35846),l=n(31336),d=n(34862),p=n(33369),m=n(96315),f=n(23936),v=n(23840),h=n(22645),g=(0,c.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,56113))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 56113}},{ssr:!1}),y=(0,c.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,56113)).then(function(e){return{default:e.MapWidgetSearchFormResultsListIconView}})},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 56113}},{ssr:!1});t.Z=function(e){var t,n,c,_,b,w,E,S,C,k,R,x,P,M,I,T,Z,D,L,A,z,N,U,F,O=(0,l.ZR)(),q=(t=e.mapLocation,n=e.activeResult,c=e.onSearchBoundsChange,k=(C=(0,l.ZR)()).searchPreloadedResults,x=(R=(0,o._)(a.useState((null==k?void 0:k.chain)!==void 0||(null==k?void 0:k.requestQuery)!==void 0?{text:null==k?void 0:k.requestQuery,displayText:C.query["display-text"],chain:(null==k?void 0:k.chain)?{id:k.chain.id,name:k.chain.name}:void 0,filters:null==(b=C.query)?void 0:null==(_=b.filter)?void 0:_.split(";"),mapLocation:t}:void 0),2))[0],P=R[1],I=(M=(0,o._)(s.Z(function(e,t,o){if(P(e),!e)return Promise.resolve(void 0);var a,s,u,c,l=null==n?void 0:n.id,p=h.V(null==o?void 0:o.items),m=p.find(function(e){return e.id===l}),f=null!=(u=null==o?void 0:o.requestResults)?u:10,v={text:e.chain?"chain_id:("+e.chain.id+")":e.text,filters:e.filters,clientId:null==(a=C.mapWidget)?void 0:a.clientId,origin:null==(s=C.mapWidget)?void 0:s.origin,center:e.mapLocation.center,span:e.mapLocation.span,bounds:e.mapLocation.bounds,zoom:e.mapLocation.zoom,count:null==o?void 0:o.requestResults,type:["biz","geo"],context:null==o?void 0:o.requestContext,skip:t?Math.floor((null!=(c=null==o?void 0:o.pageCount)?c:0)/f)*f:void 0};return d.Z.fetch(v,C).then(function(e){var n=h.V(e.items);return!m||n.find(function(e){return e.id===m.id})||t&&p.find(function(e){return e.id===m.id})||n.push(m),(0,r._)({},e,{items:t&&o?(0,i._)(o.items).concat((0,i._)(n)):n})}).catch(function(){return o})},[C],{value:k,loading:!1}),2))[0],T=M[1],u.Z(function(){x&&T((0,r._)({},x,{mapLocation:t}),!1,I.value)},[t]),{request:x,response:I.value,isLoading:I.loading,searchDisplayText:(null==x?void 0:x.displayText)||(null==x?void 0:null==(w=x.chain)?void 0:w.name)||(null==(E=I.value)?void 0:E.requestCorrectedQuery)||(null==(S=I.value)?void 0:S.requestQuery)||(null==x?void 0:x.text)||"",fetchMore:function(){T(x,!0,I.value)},update:function(e){T({text:e,mapLocation:t},!1,void 0).then(function(e){var t;return(null==e?void 0:null==(t=e.exactResult)?void 0:t.bounds)&&(!e.items||1===e.resultsCount)?c(e.exactResult.bounds):(null==e?void 0:e.bounds)&&c(e.bounds),e})},clear:function(){T(void 0,!1,void 0)}}),B=(Z=e.mapSize,L=(D=(0,o._)(a.useState(!1),2))[0],A=D[1],a.useEffect(function(){A(Z.width<295||Z.height<250)},[Z]),L),H=!!(null==(F=O.mapWidget)?void 0:F.constructorApiValidKey),W=function(){q.clear(),e.onResultsListClose()},j=function(t){""===t.trim()?W():(q.update(t),(0,v.h)(e.mapSize)||e.onResultsListOpen())};return a.createElement(a.Fragment,null,function(){if(!H)return null;var t=!!q.response;return a.createElement(g,{value:q.searchDisplayText,mapLocation:e.mapLocation,mapSize:e.mapSize,submitSearch:j,onClear:W},t||e.isResultsListShown?a.createElement(y,{isActive:e.isResultsListShown,onClick:e.isResultsListShown?e.onResultsListClose:e.onResultsListOpen}):null)}(),!(q.request&&!B)||H?null:a.createElement(m.Z,{resultsCount:null!=(N=null==(z=q.response)?void 0:z.totalResultCount)?N:0,checked:e.isResultsListShown,onClick:e.isResultsListShown?e.onResultsListClose:e.onResultsListOpen}),e.isResultsListShown?a.createElement(v.Z,{searchFormMode:H,mapSize:e.mapSize,onClose:e.onResultsListClose},a.createElement(f.Z,{searchResultsCount:H?null==(U=q.response)?void 0:U.totalResultCount:void 0,searchDisplayText:q.searchDisplayText,searchRequest:q.request,searchResults:q.response,isLoading:q.isLoading,onListItemClick:e.onResultClick,onLoadMoreClick:function(){return q.fetchMore()}})):null,function(){if(!q.response)return null;var t,n,r,o,i=[e.activeResult,null==(n=O.mapWidget)?void 0:null==(t=n.activeObject)?void 0:t.items[0],null==(r=O.poiPreloadedResults)?void 0:r.items[0],null==(o=O.whatsherePreloadedResults)?void 0:o.items[0]].filter(function(e){return!!e});return a.createElement(p.Z,{hiddenResults:i,results:q.response,onPlacemarkClick:e.onResultClick})}())}},77840:(e,t,n)=>{"use strict";var r=n(34788),o=n(18007),i=n(87363),a=n(31336),s=n(18469),u=n(44229),c=n(91027),l=n(93798),d=n(95570),p=n(61111),m=n(87708),f=n(35846),v=n(35501),h=(0,f.Z)({resolved:{},chunkName:function(){return"flyover"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("flyover").then(n.bind(n,81344))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 81344}}),g={advert:void 0,brandingId:void 0},y=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStaticSearchResult=function(e){var n;return e&&e.id!==(null==(n=t.props.content)?void 0:n.data.result.id)?i.createElement(i.Fragment,null,i.createElement(s.Z,{searchResults:{requestId:"",requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1,items:[e]},mapLocation:t.props.mapLocation}),i.createElement(d.Z,{result:(0,r._)({},e,g),coordinates:e.coordinates,mode:"active",onClick:t.props.onStaticPlacemarkClick}),i.createElement(p.Z,{uri:e.uri})):null},t._renderContentSearchResult=function(){var e=t.props.content,n=t._getDisplayType();if(!e)return null;var o=e.data.result;return i.createElement(i.Fragment,null,i.createElement(c.Z,{coordinates:e.data.coordinates,mapLocation:t.props.mapLocation,displayType:n,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,mapSize:t.props.mapSize},"business"===o.type?i.createElement(u.Z,{result:o}):i.createElement(l.Z,{result:o,isTrafficLayerEnabled:t.props.isTrafficLayerEnabled})),i.createElement(s.Z,{searchResults:{requestId:"",requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1,items:[o]},mapLocation:t.props.mapLocation}),"panel"===n?i.createElement(i.Fragment,null,i.createElement(d.Z,{result:(0,r._)({},o,g),coordinates:o.displayCoordinates,mode:"active"}),i.createElement(p.Z,{uri:o.uri})):null)},t._renderBusinessGeometry=function(e){return e&&"business"===e.type?i.createElement(m.Z,{result:e}):null},t._renderFlyover=function(){var e,n=null==(e=t.props.content)?void 0:e.data.result;return n&&"business"===n.type?i.createElement(h,{result:n,zoom:t.props.mapLocation.zoom}):null},t}return(0,o._)(t,e),t.prototype.render=function(){var e,t,n,r,o,a=this.props.config,s=v.Y(null==(e=a.whatsherePreloadedResults)?void 0:e.items),u=v.Y(null==(t=a.poiPreloadedResults)?void 0:t.items),c=v.Y(null==(r=a.mapWidget)?void 0:null==(n=r.activeObject)?void 0:n.items),l=!!(null==(o=a.flyover)?void 0:o.isEnabled);return i.createElement(i.Fragment,null,this._renderStaticSearchResult(s),this._renderStaticSearchResult(u),this._renderStaticSearchResult(c),this._renderBusinessGeometry(c),this._renderBusinessGeometry(u),l?this._renderFlyover():this._renderContentSearchResult())},t}(i.Component);t.Z=(0,a.ZP)(y)},15462:(e,t,n)=>{"use strict";function r(e){var t,n;return(null==(t=e.query.l)?void 0:t.includes("trfe"))||(null==(n=e.userMap)?void 0:n.isTrafficShown)}function o(e){return"atm"===e.query.rtm}n.d(t,{W:()=>r,a:()=>o})},57793:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var r=function(e,t){var n,r=t.uatraits.isMobile?620:e.height>600?1014:814;return(null==(n=t.banner)?void 0:n.blockIds.widget)&&!(e.width<=r)?Math.ceil((e.width-r)/2):0}},13688:(e,t,n)=>{"use strict";n.d(t,{V:()=>p,_:()=>d});var r=n(34788),o=n(18188),i=n(80129),a=n.n(i),s=n(39705),u=n(93813),c=n(28361),l=n(6241);function d(e){var t=(0,o._)(e.split("?"),2),n=t[0],i=t[1];return n+"?"+a().stringify((0,r._)({},a().parse(void 0===i?"":i),{from:"mapframe"}))}function p(e,t,n){var o,i=c.D({routePoints:e,viaIndexes:[],travelMode:t.travelMode||"auto",activeRouteIndex:0,routerResponse:null,detailedIndex:0,settings:{auto:{ignoreTrafficJams:!1,avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}},startNavigationInApp:!0},n),a=e.some(function(e){return!e.coords})?null==(o=e.find(function(e){return e.coords}))?void 0:o.coords:void 0;return d(u.e(l.render("/",(0,r._)({ll:a?(0,s.s)(a):void 0,z:a?14:void 0},i)),n))}},44229:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(93813),u=n(47220),c=n(27760);function l(e){var t;return!!((0,c.z)(e)&&(null==(t=e.onlineProperties)?void 0:t.hideAddress))}var d=n(13688),p=n(33611),m=n(34788),f=n(18188),v=n(47868),h=n(57636),g=(0,i.Z)("flip-icon"),y=function(e){var t=e.isFlipped;return o.createElement(h.Z,{name:"arrow-down-8",className:g({flipped:t}),inline:!0})},_=n(94507),b=(0,i.Z)("map-widget-business-working-intervals-view"),w=function(e){var t=(0,a.ZR)(),n=(0,f._)(o.useState(!1),2),r=n[0],i=n[1],s=v.lR(e.result,t),u=v.bL(e.result,t)||[],c=u.length>0;return o.createElement("div",{className:b()},o.createElement("div",{className:b("labels")},e.children?o.createElement("div",{className:b("extra-label")},e.children):null,o.createElement("div",{className:b("time-label",(0,m._)({},s.state,{clickable:c})),onClick:c?function(){i(!r)}:void 0},o.createElement("span",{className:b("label-text")},s.text),c?o.createElement("div",{className:b("working-status-control")},o.createElement(y,{isFlipped:r})):null)),r?o.createElement("div",{className:b("intervals")},u.map(function(e,t){var n=e.changedDate?o.createElement(o.Fragment,null,e.dayName,", ",o.createElement("span",{className:b("date")},e.changedDate)):e.dayName;return o.createElement(_.Z,{key:t,isDisabled:!e.changedDate,position:["right"],text:"Праздничный день"},o.createElement("div",{className:b("interval")},o.createElement("div",{className:b("day")},n),o.createElement("span",{className:b("time")},Array.isArray(e.text)?e.text.join(", "):e.text)))})):null)},E=n(11640),S=n(6241),C=(0,i.Z)("map-widget-business-contacts-view"),k=function(e){var t,n,r,i,s,u=(0,a.ZR)(),c=(0,f._)(o.useState(!1),2),l=c[0],d=c[1],p=(0,E._)((t=e.result,n=({}).useRealty,(null==(r=t.realty)?void 0:r.company.phone)&&(void 0===n||n)&&!t.advert?[{number:r.company.phone,counter:r.company.phoneCounter?r.company.phoneCounter+"&source=map&crc="+u.xscriptCsrfToken:void 0,type:"phone",info:"Офис продаж"}]:t.phones||[])),m=p[0],v=p.slice(1),g=null==(s=e.result.urls)?void 0:s[0];return o.createElement("div",{className:C()},e.result.fullAddress?o.createElement("div",{className:C("item")},o.createElement(h.Z,{inline:!0,name:"logo-24",className:C("icon")}),e.result.fullAddress):null,m?o.createElement("div",{className:C("item")},o.createElement("div",null,m?o.createElement("div",{className:C("phone-container")},o.createElement("a",{className:C("main-phone"),href:"tel:"+(null!=(i=m.value)?i:m.number)},o.createElement(h.Z,{inline:!0,name:"call-24",className:C("icon")}),m.number),v.length>0?o.createElement("div",{className:C("flip"),onClick:function(){d(!l)}},v.length,o.createElement(y,{isFlipped:l})):null):null,l?v.map(function(e){var t;return o.createElement("a",{key:e.number,className:C("phone"),href:"tel:"+(null!=(t=e.value)?t:e.number)},e.number)}):null)):null,g?o.createElement("div",{className:C("item")},o.createElement(h.Z,{inline:!0,name:"web-24",className:C("icon")}),o.createElement("a",{className:C("url"),href:g,target:"_blank"},S.cropUrlForDisplay(g,!0))):null)},R=n(59093),x=n(81194),P=(0,i.Z)("map-widget-business-buttons-view"),M=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderGetToButton=function(){if(l(t.props.result))return null;var e={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},n=(0,d._)((0,d.V)([{coords:null,value:""},e],{},t.props.config));return o.createElement("div",{className:P("button-container")},o.createElement(x.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Как добраться"))},t._renderAboutButton=function(){return o.createElement("div",{className:P("button-container")},o.createElement(x.Z,{view:"primary",size:"small",isStretched:!0,url:t.props.businessUrl,target:"_blank"},"Об организации"))},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement("div",{className:P()},this._renderGetToButton(),this._renderAboutButton())},t}(o.Component),I=(0,a.ZP)(M),T=n(54332),Z=n(25164),D=n(39705),L={checkCoverage:function(e,t){return(0,Z.Z)("taxi/checkCoverage",{query:{ll:(0,D.s)(e.center),lang:t.locale}},t)}},A=(0,i.Z)("map-widget-taxi-link-view"),z=function(e){var t=(0,a.ZR)(),n=(0,f._)(T.Z(function(){return L.checkCoverage({center:e.endPoint},t)},[e.endPoint,t],{value:null,loading:!1}),2),r=n[0],i=n[1];return(o.useEffect(function(){i()},[e.endPoint,i]),r.value||r.loading)?o.createElement("div",{className:A()},o.createElement(h.Z,{name:"yndx-taxi-16",className:A("icon")}),o.createElement("a",{className:A("link"),href:function(){var n,r,o,i,a,s,u,c,l,d,p,m,v=null==(d=t.mapWidget)?void 0:d.taxi,h=t.uatraits.isMobile;if(v){var g=(0,f._)((null==(p=e.startPoint)?void 0:p.map(String))||[],2),y=g[0],_=g[1],b=(0,f._)(e.endPoint.map(String),2),w=b[0],E=b[1];return r=(n={urlTemplate:h?v.mobileUrlTemplate:v.urlTemplate,domain:v.domain,startLat:void 0===_?"":_,startLon:void 0===y?"":y,endLat:void 0===E?"":E,endLon:void 0===w?"":w,tariffClass:"",lang:null!=(m=v.lang)?m:"ru"}).urlTemplate,o=n.domain,i=n.startLat,a=n.startLon,s=n.endLat,u=n.endLon,c=n.tariffClass,l=n.lang,r.replace("{domain}",o).replace("{startLat}",i).replace("{startLon}",a).replace("{endLat}",s).replace("{endLon}",u).replace("{tariffClass}",c).replace("{lang}",l)}}(),target:"_blank"},"Вызвать такси")):null},N=n(5130),U=(0,i.Z)("map-widget-business-content-view"),F=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getCategories=function(){if(t.props.result.categories&&0!==t.props.result.categories.length)return t.props.result.categories.map(function(e){return e.name}).join(", ")},t._renderFeedbackUrl=function(){var e=t.props,n="/?oid="+e.result.id+"&ol=biz&feedback=organization/edit",r=(0,d._)(s.e(n,e.config));return o.createElement("a",{className:U("feedback-link"),href:r,target:"_blank"},"Сообщить об ошибке")},t._renderTaxiUrl=function(){var e=t.props;return l(e.result)?null:o.createElement(z,{endPoint:e.result.coordinates,startPoint:e.userCoordinates})},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=u.S({id:e.result.id,seoname:e.result.seoname}),n=(0,d._)(s.e("/"+t,e.config));return o.createElement("div",{className:U()},o.createElement(N.Z,{title:e.result.title,titleUrl:n,subtitle:this._getCategories()}),o.createElement(w,{result:this.props.result},o.createElement(p.Z,{result:e.result})),o.createElement(k,{result:e.result}),o.createElement("div",{className:U("stops")},o.createElement(R.Z,{result:e.result})),o.createElement("div",{className:U("business-buttons")},o.createElement(I,{businessUrl:n,result:e.result})),o.createElement("div",{className:U("bottom-links")},this._renderTaxiUrl(),this._renderFeedbackUrl()))},t}(o.Component),O=(0,a.ZP)(F)},33611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(47220),u=n(93813),c=n(13688),l=n(90585),d=n(57636),p=n(44953),m=n(21469),f=(0,i.Z)("a11y-hidden"),v=function(e){var t=e.children,n=e.tag;return t?o.createElement(void 0===n?"span":n,{className:f()},t):null},h=n(85172),g=(0,i.Z)("business-rating-badge-view"),y=(0,l.Z)(a.ZP,h.ZP)(function(e){var t=Math.round(2*e.ratingValue),n=Math.floor(t/2),r=!1;2*n!==t&&(r=!0);var i=e.size||"m",a=e.weight||"medium",s=e.collapseStars?1:5,u=e.ratingSpacing||"normal";return o.createElement(p.ZP,{name:"business_rating"},o.createElement("div",{className:g({size:i,weight:a})},o.createElement("div",{className:g("stars",{spacing:u})},Array(s).fill(null).map(function(t,i){var a=r&&i===n,s=i>=(r?n+1:n);return o.createElement(d.Z,{name:a?"place-half-star-16-fullsize-16-flip":"place-rating-star-16-fullsize-16",className:g("star",{full:!s&&!a,empty:s,half:a}),theme:a?e.theme:void 0,key:i,inline:!0})})),e.onlyStars?null:o.createElement("div",{className:g("rating")},o.createElement(v,null,"Рейтинг"," "),o.createElement("span",{className:g("rating-text")},m.D$(e.ratingValue,e.config.lang,{min:1,max:1})))))}),_=n(94507),b=(0,i.Z)("map-widget-business-rating-view"),w=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getReviewUrl=function(){if(!t.props.disableLink){var e=s.S(t.props.result,{sublanding:"reviews"},{},{"add-review":""});return(0,c._)(u.e("/"+e,t.props.config))}},t._renderContent=function(){let e;var n=t.props;return n.result.ratingData?n.result.ratingData.ratingValue?o.createElement(y,{ratingValue:n.result.ratingData.ratingValue}):(e={count:n.result.ratingData.reviewCount}).count?e.count+" "+(e.count%10==1&&e.count%100!=11?"отзыв":e.count%10>1&&e.count%10<5&&(e.count%100<10||e.count%100>20)?"отзыва":"отзывов"):"Ещё нет отзывов":null},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(_.Z,{text:"Оценить место",position:"bottom",isAir:!0},o.createElement("a",{className:b(),href:this._getReviewUrl(),target:"_blank"},this._renderContent()))},t}(o.Component),E=(0,a.ZP)(w)},5130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(87363),o=(0,n(44748).Z)("map-widget-content-title-view"),i=function(e){return r.createElement(r.Fragment,null,r.createElement("a",{href:e.titleUrl,target:"_blank",className:o("title",{disabled:!e.titleUrl})},e.title),e.subtitle?r.createElement("div",{className:o("subtitle")},e.subtitle):null)}},91027:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(18007),o=n(87363),i=n(44748),a=n(50576),s=n(11912),u=n(38024),c=n(15900),l=n(60309),d=n(13340),p=n(19382),m=n(54062),f=n(50607),v=(0,i.Z)("map-widget-content-view"),h={top:10,right:8},g=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=null,n._updateMapLocation=function(){if(n.props.updateLocationRequest){var e,t,r,o,i=n.state.maxHeight||n.state.height,a=null==(o=n._containerRef)?void 0:o.offsetWidth;if(i&&a){var d="panel"===n.props.displayType?(e=n.props.mapLocation,t=n.props.coordinates,r=(0,c.f)(t,e.zoom),r[1]+=32,(0,l.W)(r,e.zoom)):function(e,t,n,r){var o,i=e.bounds,a=(0,u.V)(i,t)?e.center:t,d=(0,u.V)(i,t)?t:e.center,p=(0,c.f)(a,e.zoom),m=(0,c.f)(d,e.zoom),f=i.map(function(t){return(0,c.f)(t,e.zoom)}),v=m[0]-f[0][0],h=f[1][0]-m[0],g=m[1]-f[1][1],y=Math.min(v,h),_=(0,s._)(p),b=Math.ceil(n.width/2);if(y<b){var w=b-y;v>=h?_[0]+=w:_[0]-=w}var E=n.height+(null!=(o=null==r?void 0:r.main)?o:0);return g<E&&(_[1]-=E-g+10),(0,l.W)(_,e.zoom)}(n.props.mapLocation,n.props.coordinates,{width:a,height:i},n.props.offset);n.props.updateLocationRequest({center:d,duration:300})}}},n._updateWidthHeight=function(){if(n._containerRef){var e,t,r,o;n.setState({height:n._containerRef.clientHeight,width:"balloon"===n.props.displayType?n._containerRef.clientWidth+20:void 0,maxHeight:"balloon"===n.props.displayType?(e=n.props.mapLocation,t=n._containerRef.clientHeight,(o=(r=e.bounds.map(function(t){return(0,c.f)(t,e.zoom)}))[0][1]-r[1][1]+22)<t?o:t):Math.ceil(n.props.mapSize.height/2),ready:!0},function(){return n._updateMapLocation()})}},n._setContainerRef=function(e){n._containerRef=e,n._updateWidthHeight()},n._renderContainer=function(){return o.createElement("div",{className:v("container",{ready:n.state.ready}),ref:n._setContainerRef,style:{height:n.state.height,maxHeight:n.state.maxHeight,width:n.state.width}},o.createElement(p.Z,{width:"dynamic"},o.createElement("div",{className:v("frame")},n.props.children)))},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;e.coordinates===this.props.coordinates&&e.displayType===this.props.displayType&&(0,a.Z)(this.props.mapSize,e.mapSize)||this.setState({height:void 0,width:void 0,maxHeight:void 0,ready:void 0},function(){t._updateWidthHeight()})},n.render=function(){var e=this.props;return"balloon"===e.displayType?o.createElement(d.Z,{coordinates:e.coordinates,key:e.coordinates.join(),position:"top",restrictPosition:!0,type:"normal",skipMaxHeight:!0,offset:e.offset,isShown:!0},o.createElement("div",{className:v("balloon")},o.createElement(m.Z,{offset:h,onClick:e.onClose}),this._renderContainer())):o.createElement(f.v7,null,o.createElement("div",{className:v("panel"),key:e.coordinates.join()},o.createElement(m.Z,{offset:h,onClick:e.onClose}),this._renderContainer()))},t}(o.Component)},83466:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(87363),o=n(44748),i=n(81194),a=n(57636),s=(0,o.Z)("map-widget-in-maps-button"),u=function(e){var t=r.createElement(a.Z,{name:"logo-24",inline:!0,className:s("icon")});return r.createElement(i.Z,{view:"air",size:"small",icon:t,url:e.url,target:"_blank"},e.children)}},50607:(e,t,n)=>{"use strict";n.d(t,{v7:()=>ey,ZP:()=>e_});var r=n(2267),o=n(75766),i=n(34788),a=n(18007),s=n(18188),u=n(11912),c=n(87363),l=n(50576),d=n(44748),p=function(e){var t=null,n=null,r=!1,o=!1,i=-1;function a(){for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];if(o){r=!0,t=u,n=this;return}e.apply(this,u),o=!0,i=window.requestAnimationFrame(function(){o=!1,r&&(r=!1,n=null,t=null,a.apply(n,t))})}return a.scheduled=o,Object.defineProperty(a,"scheduled",{get:function(){return o}}),a.cancel=function(){window.cancelAnimationFrame(i),i=-1,o=!1,r=!1,n=null,t=null},a},m=n(31336),f=n(1477),v=n(69602),h=n(78597),g=n(73244),y=n(12574),_=(0,h.ZP)()(function(e){function t(t){var n;return(n=e.call(this,t)||this)._getState=function(){var e=n.props.map;if(!e)return{zoomOutIsEnabled:!1,zoomInIsEnabled:!1};var t=Math.round(100*e.zoom)/100;return{zoomOutIsEnabled:t>e.zoomRange.min,zoomInIsEnabled:t<e.zoomRange.max}},n._updateButtons=function(){n.setState(n._getState())},n._changeZoom=function(e){var t=n.props.map;if(t){var r,o=null!=(r=n._targetZoom)?r:t.zoom;n._targetZoom=o+e;var i=n._targetZoom;t.animateCenterAndZoom(t.center,n._targetZoom,200).then(function(){i===n._targetZoom&&(n._targetZoom=void 0)})}},n._onZoomIn=function(e){e.preventDefault(),n._changeZoom(1)},n._onZoomOut=function(e){e.preventDefault(),n._changeZoom(-1)},n.state=n._getState(),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.map&&this.props.map&&this._updateButtons()},n.render=function(){return c.createElement(c.Fragment,null,c.createElement(y.Z,{onUpdate:this._updateButtons,onZoomRangeChange:this._updateButtons}),c.createElement(g.Z,{onZoomIn:this._onZoomIn,onZoomOut:this._onZoomOut,disabledZoomIn:!this.state.zoomInIsEnabled,disabledZoomOut:!this.state.zoomOutIsEnabled,size:this.props.size}))},t}(c.PureComponent)),b=n(14185),w=n(83243),E=n(44953),S=n(81194),C=n(94507),k=n(36887),R=n(91784),x=(0,d.Z)("map-geolocation-control"),P=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(e){e.preventDefault(),t.props.onClick()},t._renderIcon=function(){var e=t.props;if(e.isLoading)return c.createElement("div",{className:x("spinner")},c.createElement(k.Z,{view:"small",withoutMargin:!0}));var n=!!e.config.mapWidget;return c.createElement("div",{className:x("icon"),dangerouslySetInnerHTML:{__html:e.config.uatraits.isMobile&&!n?R.location48Icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.385 12.42l16.01-7.614a.6.6 0 0 1 .8.8l-7.616 16.009a.6.6 0 0 1-1.11-.068l-2.005-6.012-6.01-2.003a.6.6 0 0 1-.069-1.111z" fill="currentColor"/></svg>'}})},t}return(0,a._)(t,e),t.prototype.render=function(){var e,t=this.props,n=null!=(e=t.size)?e:t.config.uatraits.isMobile?"large":"medium",r=!!t.config.mapWidget;return c.createElement("div",{className:x({noprint:!0})},c.createElement(C.Z,{text:"Моё местоположение",position:"left",isAir:!0},c.createElement(E.ZP,{name:"geolocation",logClick:!0},c.createElement(S.Z,{view:t.config.uatraits.isMobile&&!r?"air-round":"air",size:n,icon:this._renderIcon(),onClick:this._onClick,disabled:t.isLoading,checked:t.isChecked,ariaLabel:"Моё местоположение"}))))},t}(c.Component),M=(0,m.ZP)(P),I=n(70692),T=(0,d.Z)("map-widget-map-scale-line-view"),Z=function(e){return c.createElement("div",{className:T()},c.createElement(I.default,{center:e.location.center,zoom:e.location.zoom}))},D=(0,d.Z)("map-widget-ruler-control-view"),L=function(e){return c.createElement("div",{className:D()},c.createElement(C.Z,{text:"Линейка",position:"left",isAir:!0},c.createElement(S.Z,{ariaHidden:!0,icon:c.createElement("div",{className:D("icon"),dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.56 14.363L14.363 3.56a1.91 1.91 0 0 1 2.7 0l3.377 3.376a1.91 1.91 0 0 1 0 2.7L9.636 20.442a1.91 1.91 0 0 1-2.7 0l-3.377-3.377a1.91 1.91 0 0 1 0-2.7zm4.12-.743l1.282-1.282 1.823 1.824a.764.764 0 1 0 1.08-1.082l-1.824-1.822 1.216-1.215 1.148 1.145a.763.763 0 0 0 1.318-.534.765.765 0 0 0-.237-.545l-1.148-1.147 1.282-1.283 1.824 1.824a.764.764 0 0 0 1.08-1.082l-1.825-1.824 1.014-1.012a.478.478 0 1 0-.676-.675L4.91 15.038a.478.478 0 0 0 .675.675l1.012-1.012 1.15 1.146a.764.764 0 1 0 1.08-1.079L7.679 13.62v.001z" fill="currentColor"/></svg>'}}),view:"air",size:"small",onClick:function(){return e.updateRuler({isEnabled:!e.isEnabled})},checked:e.isEnabled})))},A=n(59270),z=(0,d.Z)("traffic-raw-icon"),N=(0,m.ZP)(function(e){var t=e.checked?A.ZU(e.level):"none",n=e.config.isRtl&&!e.config.uatraits.isPhone;return c.createElement("div",{className:z({color:t})},c.createElement("div",{className:z("icon"),style:{transform:n?"scaleX(-1)":void 0},dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10z" fill="#CCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10zm18.333 0a8.333 8.333 0 1 1-16.666 0 8.333 8.333 0 0 1 16.666 0z" fill="#4D4D4D"/><path d="M9.75 2h2.5c5.514 0 10 4.486 10 10a5.605 5.605 0 0 1-3.976-1.65c-1.018-1.018-1.68-2.104-3.22-3.906C13.694 4.857 11.818 3.25 9.75 3.25c-4.136 0-7.5 3.926-7.5 8.75C1.456 11.059 1 10.005 1 8.875 1 5.085 3.547 2 9.75 2z" fill="#4D4D4D"/></svg>'}}),c.createElement("div",{className:z("text")},e.checked?e.level:null))}),U=(0,d.Z)("map-widget-traffic-control-view"),F=function(e){var t=c.createElement(N,{checked:e.isActive,level:e.level});return c.createElement("div",{className:U()},c.createElement(S.Z,{onClick:e.onClick,icon:t,size:"small",view:"air"},e.hasText?"Пробки":null))},O=(0,d.Z)("layout-control-group"),q=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=c.createRef(),n._onUpdate=function(){var e=n.props,t=n._root.current.clientHeight,r=n._root.current.clientWidth;e.height>0&&t>0&&e.height===t||e.onUpdate(e.type,{height:t,width:r})},n._onResize=function(){n._onUpdate()},n._onResizeThrottled=p(n._onResize),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._root.current.clientHeight,n=this._root.current.clientWidth;e.onUpdate(e.type,{position:e.position,height:t,width:n})},n.componentDidUpdate=function(e){this.props.position!==e.position&&this.props.onUpdate(this.props.type,{position:this.props.position})},n.render=function(){var e=this.props,t=!e.visible,n=(0,s._)("left"===e.side?[""+e.sideLeftMargin+"px",void 0]:"right"===e.side?[void 0,""+e.sideRightMargin+"px"]:[""+e.sideLeftMargin+"px",""+e.sideRightMargin+"px"],2),r=n[0],o=n[1];return c.createElement(E.ZP,{group:!0,hidden:t},c.createElement("div",{ref:this._root,className:O({side:e.side||"right",hidden:t,animated:e.animated}),"data-type":e.type,style:{transform:"translateY("+e.top+"px)",left:r,right:o,pointerEvents:e.pointerEventsNone?"none":void 0}},e.children,c.createElement(f.Z,{onResize:this._onResizeThrottled})))},t}(c.Component);function B(e){for(var t={},n=0,r=0,o=e.controlsOrder;r<o.length;r++){var a=(0,s._)(o[r],1)[0],u=0,c=e.controlGroups[a];if(c&&0!==c[e.dimension]){var l=!t[c.type];l&&(u+=c[e.dimension]+e.betweenMargin);var d=n+u;if(d>e.viewport+e.betweenMargin)break;l&&(t[a]=(0,i._)({},c)),n=d}}return{controlGroups:t}}var H=function(e,t,n){var r={top:W(n.betweenMargin),center:W(n.betweenMargin),bottom:W(n.betweenMargin)};e.forEach(function(e){r[e.position].height+=e.height+n.betweenMargin}),r.top.height=Math.max(r.top.height,0),r.center.height=Math.max(r.center.height,0),r.bottom.height=Math.max(r.bottom.height,0),r.top.top=n.topSizes.minTop;var a=r.top.top+r.top.height+n.betweenMargin;return r.bottom.top=G(n.topSizes.maxTop-r.bottom.height,a,n.topSizes.maxTop),r.center.top=G(n.topSizes.middle-Math.round(r.center.height/2),a,r.bottom.top-n.betweenMargin-r.center.height),e.reduce(function(e,a){var s=r[a.position],u=s.top,c=Math.abs(a.top-u),l=c>20&&c<300&&n.enableAnimation,d=(0,i._)({},t[a.type],{animated:l,top:u});return s.top+=a.height+n.betweenMargin,(0,i._)({},e,(0,o._)({},a.type,d))},{})};function W(e){return{top:0,height:-e,width:-e}}function j(e,t){return Object.values(e).filter(function(e){return!!e}).sort(function(e,n){return t.indexOf(e.type)-t.indexOf(n.type)})}function G(e,t,n){return Math.max(Math.min(e,n),t)}var Y=n(57793),V=n(89048),X=n(77823),K=n(111),J=n(57636),$=(0,d.Z)("flyover-button"),Q=function(e){return c.createElement("div",{className:$({active:e.active})},c.createElement(S.Z,{ariaHidden:!0,view:"air",size:"medium",icon:e.iconName?c.createElement("div",{className:$("icon")},e.isLoading?c.createElement("div",{className:$("spinner")},c.createElement(k.Z,{view:"small",withoutMargin:!0})):c.createElement(J.Z,{name:e.iconName,inline:!0})):void 0,onClick:e.isLoading?void 0:e.onClick,disabled:e.isLoading},e.text?c.createElement("div",{className:$("text")},e.text):null))},ee=n(71682),et=n(67105),en=n(91086),er=(0,d.Z)("map-flyover-control"),eo=function(){var e=(0,h.Sx)().map,t=(0,et.KE)().flyoverObject,n=(0,s._)(c.useState(!1),2),r=n[0],o=n[1],i=(0,s._)(c.useState(!1),2),a=i[0],u=i[1],l=null==t?void 0:t.center,d=function(){ee.p_("flyover"),o(!1)},p=function(){if(e&&l){o(!0);var t=null==e?void 0:e.projection.toWorldCoordinates(l);ee.zR(e,{worldCenter:t},function(){o(!1)})}};c.useEffect(function(){d()},[l]);var m=(0,K.Z)(function(){e.zoom<16&&r&&d()},100),f=function(){var n="ready"!==(t?en.go(t.tile.uri,e):null);n!==a&&u(n)};return(0,V.Z)(function(){f()}),(0,X.Z)(function(){d(),m.cancel()}),l?c.createElement("div",{className:er()},c.createElement(E.ZP,{name:"flyover_control",logClick:!0},c.createElement(Q,{active:r,onClick:function(){if(ee.p_(),r){d();return}p()},iconName:"view360-24",text:"Обзор 360°",isLoading:a})),c.createElement(y.Z,{onActionStart:function(e){["scrollZoom","drag"].includes(e)||d()},onUpdate:m,onTile3dChanged:f})):null},ei=(0,d.Z)("map-widget-layout-view"),ea=["zoom","rulers","top-right-controls","geolocation"],es=["top-right-controls","zoom","3D"],eu=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],ec=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],el=[["zoom"],["top-right-controls"],["geolocation"],["3D"]],ed=[["top-right-controls"],["zoom"],["3D"]],ep=[["open-in-maps-medium"],["open-in-maps-small"],["open-in-maps-tiny"],["top-left-controls"]],em=[["open-in-maps-small"]],ef=[["open-in-maps-medium"]],ev=ei("top-panel"),eh=ei("bottom-panel"),eg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=c.createRef(),n._getFittingBottomLayout=function(){var e,t=n.state,r=((null==(e=n._root.current)?void 0:e.clientWidth)||0)-305,o=Object.keys(B({controlsOrder:ef,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups),i=Object.keys(B({controlsOrder:em,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups);return 1===o.length?["open-in-maps-medium"]:1===i.length?["open-in-maps-small"]:["open-in-maps-tiny","rulers"]},n._reposition=function(){var e,t=n.state,r=(null==(e=n._root.current)?void 0:e.clientHeight)||0,o=10+r,a=G(o,10,r),c=Math.round((o+10)/2),d=n._getFittingBottomLayout(),p=B({controlsOrder:ep.filter(function(e){var t=(0,s._)(e,1)[0];return!ec.includes(t)||d.includes(t)}),viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),m=B({controlsOrder:n._isFlyover?ed:el,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),f=j(p.controlGroups,eu),v=H(j(m.controlGroups,n._isFlyover?es:ea),n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:c},enableAnimation:!0}),h=H(f,n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:c},enableAnimation:!0}),g=(0,u._)(Object.keys(v)).concat((0,u._)(Object.keys(h))),y=(0,i._)({},t.controlGroups,v,h);(0,l.Z)(t.controlGroups,y)&&(0,l.Z)(t.visibleControlGroups,g)||n.setState({visibleControlGroups:g,controlGroups:y})},n._onControlGroupUpdate=function(e,t){n.setState(function(n){return(0,i._)({},n,{controlGroups:(0,i._)({},n.controlGroups,(0,o._)({},e,(0,i._)({type:e},n.controlGroups[e],t)))})},n._reposition)},n._getControlGroups=function(){return[{type:"top-right-controls",position:"top",side:"right",children:n._renderTopRightControls()},{type:"zoom",position:n.state.visibleControlGroups.length<=2?"top":"center",side:"right",children:n._renderZoomControls("small")},{type:"geolocation",position:"center",side:"right",children:n._renderGeolocationControl()},{type:"open-in-maps-medium",position:"bottom",side:"left",children:n._renderInMaps("medium")},{type:"open-in-maps-small",position:"bottom",side:"left",children:n._renderInMaps("small")},{type:"open-in-maps-tiny",position:"bottom",side:"left",children:n._renderInMaps("tiny")},{type:"top-left-controls",position:"top",side:"left",children:n._renderTopLeftControls()}]},n._getFlyoverControlGroups=function(){return[{type:"top-right-controls",position:"top",side:"both",children:n._renderFlyoverTopControls()},{type:"zoom",position:"center",side:"right",sideRightMargin:12,children:n._renderZoomControls()},{type:"3D",position:"center",side:"right",sideRightMargin:12,children:n._render3DControl()}]},n._renderFlyoverControl=function(){return c.createElement("div",{className:ei("flyover")},c.createElement(eo,null))},n._renderGeolocationControl=function(){return c.createElement("div",{className:ei("geolocation")},c.createElement(M,{onClick:n.props.geolocation.onClick,isLoading:n.props.geolocation.isStarted,size:"small"}))},n._render3DControl=function(){return c.createElement("div",{className:ei("3d")},c.createElement(b.Z,null))},n._renderFlyoverTopControls=function(){return c.createElement("div",{className:ei("top-flyover-control")},n._renderFlyoverControl())},n._renderTopRightControls=function(){return c.createElement("div",{className:ei("top-right-controls")},n._renderRuler(),n._renderTrafficControl())},n._renderTopLeftControls=function(){return c.createElement("div",{className:ei("top-left-controls")},c.createElement("div",{className:ei("search")},n.props.search.render()),c.createElement("div",{className:ei("routes")},n.props.routes.render()))},n._renderTrafficControl=function(){return c.createElement(F,(0,i._)({},n.props.traffic,{hasText:n.props.mapSize.width>400}))},n._renderRuler=function(){return c.createElement("div",{className:ei("ruler")},c.createElement(L,n.props.ruler))},n._renderInMaps=function(e){return c.createElement("div",{className:ei("maps-links")},n.props.inMaps.render(e))},n._renderZoomControls=function(e){return c.createElement("div",{className:ei("zoom-controls")},c.createElement(_,{size:e}))},n.state={visibleControlGroups:[],controlGroups:{}},n._repositionThrottled=p(n._reposition),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._repositionThrottled()},n.render=function(){var e=this,t=this._isFlyover?this._getFlyoverControlGroups():this._getControlGroups(),n=(0,Y.d)(this.props.mapSize,this.props.config);return c.createElement("div",{className:ei()},c.createElement("div",{className:ei("layout")},c.createElement("div",{ref:this._root,className:ei("controls")},t.map(function(t){var n,r,o,a,s;return c.createElement(q,(0,i._)({},t,{key:t.type,sideLeftMargin:t.sideLeftMargin||8,sideRightMargin:t.sideRightMargin||8,visible:e.state.visibleControlGroups.includes(t.type),animated:null==(n=e.state.controlGroups[t.type])?void 0:n.animated,height:null!=(a=null==(r=e.state.controlGroups[t.type])?void 0:r.height)?a:0,top:null!=(s=null==(o=e.state.controlGroups[t.type])?void 0:o.top)?s:0,onUpdate:e._onControlGroupUpdate,pointerEventsNone:"top-left-controls"===t.type}))})),c.createElement("div",{className:ei("bottom-layout"),style:{marginRight:""+n.toFixed(0)+"px"}},c.createElement("div",{className:ei("copyrights")},c.createElement(w.Z,{right:100,copyrightOnly:!0})),c.createElement("div",{className:ei("scale-line")},c.createElement(Z,{location:this.props.location}))),c.createElement(f.Z,{onResize:this._repositionThrottled})),c.createElement("div",{className:ev}),c.createElement("div",{className:eh}))},(0,r._)(t,[{key:"_isFlyover",get:function(){var e;return!!(null==(e=this.props.config.flyover)?void 0:e.isEnabled)}}]),t}(c.Component),ey=function(e){return c.createElement(v.Z,{selector:"."+eh},e.children)},e_=(0,m.ZP)(eg)},59093:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(13688),u=n(57636),c=(0,i.Z)("map-widget-nearest-stops-view"),l=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderFromStopDistance=function(e){var n={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},r={coords:e.coordinates,value:""},i=(0,s._)((0,s.V)([r,n],{travelMode:"pedestrian"},t.props.config));return o.createElement("a",{className:c("distance"),href:i,target:"_blank"},o.createElement("div",{className:c("distance-icon")},o.createElement(u.Z,{name:"pedestrian-24-flip",inline:!0,className:c("distance-icon-inner")})),o.createElement("div",{className:c("distance-text")},e.distance))},t._renderStop=function(e){var n="metro"===e.type?e.color:void 0;return o.createElement("div",{className:c("stop"),key:e.id},o.createElement("div",{className:c("metro-icon"),style:{color:n}},o.createElement(u.Z,{name:"metro-stop-24",inline:!0})),o.createElement("div",null,e.name),t._renderFromStopDistance(e))},t}return(0,r._)(t,e),t.prototype.render=function(){return this.props.result.metro?this.props.result.metro.map(this._renderStop):null},t}(o.Component),d=(0,a.ZP)(l)},35137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>nx});var r=n(34788),o=n(18007),i=n(87363),a=n(31336),s=n(28361),u=n(41886),c=n(12574),l=n(11912),d=n(44748),p=n(33228),m=n(4670),f=n(15900),v=n(99209),h={};function g(e,t){if(!t.offset||!t.size)return{left:0,right:0,bottom:0,top:0};var n=t.offset[0],r=t.offset[0],o=t.offset[1],i=t.offset[1]+t.size.height;return"MASSTRANSIT"===e.pinType&&(n+=e.rotated?-t.size.width:-7,r+=e.rotated?7:t.size.width),"CONSTRUCTION"===e.pinType&&(n+=-10,r=r+t.size.width+-10,o+=-30,i+=-30),"ROUTEPOINT"===e.pinType&&(n-=t.size.width/2,r+=t.size.width/2,o=o+8-10,i+=8),"SPECIAL"===e.pinType&&(n+=-12,r=r+t.size.width+-12,o+=-24,i+=-24),{left:n,right:r,top:o,bottom:i}}function y(e,t,n,r){return Promise.all(e.map(function(e){var o;return h[o=b(e)]=h[o]||(0,v.Z)(function(){return t(e)},r),h[o].then(function(t){var r=(0,f.f)(n.bounds[0],n.zoom),o=(0,f.f)(e.coordinates,n.zoom);return{size:t,offset:[o[0]-r[0],o[1]-r[1]]}})})).then(function(t){return e.map(function(n,r){return function(e,t,n){var r=e[n],o=t[n];if(!o.offset||!o.size)return[];var i=g(r,o);return i.left===i.right||i.top===i.bottom?[]:e.reduce(function(e,n,o){if(r===n)return e;var a=t[o];if(!a.offset||!a.size)return e;var s=g(n,a);return s.left===s.right||s.top===s.bottom?e:(0,m.Y)([[i.left,i.top],[i.right,i.bottom]],[[s.left,s.top],[s.right,s.bottom]])?e.concat(o):e},[])}(e,t,r)})})}function _(e,t,n,r){return y(e,t,n,r).then(function(e){return e.every(function(e){return 0===e.length})})}function b(e){switch(e.pinType){case"CONSTRUCTION":return e.coordinates.join(",")+e.pinType;case"MASSTRANSIT":return(e.balloonItems&&String(e.balloonItems.length)||"0")+("string"==typeof e.text?e.text:e.cacheText||"")+(e.dotSize||"")+(e.rotated||"")+e.pinType+e.coordinates.join(",")+e.pinIndex;case"ROUTEPOINT":return(String(e.index)||0)+(e.value||"")+e.pinType+(e.isLast&&"last");case"SPECIAL":return e.coordinates.join(",")+e.position+e.pinType}}var w=n(36581),E=n(78597),S=n(49297),C=n(111),k={ROUTEPOINT:"ROUTEPOINT",MASSTRANSIT:"MASSTRANSIT",CONSTRUCTION:"CONSTRUCTION",SPECIAL:"SPECIAL"},R=function(e){function t(t){var n;return(n=e.call(this,t)||this)._validityChecksCounter=0,n._processingTimeout=0,n._routeComponentProcessingFunction=function(e,t){var r;return 1===e.length?Promise.resolve(e):(r=e.sort(function(e,t){return e.pinIndex>t.pinIndex?1:-1}),n.props.algoSteps.reduce(function(e,n){return e.then(function(e){return e.optimized?e:t(e.pins,n)})},Promise.resolve({pins:r,optimized:!1}))).then(function(e){return e.pins})},n._updatePins=function(){n._validityChecksCounter=0,window.clearTimeout(n._processingTimeout),n._validateDrawing(n.props.unprocessedPins.map(function(e,t){return(0,r._)({pinIndex:t},e)}))},n._collectAndProcessGroups=function(e){var t=n.state.mapLocation,r=n.props.config;y(e,n.props.getNodeByPin,t,r).then(function(o){Promise.all((function(e){for(var t=Array(e.length).map(function(){return!1}),n=[],r=0;r<e.length;r++)if(!t[r]){var o=[r],i=[r];for(t[r]=!0;o.length>0;)for(var a=e[o.pop()],s=0;s<a.length;++s){var u=a[s];t[u]||(t[u]=!0,o.push(u),i.push(u))}n.push(i)}return n})(o).map(function(o){var i=o.map(function(t){return e[t]});return n._routeComponentProcessingFunction(i,function(e,o){return function e(t,n,r,o,i,a){return new Promise(function(s){if(1===t.length)s({pins:t,optimized:!0});else if(i>10)s({pins:t,optimized:!1});else{var u=n(t);_(u.pins,r,o,a).then(function(t){t?s({pins:u.pins,optimized:!0}):u.isFinished?u.isFinished&&s({pins:u.pins,optimized:!1}):s(e(u.pins,n,r,o,i++,a))})}})}(e,o,n.props.getNodeByPin,t,0,r)})})).then(function(e){var t=e.reduce(function(e,t){return e.concat(t)});n._validateDrawing(t)})})},n._updateMapLocation=function(){var e=n.props.map.zoom;.25>Math.abs(n.state.mapLocation.zoom-e)||n.setState({mapLocation:(0,S.cx)(n.props.map)})},n._onMapUpdate=function(){n._updateMapLocationThrottled()},n._validateDrawing=function(e){n._validityChecksCounter+=1;var t=n.props.filterPinsByZoom(e,n.state.mapLocation.zoom);if(n._validityChecksCounter>=2){n.setState({pinsToDraw:t});return}_(t,n.props.getNodeByPin,n.state.mapLocation,n.props.config).then(function(e){if(e){n.setState({pinsToDraw:t});return}n._processingTimeout=window.setTimeout(function(){return n._collectAndProcessGroups(t)},50)})},n.state={pinsToDraw:[],mapLocation:(0,S.cx)(n.props.map)},n._updateMapLocationThrottled=(0,C.Z)(n._updateMapLocation,300),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._validityChecksCounter=0,this._validateDrawing(this.props.unprocessedPins.map(function(e,t){return(0,r._)({pinIndex:t},e)}))},n.componentDidUpdate=function(e,t){(this.state.mapLocation.zoom!==t.mapLocation.zoom||this.props.unprocessedPins!==e.unprocessedPins)&&this._updatePins()},n.componentWillUnmount=function(){window.clearTimeout(this._processingTimeout)},n.render=function(){var e=this;return i.createElement(i.Fragment,null,this.state.pinsToDraw.map(function(t){var n=e.props.getMapPlacemarkProps(t);return n?i.createElement(w.Z,(0,r._)({key:function(e){switch(e.pinType){case"CONSTRUCTION":case"MASSTRANSIT":case"SPECIAL":return b(e);case"ROUTEPOINT":return(String(e.index)||0)+e.pinType+(e.isLast&&"last")}}(t)},n),e.props.getNodeByPin(t)):null}),i.createElement(c.Z,{onUpdate:this._onMapUpdate}))},t}(i.Component),x=(0,E.ZP)({shouldWait:!0})((0,a.ZP)(R)),P=n(51815),M=n.n(P),I=n(61146),T=n.n(I),Z=n(63129),D=n.n(Z),L=n(74210),A=n.n(L),z=n(97313),N=n(61111),U=n(57636),F=n(18188),O=n(32584),q=Object.entries(O.V).reduce(function(e,t){var n=(0,F._)(t,2),r=n[0],o=n[1];return e[r]=null==o?void 0:o.normal,e},{walk:"pedestrian-16-flip"}),B=n(85172),H=n(41057),W=(0,d.Z)("masstransit-route-pin-view"),j=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(e){var n=t.props,r=e||n.balloonItems&&n.balloonItems[0].stopId;r&&n.onClick&&n.onClick({coordinates:n.coordinates,id:r})},t._renderBalloonItem=function(e){var n,r="underground"===e.iconType&&e.transportSystemId,o=r?null==(n=O.x[e.transportSystemId])?void 0:n.small:"metro-exit"===e.iconType?void 0:q[e.iconType];return i.createElement(H.Z,{className:W("balloon-item",{type:e.iconType}),style:{backgroundColor:"underground"!==e.iconType?e.color:void 0},onClick:function(){return t._onClick(e.stopId)}},o?i.createElement(U.Z,{inline:!0,className:W("balloon-icon"),name:o,theme:r?t.props.theme:void 0}):null,e.text?i.createElement("div",{className:W("balloon-text"),style:{backgroundColor:e.color}},e.text):null)},t._renderBalloon=function(){var e=t.props.balloonItems;return e?i.createElement("div",{className:W("balloon")},t._renderBalloonItem(e[0]),e[1]?i.createElement(i.Fragment,null,i.createElement(U.Z,{name:"arrow-right-8-flip",className:W("arrow"),inline:!0}),t._renderBalloonItem(e[1])):null):null},t._renderText=function(){return t.props.text?i.createElement(H.Z,{tag:"span",className:W("text"),onClick:function(){return t._onClick()}},t.props.text):null},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.balloonItems&&t.balloonItems[t.balloonItems.length-1].color||t.dotColor,r=t.dotSize||"normal";return i.createElement("div",{className:W({rotated:t.rotated,double:t.balloonItems&&2===t.balloonItems.length,clickable:!!t.onClick})},i.createElement("div",{className:W("container")},i.createElement("div",{"aria-hidden":!0,className:W("dot",{size:r}),style:{background:n},onClick:function(){return e._onClick()}}),this._renderBalloon()),this._renderText())},t}(i.PureComponent),G=(0,B.ZP)((0,a.ZP)(j)),Y=n(59410),V=n(89318),X=n(75093),K=n.n(X),J=n(91034),$=n.n(J),Q=(0,d.Z)("waypoint-pin-view"),ee=function(e){function t(t){(n=e.call(this,t)||this)._getServiceIconUrl=function(){var e=n.props;return e.serviceType&&"geolocation"!==e.serviceType?V.Gr({type:"service",name:e.serviceType,size:e.mobileChooseMode?"normal":"small"},e.config):null},n._getRubricIconUrl=function(){var e,t,r=n.props;if(r.searchResult&&("categories"in r.searchResult&&r.searchResult.categories?e=null==(t=r.searchResult.categories[0])?void 0:t.class:"kind"in r.searchResult&&(e=r.searchResult.kind),e))return V.Gr({type:"rubrics",name:e,size:r.mobileChooseMode?"normal":"small"},r.config)||void 0},n._renderText=function(){if(!n.props.text)return null;var e=(0,Y.Z)(n.props.text,{length:40});return i.createElement("div",{className:Q("text",{hidden:n.props.hideText})},e.split(" ").map(function(e,t){return i.createElement("span",{key:t,className:Q("word")},e)}))},n._renderWaypoint=function(){var e=n.props,t=n.state;return i.createElement(i.Fragment,null,i.createElement(p.Z,{url:e.mobileChooseMode?$():K(),className:Q("pin-icon")}),i.createElement(p.Z,{url:t.currentIconUrl,key:t.currentIconUrl,className:Q("rubric-icon",{"mobile-choose":e.mobileChooseMode,current:!0,type:e.serviceType})}),t.temporaryIconUrl?i.createElement(p.Z,{url:t.temporaryIconUrl,key:t.temporaryIconUrl,className:Q("rubric-icon",{"mobile-choose":e.mobileChooseMode,temporary:!0})}):null,n._renderText())},n._renderIntermediatePoint=function(){var e=n.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:Q("content")},i.createElement("span",{className:Q("index")},e.index)),n._renderText())};var n,r=V.Gr({type:"rubrics",name:"fallback",size:t.mobileChooseMode?"normal":"small"},t.config),o=n._getServiceIconUrl()||n._getRubricIconUrl()||r;return n.state={temporaryIconUrl:null,currentIconUrl:o},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=this._getServiceIconUrl()||this._getRubricIconUrl();(t.serviceType||t.searchResult!==e.searchResult)&&n&&n!==this.state.currentIconUrl&&this.setState({temporaryIconUrl:this.state.currentIconUrl,currentIconUrl:n})},n.render=function(){var e=this.props,t=0===e.index,n=!t&&!e.isLast&&!e.mobileChooseMode;return"geolocation"===e.serviceType&&e.config.uatraits.isMobile?i.createElement("div",{className:Q({geolocation:!0})}):i.createElement("div",{className:Q({disabled:e.disabled,first:t,last:e.isLast,intermediate:n,"mobile-choose":e.mobileChooseMode})},n?this._renderIntermediatePoint():this._renderWaypoint())},t}(i.Component),et=(0,a.ZP)(ee),en=n(51898);function er(e){return e.find(function(e){return!!e.isRecommended})||e[0]}var eo=n(23363),ei=n(7418);function ea(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}function es(e){if(e.filter(function(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}).length<2)return{pins:e,isFinished:!0};var t=e.findIndex(function(e){return ea(e)}),n=(0,ei.Z)(e[t],{type:"STAIRS_UNKNOWN"});return{pins:e.filter(function(e){return!ea(e)}).concat(n),isFinished:!0}}function eu(e){if(e.filter(function(e){return"CONSTRUCTION"===e.pinType}).length<2)return{pins:e,isFinished:!0};var t=e.findIndex(function(e){return"CONSTRUCTION"===e.pinType});return{pins:e.filter(function(e){return"CONSTRUCTION"!==e.pinType}).concat(e[t]),isFinished:!0}}function ec(e){return{pins:e.filter(function(e){return"CONSTRUCTION"!==e.pinType}),isFinished:!0}}function el(e){return{pins:e.filter(function(e){return"MASSTRANSIT"!==e.pinType||"balloonItems"in e&&e.balloonItems||"dotSize"in e}),isFinished:!0}}function ed(e){var t=e.findIndex(function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems});if(-1!==t){var n=(0,l._)(e),r=n[t];return n[t]=(0,ei.Z)(n[t],{balloonItems:void 0,dotColor:r.balloonItems&&r.balloonItems[r.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0}),{pins:n,isFinished:!1}}return{pins:e,isFinished:!0}}function ep(e){return{pins:e.filter(function(e){var t;return"MASSTRANSIT"!==e.pinType||!e.balloonItems||(null==(t=e.balloonItems[0])?void 0:t.iconType)!=="metro-exit"}),isFinished:!0}}function em(e){var t=e_(e);return t?ey(t,e):{pins:e,isFinished:!0}}function ef(e){var t=e.reduce(function(e,t,n){return"MASSTRANSIT"===t.pinType?e.concat(n):e},[]);return ey(t.length>2?t.slice(0,3):t.slice(0,2),e)}function ev(e){var t=e_(e);return t?function(e,t){var n=(0,F._)(e,2),o=n[0],i=n[1],a=t[o],s=t[i];if("MASSTRANSIT"!==a.pinType||"MASSTRANSIT"!==s.pinType||!a.balloonItems||!s.balloonItems)return{pins:t,isFinished:!0};var u=a.balloonItems[0].initialText===s.balloonItems[0].initialText&&a.balloonItems[0].color===s.balloonItems[0].color;return t[i]=u?(0,ei.Z)(s,(0,r._)({},a,{pinIndex:s.pinIndex,rotated:!1})):(0,ei.Z)(s,{rotated:!1,text:"",balloonItems:[a.balloonItems[0],s.balloonItems[0]]}),{pins:t.filter(function(e){return e.pinIndex!==a.pinIndex}),isFinished:!1}}(t,e):{pins:e,isFinished:!0}}function eh(e){var t=e.findIndex(function(e,t,n){var r=n[t+1];return r&&"MASSTRANSIT"===e.pinType&&"MASSTRANSIT"===r.pinType&&("string"==typeof e.text?e.text===r.text:e.cacheText===r.cacheText)}),n=-1!==t?[e[t],e[t+1]]:[];return 2===n.length&&"MASSTRANSIT"===n[0].pinType&&"MASSTRANSIT"===n[1].pinType?n[0].balloonItems&&1===n[0].balloonItems.length&&n[1].balloonItems&&1===n[1].balloonItems.length&&n[0].balloonItems[0].color!==n[1].balloonItems[0].color?{pins:e,isFinished:!0}:{pins:(0,l._)(e.filter(function(e){return!n.includes(e)})).concat([n[1]]),isFinished:!0}:{pins:e,isFinished:!0}}function eg(e){return{pins:e.map(function(e){return"MASSTRANSIT"!==e.pinType||!e.balloonItems||2===e.balloonItems.length||e.first?e:"MASSTRANSIT"!==e.pinType||1!==e.balloonItems.length||e.first?e:(0,ei.Z)(e,{balloonItems:void 0,dotColor:e.balloonItems&&e.balloonItems[e.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0})}),isFinished:!0}}function ey(e,t){var n=e.map(function(e){return t[e].rotated?1:0}),r=Math.pow(2,n.length)-1,o=parseInt(n.join(""),2);return o<r?((o+1).toString(2).padStart(n.length,"0").split("").map(Number).map(Boolean).forEach(function(n,r){t[e[r]]=(0,ei.Z)(t[e[r]],{rotated:n})}),{pins:t,isFinished:!1}):{pins:t,isFinished:!0}}function e_(e){for(var t=e.map(function(e,t){return{pin:e,index:t}}).filter(function(e){var t=e.pin;return"MASSTRANSIT"===t.pinType&&t.balloonItems&&1===t.balloonItems.length}),n=[],r=1;r<t.length;r++)if(t[r-1].pin.pinIndex===t[r].pin.pinIndex-1){n.push(t[r-1],t[r]);break}return n.length>0?[n[0].index,n[1].index]:null}function eb(e){var t=e.findIndex(function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems&&2===e.balloonItems.length});if(-1===t)return{pins:e,isFinished:!0};var n=e[t];if("MASSTRANSIT"!==n.pinType||!n.balloonItems||2!==n.balloonItems.length)return{pins:e,isFinished:!0};var r={pinIndex:n.pinIndex-1,balloonItems:[n.balloonItems[0]],coordinates:n.balloonItems[0].initialCoordinates,last:!0,pinType:k.MASSTRANSIT,rotated:!1,text:n.balloonItems[0].initialText},o={pinIndex:n.pinIndex,balloonItems:[n.balloonItems[1]],coordinates:n.balloonItems[1].initialCoordinates,first:!0,pinType:k.MASSTRANSIT,rotated:!1,text:n.balloonItems[1].initialText},i=(0,l._)(e);return i.splice(t,1,r,o),{pins:i,isFinished:!1}}function ew(e){return{pins:(0,l._)(e).map(function(e){return(0,ei.Z)(e,{rotated:!1})}),isFinished:!0}}function eE(e){if(e.filter(function(e){return"ROUTEPOINT"===e.pinType&&e.value}).length>1){var t=e.findIndex(function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0!==e.index&&!e.isLast}),n=(0,l._)(e);if(-1!==t)return n[t]=(0,ei.Z)(n[t],{value:""}),{pins:n,isFinished:!1};var r=e.findIndex(function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0===e.index});if(-1!==r)return n[r]=(0,ei.Z)(e[r],{value:""}),{pins:n,isFinished:!0}}return{pins:e,isFinished:!0}}function eS(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return!("SPECIAL"===e.pinType&&"end"===e.position)}),isFinished:!0}}function eC(e){if(e.length<2)return{pins:e,isFinished:!0};var t=e.filter(function(e){return"SPECIAL"!==e.pinType||["RAILWAY_CROSSING","SPEED_BUMP","BORDER_CROSSING"].includes(e.type)}),n=e.filter(function(e){return"SPECIAL"===e.pinType&&"FERRY"===e.type}),r=e.filter(function(e){return"SPECIAL"===e.pinType&&"TOLL_ROAD"===e.type}),o=e.filter(function(e){return"SPECIAL"===e.pinType&&"FORD_CROSSING"===e.type}),i=e.filter(function(e){return"SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type});return n.length&&t.push(n[0]),r.length&&t.push(r[0]),o.length&&t.push(o[0]),i.length&&t.push(i[0]),{pins:t,isFinished:!0}}function ek(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return!("SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type)}),isFinished:!0}}function eR(e){return function(t){if(t.length<2)return{pins:t,isFinished:!0};var n=t.filter(function(t){return!("SPECIAL"===t.pinType&&t.type===e)});if(!n.length){var r=t.filter(function(e,t){return t%2==0});return{pins:r,isFinished:1===r.length}}return{pins:n,isFinished:!0}}}function ex(e){return 0===e.length?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return"SPECIAL"!==e.pinType}),isFinished:!0}}var eP=n(28182),eM=n.n(eP),eI=n(74039),eT=n.n(eI),eZ={FORD_CROSSING:{ru:{begin:"poi-alerts-ford-crossing-24x27",end:"poi-alerts-ford-crossing-end-24x27"}},RUGGED_ROAD:{ru:{begin:"poi-alerts-road-rugged-24x27",end:"poi-alerts-rugged-end-24x27"}},TOLL_ROAD:{ru:{begin:"poi-alerts-pay-wd-24x27",end:"poi-alerts-pay-wd-end-24x27"}},FERRY:{ru:{begin:"poi-alerts-ship-24x27",end:"poi-alerts-ship-end-24x27"}},RAILWAY_CROSSING:{ru:{single:"poi-alerts-railway-crossing-24x27"}},SPEED_BUMP:{ru:{single:"poi-alerts-speed-bump-24x27"}},BORDER_CROSSING:{ru:{single:"poi-alerts-border-24x27"}}},eD={STAIRS_UP:M(),STAIRS_DOWN:T(),STAIRS_UNKNOWN:D(),GATES:A()},eL=(0,d.Z)("route-pins-view"),eA=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updatePins=function(){n.setState({pins:(0,l._)(n._getRoutePointPins()).concat((0,l._)(n._getMasstransitPins()),(0,l._)(n._getConstructionPins()),(0,l._)(n._getSpecialRoadPins()))})},n._getUpdatedWaypointCoordinates=function(e,t){var r=n.props,o=r.routePoints.filter(function(e,t){return!r.viaIndexes.includes(t)})[t];return r.routePoints.map(function(t){return o===t?e:t.coords})},n._onDragStart=function(){n.props.setDragging(!0)},n._onDragMove=function(e,t){var r=n.props,o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!0})},n._onDragEnd=function(e,t){var r=n.props;r.setDragging(!1);var o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!1})},n._getMasstransitPins=function(){var e=n.props;return e.activeRoute&&"paths"in e.activeRoute?e.activeRoute.paths.reduce(function(t,n){var r,o,a;return t.concat((r=n.segments,o=e.config,a=function(e){if(!e)return null;var t,n,r=eo.U2(e,o),a=(null==(t=e.features)?void 0:t.cooled)?eT():(null==(n=e.features)?void 0:n.heated)?eM():void 0;return i.createElement(i.Fragment,null,e.name,e?i.createElement("span",{className:eL("masstransit-feature")},r,a?i.createElement(p.Z,{className:eL("masstransit-feature-icon"),url:a}):null):null)},r.reduce(function(e,t){if(!t.edgePoints||!t.transports)return e;var n,r,i=t.stops&&t.stops[0],s=t.stops&&t.stops[t.stops.length-1];return e.push({balloonItems:[eN(t.transports,t.edgePoints[0],i,o)],pinType:k.MASSTRANSIT,coordinates:t.edgePoints[0],rotated:!1,first:!0,text:a(i),cacheText:null==i?void 0:i.name},{pinType:k.MASSTRANSIT,dotColor:ez(t.transports),coordinates:t.edgePoints[1]}),(null==s?void 0:null==(r=s.exit)?void 0:r.name)&&e.push({pinType:k.MASSTRANSIT,balloonItems:[{iconType:"metro-exit",color:"#666",text:(n=s.exit).name,initialCoordinates:n.coordinates,initialText:n.name,stopId:null==s?void 0:s.id}],coordinates:s.exit.coordinates,rotated:!1,dotSize:"small",text:"Выход"}),e.push({pinType:k.MASSTRANSIT,balloonItems:[eN(t.transports,t.edgePoints[1],s,o)],coordinates:t.edgePoints[1],rotated:!1,last:!0,text:a(s),cacheText:null==s?void 0:s.name}),e},[])))},[]):[]},n._getMapPlacemarkProps=function(e){switch(e.pinType){case"CONSTRUCTION":return{coordinates:e.coordinates,zIndex:z.I.routes};case"MASSTRANSIT":return{coordinates:e.coordinates,zIndex:z.I.routePins.masstransit,blockEvents:!0};case"ROUTEPOINT":var t,r=n.props;if(!e.coords)return null;return{zIndex:0===e.index?z.I.routePins.waypoint+1:e.isLast?z.I.routePins.waypoint+2:z.I.routePins.waypoint,coordinates:e.coords,draggable:r.draggable&&!e.disabled&&(!r.draggableIndexes||(null==(t=r.draggableIndexes)?void 0:t.includes(e.index))),onDragStart:n._onDragStart,onDragEnd:function(t){var r=t.coordinates;return n._onDragEnd(r,e.index)},onDragMove:function(t){var r=t.coordinates;return n._onDragMove(r,e.index)}};case"SPECIAL":return{zIndex:z.I.routes,coordinates:e.coordinates}}},n._getConstructionPins=function(){var e=n.props;return e.activeRoute&&"constructions"in e.activeRoute?e.activeRoute.constructions.map(function(e){return(0,r._)({},e,{pinType:k.CONSTRUCTION})}):[]},n._getSpecialRoadPins=function(){var e=n.props;return e.activeRoute&&"specialRoadPoints"in e.activeRoute&&e.activeRoute.specialRoadPoints?e.activeRoute.specialRoadPoints.map(function(e){return(0,r._)({},e,{pinType:k.SPECIAL})}):[]},n._getRoutePointPins=function(){var e,t,o=n.props,i="taxi"===o.travelMode,a=(e=o.travelMode,t=o.config,e&&(0,en.M)(e,t)?t.routes.maxB2BCount:t.routes.maxCount),s=o.routePoints.every(function(e){return!e.coords||!!e.input})&&!o.isRoutePointDragging;return o.routePoints.filter(function(e,t){return!o.viaIndexes.includes(t)}).map(function(e,t,n){var o=i&&0!==t&&t!==n.length-1||t>=a-1&&t!==n.length-1;return(0,r._)({},e,{pinType:k.ROUTEPOINT,coordinates:e.coords||[0,0],disabled:o,showText:s,index:t,isLast:t===n.length-1})})},n._getConstructionNode=function(e){return i.createElement("div",{className:eL("construction",{type:e.type})},i.createElement(p.Z,{url:eD[e.type]}))},n._getSpecialRoadPinNode=function(e){var t=n.props.config,r=eZ[e.type];if(!r)return null;var o=r[t.lang],a=(0,V.XT)(t)?r.ru:r.en,s=r.ru;return i.createElement("div",{className:eL("special-road",{type:e.type,position:e.position})},i.createElement(U.Z,{name:(o||a||s)[e.position]}))},n._getMasstransitPinNode=function(e){var t=n.props,o=!t.activeRoute||"isIntercityRoute"in t.activeRoute&&t.activeRoute.isIntercityRoute||t.isMapEditing?void 0:t.onStopClick;return i.createElement(G,(0,r._)({},e,{onClick:o}))},n._getWaypointPinNode=function(e){return i.createElement(et,{text:e.value,hideText:!e.showText,index:e.index,isLast:e.isLast,disabled:e.disabled,searchResult:e.searchResult,serviceType:e.serviceType})},n._getRouteItemPinNode=function(e){switch(e.pinType){case"CONSTRUCTION":return n._getConstructionNode(e);case"MASSTRANSIT":return n._getMasstransitPinNode(e);case"ROUTEPOINT":return n._getWaypointPinNode(e);case"SPECIAL":return n._getSpecialRoadPinNode(e)}},n._getAlgoSteps=function(){var e=[es,eu,ec],t=n.props.activeRoute&&"masstransit"===n.props.activeRoute.type?[el,eh,em,ep,ew,em,ev,eg,eb,eg,ew,ef,ew,ed]:[],r=[eE],o=[eR("SPEED_BUMP"),eR("RAILWAY_CROSSING"),ek,eR("TOLL_ROAD"),eR("FERRY"),eR("FORD_CROSSING"),eS,eC,eR("BORDER_CROSSING"),ex];return(0,l._)(e).concat((0,l._)(t),(0,l._)(r),(0,l._)(o))},n._filterPinsByZoom=function(e,t){return e.filter(function(e){return!("SPECIAL"===e.pinType&&"SPEED_BUMP"===e.type&&t<12)})},n.state={pins:[]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){(this.props.activeRoute!==e.activeRoute||this.props.routePoints!==e.routePoints)&&this._updatePins()},n.componentDidMount=function(){this._updatePins()},n.render=function(){return i.createElement(i.Fragment,null,i.createElement(x,{unprocessedPins:this.state.pins,getNodeByPin:this._getRouteItemPinNode,getMapPlacemarkProps:this._getMapPlacemarkProps,algoSteps:this._getAlgoSteps(),filterPinsByZoom:this._filterPinsByZoom}),this.state.pins.filter(function(e){return e.pinType===k.ROUTEPOINT}).map(function(e){var t,n=e.uri||(null==(t=e.searchResult)?void 0:t.uri);return n?i.createElement(N.Z,{key:n,uri:n}):null}))},t}(i.Component);function ez(e){var t=er(e);return eo.Sm(t)}function eN(e,t,n,r){var o=er(e);return{iconType:o.type,color:ez(e),transportSystemId:o.transportSystemId,text:"underground"===o.type&&o.shortName?o.shortName:o.contour?o.contour.name:eo.AC(o.type)?eo.TX(o.type,r):o.name,initialCoordinates:t,initialText:null==n?void 0:n.name,stopId:null==n?void 0:n.id}}var eU=(0,a.ZP)(eA),eF=n(91260),eO=n(21840),eq=n(17316);function eB(e){return{type:"LineString",coordinates:e.coordinates||[]}}var eH=n(2267),eW=n(55877),ej=n.n(eW),eG=n(90585),eY=n(99870),eV=n(43410),eX=(0,eG.Z)(eV.Z,(0,E.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=ej().v4(),t.map.addGroup(n._dataSourceId,n._id,t.style,t.parentGroupId),n}(0,o._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.map.removeGroupAndChildren(this._dataSourceId,this._id)},n.render=function(){return i.createElement(eV.Q,{value:{parentGroupId:this._id}},this.props.children)},(0,eH._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||eY.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent)),eK={main:4,underlay:8,dash:[5,10]},eJ=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getStrokeStyleByType=function(e){return{simplifyPalette:!1,width:eK.main,dash:eK.dash,opacity:"undergroundWalk"===e?.5:1,palette:t.props.activeRoute.colorizeInfo.map(function(t){var n=t.type,r=t.count;return{color:n===e?"binding"===n?eq.uC:"#6000ff":eO.L,count:r}})}},t._getActiveStyle=function(){return[t._getStrokeStyleByType("undergroundWalk"),t._getStrokeStyleByType("walk"),t._getStrokeStyleByType("binding"),{width:eK.underlay,color:"#fff"}]},t._getInactiveStyle=function(){return[{width:eK.main,color:"#6d6d6d"},{width:eK.underlay,color:"#fff"}]},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(eX,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},i.createElement(eF.Z,{key:t.activeRoute.uuid,dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:this._getActiveStyle(),cursor:"default",zIndex:10},geometry:eB(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?t.inactiveRoutes.map(function(n){return i.createElement(eF.Z,{key:n.uuid,dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:e._getInactiveStyle(),cursor:"pointer"},geometry:eB(n),onFastClick:function(e,r){return t.onRouteClick(n,r.coordinates)}})}):null)},t}(i.Component),e$=n(84238),eQ=n(63966),e0=n.n(eQ),e1=n(73449),e2=n.n(e1),e4=n(68170),e3=n.n(e4),e8=n(61159),e7=n.n(e8),e6=n(2629),e5=n.n(e6),e9=n(30334),te=n.n(e9),tt=n(85767),tn=n.n(tt),tr=n(39990),to=n.n(tr),ti=n(74721),ta=n.n(ti),ts=n(81029),tu=n.n(ts),tc=n(43161),tl=n.n(tc),td=n(83984),tp=n.n(td),tm=n(94308),tf=n.n(tm),tv=n(27367),th=n.n(tv),tg=n(86605),ty=n.n(tg),t_=n(81148),tb=n.n(t_),tw=n(77994),tE=n.n(tw),tS=n(26093),tC=n.n(tS),tk=n(8872),tR=n.n(tk),tx=n(55583),tP=n.n(tx),tM={start:[e0()],middle:["",e2(),e3(),e7(),e5(),te(),tn(),to(),ta(),tu()].concat(Array(40).fill(tP())),finish:["",tl(),tp(),tf(),th(),ty(),tb(),tE(),tC(),tR()].concat(Array(40).fill(tR()))},tI=(0,a.ZP)(function(e){var t,n,r,o;return e.cursor?i.createElement(e$.Z,{src:(t=e.cursor,r=(n=(0,F._)(t.split("_"),2))[0],o=n[1],tM[r][Number(o)]),basePoint:[32,44]}):null}),tT={19:{main:8,underlay:12},18:{main:6,underlay:10},12:{main:4,underlay:8}};function tZ(e){return tT[e<=12?12:e<=18?18:19]}var tD="#737ce6",tL={stroke:[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}],cursor:"pointer"},tA=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getBicycleActiveDrawingStyle=function(){var e=t.props.mapLocation.zoom>=17,n={width:tZ(t.props.mapLocation.zoom).main,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(t){return{count:t.count,color:["PEDESTRIAN","PEDESTRIAN_UNDERGROUND"].includes(t.type)&&e||"BINDING"===t.type?eO.L:"AUTO"===t.type?tD:"#54b235"}})},r={width:4,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"BINDING"===e.type?eq.uC:eO.L}}),dash:[5,10]},o={width:e?4:0,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"PEDESTRIAN"===e.type?tD:eO.L}}),dash:[5,10]},i={width:e?4:0,opacity:.5,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"PEDESTRIAN_UNDERGROUND"===e.type?tD:eO.L}}),dash:[5,10]};return{stroke:[{width:1.5,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"BICYCLE"===e.type?"#fff":eO.L}}),dash:[2,4]},n,r,o,i,{width:tZ(t.props.mapLocation.zoom).underlay,color:"#fff"}],cursor:"default",zIndex:10}},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(eX,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:1}},i.createElement(eF.Z,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:this._getBicycleActiveDrawingStyle(),geometry:eB(e.activeRoute),onFastClick:function(t,n){return e.onRouteClick(e.activeRoute,n.coordinates)}}),e.inactiveRoutes?i.createElement(eX,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},e.inactiveRoutes.map(function(t){return i.createElement(eF.Z,{key:t.uuid,dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:tL,geometry:eB(t),onFastClick:function(n,r){return e.onRouteClick(t,r.coordinates)}})})):null)},t}(i.Component),tz=n(44953),tN=n(22712),tU=n(85087),tF=n(12690),tO=n(39029),tq=n(35645),tB=(0,d.Z)("mrc-map-icon-view"),tH=(0,tq.Z)(function(e){return i.createElement(w.Z,{disableRoundCoordinates:!0,coordinates:e.coordinates,nonInteractive:!e.onClick,zIndex:e.zIndex,onClick:e.onClick},i.createElement("div",{className:tB({type:e.type||"main"}),style:{transform:"rotate("+(e.direction?e.direction:0)+"deg)"},ref:e.forwardedRef?e.forwardedRef:null}))}),tW=n(36887),tj=n(13340),tG=(0,d.Z)("mrc-preview-balloon"),tY={main:20,side:20},tV=function(e){function t(t){var n;return(n=e.call(this,t)||this)._image=i.createRef(),n._onLoad=function(){n.setState({isPreviewLoaded:!0})},n._renderSpinner=function(){var e;return n.state.isPreviewLoaded||(null==(e=n._image.current)?void 0:e.complete)?null:i.createElement("div",{className:tG("placeholder")},i.createElement("div",{className:tG("spinner")},i.createElement(tW.Z,{view:"large"})))},n.state={isPreviewLoaded:!1},n}return(0,o._)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(tz.ZP,{name:"preview_balloon"},i.createElement("div",{ref:e.forwardedRef,className:tG()},i.createElement(tj.Z,{type:"transparent",coordinates:e.coordinates,position:"bottom-right",offset:tY,onClose:function(){},showArrow:!1,isShown:!0},i.createElement("div",{className:tG("balloon")},this._renderSpinner(),i.createElement("img",{ref:this._image,className:tG("image",{loaded:this.state.isPreviewLoaded}),src:e.image.url,onLoad:this._onLoad})))))},t}(i.Component),tX=(0,tq.Z)(tV),tK=n(28216),tJ=n(3705),t$=(0,n(70427).Z)(function(){return n.e("mrc").then(n.bind(n,35766))},{restorePlayerFromRoutes:!0,openPlayer:!0,closePlayer:!0,openSimilar:!0,closeSimilar:!0,changePathIndex:!0,fetchSimilar:!0,enableLayer:!0,disableLayer:!0,play:!0,pause:!0,setGraphType:!0,replaceChunkFeatures:!0,updatePhotoCache:!0}),tQ=function(){function e(){this._queue=[],this._isPending=!1}var t=e.prototype;return t._runNext=function(){var e=this;if(!this._isPending){var t=this._queue[this._queue.length-1];t&&(this._isPending=!0,t.runFn().finally(function(){e._isPending=!1,e._queue=e._queue.filter(function(e){return e.runFn!==t.runFn}),e._runNext()}))}},t.add=function(e,t){var n=this,r=!1;return{promise:new Promise(function(o,i){n._queue.push({runFn:function(){return r?Promise.resolve().then(i):e().then(o).catch(i)},meta:t}),n._runNext()}),abort:function(){r=!0}}},t.has=function(e){return!!this._queue.find(function(t){return e(t.meta)})},e}(),t0=new tQ,t1=new tQ,t2=function(e){var t,n,r,o;return t=(0,a.ZR)(),n=tK.I0(),i.useEffect(function(){var r=e.feature.chunkId;if(!(!r||t0.has(function(e){return e===r}))){var o=t0.add(function(){return tJ.CA({chunkId:r},t).catch(function(){return null})},r);return o.promise.then(function(t){if(t)n(t$.replaceChunkFeatures(r,t));else{var o=e.featureCollection.features.filter(function(e){return e.chunkId===r});n(t$.updatePhotoCache(o.map(function(e){return e.photoId}),[]))}}).catch(function(){}),function(){o.abort()}}},[]),r=(0,a.ZR)(),o=tK.I0(),i.useEffect(function(){if(!(e.feature.chunkId||e.feature.photo||t1.has(function(t){return t.includes(e.feature.photoId)}))){var t=function(e,t){for(var n=[],r=0;n.length<200;){var o=e-r,i=e+(r||1),a=t.features[o],s=t.features[i];if(!a||a.photo||a.chunkId||n.push(a.photoId),!s||s.photo||s.chunkId||n.push(s.photoId),o<=0&&i>=t.features.length-1)break;r++}return n}(e.featureCollection.features.findIndex(function(t){return t.photoId===e.feature.photoId}),e.featureCollection),n=t1.add(function(){return tJ.n(t,r).then(function(e){return e||[]}).catch(function(){return[]})},t);return n.promise.then(function(e){o(t$.updatePhotoCache(t,e))}),function(){n.abort()}}},[]),null},t4=n(12276),t3=function(e){function t(t){var n;return(n=e.call(this,t)||this)._leaveTimer=0,n._getNearestFeature=function(e){var t=n.props,r=(0,tU.Z)(t.featureCollection.features,function(t){var r=t4.Fg(t,n.props.featureCollection);return(0,tF.g)(r,e)});if(!r||r.photoId!==t.selectedFeatureId)return r},n._onClick=function(){var e=n.state.currentFeature;e&&n.props.onClick&&n.props.onClick(e.photoId),n.setState({currentFeature:null})},n._onMouseMove=function(e,t){var r=t.coordinates,o=(0,tO.x)(n.props.featureCollection.features.map(function(e){return t4.Fg(e,n.props.featureCollection)}),r,n.props.lineWidth,n.props.zoom);if(o&&!("point"in o)){var i=n._getNearestFeature(o);n.setState({currentFeature:i||null})}},n._onMouseEnter=function(){window.clearTimeout(n._leaveTimer)},n._onMouseLeave=function(){n._leaveTimer=window.setTimeout(function(){n.setState({currentFeature:null})},200)},n._renderPreview=function(){var e=n.state;if(!e.currentFeature)return null;if(!e.currentFeature.photo)return i.createElement(t2,{key:e.currentFeature.photoId,feature:e.currentFeature,featureCollection:n.props.featureCollection});var t=t4.Fg(e.currentFeature,n.props.featureCollection);return"placemark"===n.props.preview?i.createElement(tH,{coordinates:t,direction:e.currentFeature.photo.heading,type:"additional"}):i.createElement(tX,{coordinates:t,image:e.currentFeature.photo.imagePreview})},n.state={currentFeature:null},n._onMouseMove=(0,C.Z)(n._onMouseMove,16),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;if(this.props.featureCollection.features!==e.featureCollection.features&&this.state.currentFeature){var n=t4.Fg(this.state.currentFeature,this.props.featureCollection),r=this.props.featureCollection.features.find(function(e){var n;return(null==(n=t.state.currentFeature)?void 0:n.photoId)===e.photoId})||this._getNearestFeature(n)||null;this.setState({currentFeature:r})}},n.componentWillUnmount=function(){window.clearTimeout(this._leaveTimer)},n.render=function(){var e=this.props;return i.createElement(i.Fragment,null,e.children({onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick}),this._renderPreview())},t}(i.Component),t8=n(94960),t7={CLOSED:{color:"#333",border:"#000"},UNKNOWN:{color:"#b3b3b3",border:"#8e8e8e"},FREE:{color:"#47ca0b",border:"#2f8109"},LIGHT:{color:"#faff00",border:"#999c03"},HARD:{color:"#ff0003",border:"#9c0304"},VERY_HARD:{color:"#98201f",border:"#791918"}},t6={default:{underlay:8,main:6,border:void 0},colorize:{underlay:12,main:6,border:8}};function t5(e,t){var n,r,o=e.route,i=e.isDefaultColor,a=t.uatraits.isMobile?t6:eq.Gz,s=i?a.default:a.colorize;return{mainStyle:(n=o.colorizeInfo||[],i?{width:s.main,color:eq.Ly.main}:{width:s.main,palette:n.map(function(e){return{count:e.count,color:t7[e.type].color}})}),borderStyle:(r=o.colorizeInfo||[],i?{}:{width:s.border,palette:r.map(function(e){return{count:e.count,color:t7[e.type].border}})}),underlayStyle:{width:s.underlay,color:eq.Ly.underlay}}}function t9(e,t){var n=e.route,r=e.isActive,o=e.isDefaultColor;if(!r)return{stroke:[{width:eq.Gz.default.main,color:eq.Ly.inactive},{width:eq.Gz.default.underlay,color:eq.Ly.underlay}],cursor:"pointer"};var i=t5({route:n,isDefaultColor:o},t);return{zIndex:10,stroke:[i.mainStyle,i.borderStyle,i.underlayStyle],cursor:"default"}}var ne=(0,d.Z)("map-routes-auto-view"),nt=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getPoints=function(){var e=n.props;return e.activeRoute.refPointsLineCoordinates.map(function(t,r){return n.state.editingIndex===r?e.routePoints[r].coords:t})},n._getPointsWithVia=function(){return{points:n.props.routePoints.map(function(e){return e.coords}),isViaPoints:n.props.routePoints.map(function(e,t){return n.props.viaIndexes.includes(t)})}},n._getViaIndexesFromRefsWithVia=function(e){return e.map(function(e,t){return e?t:0}).filter(Boolean)},n._removeViaPoint=function(e){if(n.props.onRoutePointsChange){var t=n._getPointsWithVia(),r=t.points,o=t.isViaPoints;r.splice(e,1),o.splice(e,1),n.props.onRoutePointsChange(r,{viaIndexes:n._getViaIndexesFromRefsWithVia(o),isRough:!1})}},n._addViaPoint=function(e,t){if(n.props.onRoutePointsChange){var r=n._getPointsWithVia(),o=r.points,i=r.isViaPoints;o.splice(t,0,e),i.splice(t,0,!0),n.props.setDragging(!0),n.props.onRoutePointsChange(o,{viaIndexes:n._getViaIndexesFromRefsWithVia(i),isRough:!1})}},n._updateViaPoint=function(e,t,r){if(n.props.onRoutePointsChange){var o=n.props.routePoints.slice().map(function(e){return e.coords});o.splice(t,1,e),n.setState({editingIndex:r?t:void 0}),n.props.onRoutePointsChange(o,{viaIndexes:n.props.viaIndexes,isRough:r})}},n._getActiveRouteStrokeStyles=function(){var e=n.props;return t5({route:e.activeRoute,isDefaultColor:e.isDefaultColor},e.config)},n._onPointUpdate=function(e,t,r){n._updateViaPoint(e,t,!r),n.props.setDragging(!r)},n._onMapUpdate=function(){n.setState({mapAzimuth:n.props.map.azimuth})},n._renderPointElement=function(e){return n.props.activeRoute.refPointsLineCoordinates.reduce(function(e,t,r){return n.props.viaIndexes.includes(r)?e:e.concat(r)},[]).includes(e)?null:i.createElement("div",{className:ne("via-point")})},n._renderActiveRoute=function(e){var t=n.props,o=n._getActiveRouteStrokeStyles().underlayStyle.width,a=e?{onLineMouseEnter:e.onMouseEnter,onLineMouseMove:e.onMouseMove,onLineMouseLeave:e.onMouseLeave,onPreviewPointMouseLeave:e.onMouseLeave}:{};return i.createElement(tN.Z,(0,r._)({lineStyle:{stroke:[{width:o,opacity:0}],zIndex:12},polyLineCoordinates:t.activeRoute.coordinates||[],points:n._getPoints(),renderPointElement:n._renderPointElement,previewPointElement:i.createElement("div",{className:ne("via-point",{preview:!0})}),isActive:t.isEditorActive,onPointAdd:n._addViaPoint,onPointUpdate:n._onPointUpdate,onPointRemove:n._removeViaPoint,onPreviewPointClick:function(r,o){o&&n.props.onRouteClick(t.activeRoute,o.coordinates),null==e||e.onClick()}},a))},n._renderActiveMrcFeature=function(){var e=n.props;if(e.isMrcPlayerHidden||e.isLoading||"comparison"===e.travelMode||e.feedback&&"route/edit/better"===e.feedback.type||!e.mrcFeatureCollection||!e.activeMrcIndex&&0!==e.activeMrcIndex||e.isRoutePointDragging||!e.isMrcPlaying&&0===e.activeMrcIndex)return null;var t=e.mrcFeatureCollection.features[e.activeMrcIndex];if(!t.photo)return null;var r=t4.Fg(t,e.mrcFeatureCollection);return i.createElement(i.Fragment,null,i.createElement(tH,{coordinates:r,direction:t.photo.heading+(0,t8.Z)(n.state.mapAzimuth)}),i.createElement(c.Z,{onUpdate:n._onMapUpdate}))},n.state={mapAzimuth:t.map.azimuth},n}return(0,o._)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=this._getActiveRouteStrokeStyles().underlayStyle.width,o=(null==(e=n.feedback)?void 0:e.type)!=="route/edit/better"&&!n.config.uatraits.isMobile&&"comparison"!==n.travelMode;return i.createElement(i.Fragment,null,o?i.createElement(tz.ZP,{name:"mrc_route_thread",logClick:!0},i.createElement(t3,{featureCollection:n.mrcFeatureCollection||t4.qT([],[]),lineWidth:r,zoom:n.zoom,onClick:n.onMrcClick,preview:"balloon"},this._renderActiveRoute)):this._renderActiveRoute(),i.createElement(eX,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.7}},i.createElement(eF.Z,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:t9({route:n.activeRoute,isActive:!0,isDefaultColor:n.isDefaultColor},n.config),geometry:eB(n.activeRoute)}),n.inactiveRoutes?i.createElement(eX,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.86}},n.inactiveRoutes.map(function(e){return i.createElement(eF.Z,{key:e.uuid,dataSourceId:eY.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:t9({route:e,isActive:!1,isDefaultColor:n.isDefaultColor},n.config),geometry:eB(e),onFastClick:function(n,r){return t.props.onRouteClick(e,r.coordinates)}})})):null),n.config.uatraits.isMobile?null:this._renderActiveMrcFeature())},t}(i.Component),nn=(0,E.ZP)({shouldWait:!0})((0,a.ZP)(nt)),nr=[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}],no={main:4,dash:[5,10]},ni="#9d64fb",na=(0,d.Z)("map-routes-masstransit-view"),ns=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getStopPlacemarksData=function(){return t.props.activeRoute.paths.reduce(function(e,t){return e.concat(t.segments.reduce(function(e,t){if(!t.stops)return e;var n=t.stops.reduce(function(e,t){return t.coordinateOnRoute?e.concat([t.coordinateOnRoute]):e},[]);return n.shift(),e.concat({color:t.transports?nu(t.transports):void 0,coordinates:n})},[]))},[])},t._getColorForTransport=function(e){var n=t.props,r=e.type,o=e.segmentIndex;if(["walk","transfer","undergroundWalk","binding"].includes(r))return eO.L;var i=n.activeRoute.paths.reduce(function(e,t){return e.concat(t.segments)},[]);return o&&i[o]&&i[o].transports?nu(i[o].transports):eo.Lq(r)},t._getActiveDrawingStyle=function(){var e=t.props;return{cursor:"default",zIndex:10,stroke:[{simplifyPalette:!1,width:tZ(e.mapLocation.zoom).main,palette:e.activeRoute.colorizeInfo.map(function(e){return{color:t._getColorForTransport(e),count:e.count}})},{simplifyPalette:!1,width:no.main,dash:no.dash,opacity:.5,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:["undergroundWalk","transfer"].includes(t)?ni:eO.L,count:n}})},{simplifyPalette:!1,width:no.main,dash:no.dash,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:"walk"===t?ni:eO.L,count:n}})},{simplifyPalette:!1,width:no.main,dash:no.dash,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:"binding"===t?eq.uC:eO.L,count:n}})},{width:tZ(e.mapLocation.zoom).underlay,opacity:.9,color:"#fff"}]}},t._renderStopDots=function(){return t.props.mapLocation.zoom<14?null:t._getStopPlacemarksData().map(function(e,t){return e.coordinates.map(function(n,r){return i.createElement(w.Z,{key:t+"_"+r,coordinates:n,zIndex:z.I.default},i.createElement("div",{className:na("stop-dot"),style:{borderColor:e.color}}))})})},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(i.Fragment,null,i.createElement(eX,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS,style:{opacity:1}},i.createElement(eF.Z,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS,drawingStyle:this._getActiveDrawingStyle(),geometry:eB(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?i.createElement(eX,{dataSourceId:eY.UZ.DEFAULT_GRAPHICS,style:{opacity:.6}},t.inactiveRoutes.map(function(t){return i.createElement(eF.Z,{key:t.uuid,dataSourceId:eY.UZ.DEFAULT_GRAPHICS,drawingStyle:{cursor:"pointer",stroke:nr},geometry:eB(t),onFastClick:function(n,r){return e.props.onRouteClick(t,r.coordinates)}})})):null),this._renderStopDots())},t}(i.Component);function nu(e){var t=er(e);return eo.Sm(t)}var nc=(0,a.ZP)(ns);function nl(e,t,n){var r=Math.floor(e/86400),o=Math.floor(e/3600%24),i=Math.round(e/60%60);return 60===i&&(i=0,o++),24===o&&(o=0,r++),[r>0?Math.abs(r)+" дн.":"",o>0?Math.abs(o)+" ч":"",i>0&&(!n||0===r)?Math.abs(i)+" мин":""].filter(Boolean).join(" ")||"1 мин"}var nd=n(81194),np=(0,d.Z)("route-warning-icon-view"),nm={barrier:"snippet-barrier-20",blocked:"snippet-closed-20",ferries:"snippet-ferry-20",ford:"snippet-ford-crossing-20",general:"snippet-all-20","rugged-road":"snippet-bad-road-20",tolls:"snippet-paid-fallback-20",frontier:"snippet-border-20","railway-crossing":"snippet-railway-crossing-20-flip"},nf=function(e){return i.createElement("div",{className:np("wrapper",{text:!!e.text,type:e.type})},i.createElement(U.Z,{name:nm[e.type],className:np({type:e.type}),inline:!0}),i.createElement("div",{className:np("text")},e.text))},nv=n(37830),nh={pedestrian:"pedestrian-24-flip",bicycle:"bikes-24-flip",auto:"car-24",masstransit:"bus-24"},ng=(0,d.Z)("map-widget-routes-content-view"),ny=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n._renderContent=function(){switch(this.props.route.type){case"bicycle":case"pedestrian":case"masstransit":var e=nl(this.props.route.duration,this.props.config);return this._renderContentCommon(e,this.props.route.distance.text);case"auto":return this._renderContentAuto();default:return null}},n._renderRouteWarning=function(e){if("auto"===e.type){if(e.flags.blocked)return i.createElement(nf,{type:"blocked"});if(e.flags.hasTolls)return i.createElement(nf,{type:"tolls"})}return null},n._renderContentCommon=function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:ng("header")},i.createElement(U.Z,{name:nh[this.props.route.type],inline:!0,className:ng("icon")}),e,i.createElement("div",{className:ng("warning")},this._renderRouteWarning(this.props.route))),i.createElement("div",{className:ng("body")},t))},n._renderContentAuto=function(){let e;var t=this.props;if("auto"!==t.route.type)return null;var n=(e={duration:nl(t.route.duration,t.config),distance:t.route.distance.text}).distance+", без пробок: "+e.duration,r=nl(t.route.durationInTraffic,t.config),o=t.route.flags.blocked?"Проезд закрыт":r;return this._renderContentCommon(o,n)},n.render=function(){var e=nv.m(this.props.config);return i.createElement("div",{className:ng()},this._renderContent(),e?null:i.createElement(nd.Z,{view:"secondary-blue",size:"small",url:this.props.url,target:"_blank",isStretched:!0},"Подробнее"))},t}(i.Component),n_=(0,a.ZP)(ny),nb=n(91027),nw=n(93813),nE=n(13688),nS=n(15462),nC=n(6241),nk=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._lastChangedPointIndex=0,t._checkAndChangeBounds=function(){if((!t.props.routerResponse||0!==t.props.routerResponse.routes.length)&&(null==(e=t.props.config.mapWidget)?void 0:e.activeMode)==="routes"){var e,n,r,o=(null==(n=t.props.routerResponse)?void 0:n.routes[t.props.activeRouteIndex])||(null==(r=t.props.routerResponse)?void 0:r.routes[0]),i=null==o?void 0:o.bounds,a=t.props.routePoints.filter(function(e){return!!e.coords});if(0!==a.length){var s=a?u.o(a.map(function(e){return e.coords})):void 0,c=i||s;c&&t.props.onBoundsChange(c)}}},t._onRoutePointsChange=function(e){var n=t.props.routePoints.findIndex(function(t){return!!t.coords&&!e.includes(t.coords)});-1===n&&(n=e[t._lastChangedPointIndex]?t._lastChangedPointIndex:e.length-1),t._lastChangedPointIndex=n,t.props.updateRoutePoint({coords:e[n],value:""},n)},t._onMapClick=function(e,n){var r={coords:n.coordinates,value:"",input:""};t.props.updateRoutePoint(r,t.props.emptyPointIndex)},t._renderContent=function(){if(!t.props.content||!t.props.routerResponse||t.props.isRoutePointDragging)return null;var e,n,o=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0];if(!o)return null;var a=t.props.content.data.coordinates||(null==(n=o.coordinates)?void 0:n[Math.floor((null==(e=o.coordinates)?void 0:e.length)/2)]);if(!a)return null;var u=s.D({routePoints:t.props.routePoints,viaIndexes:t.props.routerResponse.viaIndexes||[],travelMode:t.props.routerResponse.type,activeRouteIndex:t.props.activeRouteIndex,routerResponse:null,detailedIndex:-1,settings:{auto:{ignoreTrafficJams:nS.a(t.props.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},t.props.config),c={l:t.props.isTrafficLayerEnabled?t.props.config.query.l||"trf":void 0},l=(0,nE._)(nw.e(nC.render("",(0,r._)({},u,c,{routes:{avoidTypes:void 0}})),t.props.config));return i.createElement(nb.Z,{coordinates:a,displayType:"balloon",mapLocation:t.props.mapLocation,onClose:t.props.resetContentData,offset:{main:3,side:3},mapSize:t.props.mapSize,key:o.uuid},i.createElement(n_,{route:o,url:l}))},t._renderRouteView=function(){if(!t.props.routerResponse||0===t.props.routerResponse.routes.length)return null;var e=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0],n=t.props.routerResponse.routes.filter(function(t){return t.uuid!==e.uuid});switch(e.type){case"pedestrian":return i.createElement(eJ,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick});case"bicycle":return i.createElement(tA,{activeRoute:e,inactiveRoutes:n,mapLocation:t.props.mapLocation,onRouteClick:t.props.onRouteClick});case"auto":return i.createElement(nn,{activeRoute:e,inactiveRoutes:n,viaIndexes:t.props.routerResponse.viaIndexes||[],routePoints:t.props.routePoints,zoom:t.props.mapLocation.zoom,feedback:null,isDefaultColor:!!t.props.isTrafficLayerEnabled||(e.colorizeInfo||[]).every(function(e){return"UNKNOWN"===e.type}),isLoading:!1,isEditorActive:!1,setDragging:nR,onRouteClick:t.props.onRouteClick});case"masstransit":return i.createElement(nc,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick,mapLocation:t.props.mapLocation});default:return null}},t._renderRoutePinsView=function(){var e,n,r,o=(null==(e=t.props.routerResponse)?void 0:e.routes[t.props.activeRouteIndex])||(null==(n=t.props.routerResponse)?void 0:n.routes[0])||null;return i.createElement(eU,{activeRoute:o,travelMode:null==o?void 0:o.type,routePoints:t.props.routePoints,viaIndexes:(null==(r=t.props.routerResponse)?void 0:r.viaIndexes)||[],draggable:!0,isRoutePointDragging:t.props.isRoutePointDragging,draggableIndexes:t.props.draggablePointIndexes,setDragging:t.props.setDragging,onRoutePointsChange:t._onRoutePointsChange})},t._renderRouteCursor=function(){return t.props.cursor?i.createElement(tI,{cursor:t.props.cursor}):null},t._renderMapListener=function(){return -1===t.props.emptyPointIndex?null:i.createElement(c.Z,{onClick:t._onMapClick})},t}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._checkAndChangeBounds()},n.componentDidUpdate=function(e){!e.routerResponse&&this.props.routerResponse&&this._checkAndChangeBounds()},n.render=function(){return i.createElement(i.Fragment,null,this._renderRouteView(),this._renderRoutePinsView(),this._renderRouteCursor(),this._renderMapListener(),this._renderContent())},t}(i.Component);function nR(){}var nx=(0,a.ZP)(nk)},41126:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Q});var r=n(18007),o=n(87363),i=n(34788),a=n(11640),s=n(11912);function u(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function c(e,t,n){void 0===n&&(n={});for(var r=0;r<e.length;r++){var o=e[r];if(o.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw Error("First and last Position are not equivalent.")}return u({type:"Polygon",coordinates:e},t,n)}function l(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function d(e,t){var n,r,o,i,a,s,u,c,l,d,p=0,m="FeatureCollection"===e.type,f="Feature"===e.type,v=m?e.features.length:1;for(n=0;n<v;n++){for(o=0,s=m?e.features[n].geometry:f?e.geometry:e,c=m?e.features[n].properties:f?e.properties:{},l=m?e.features[n].bbox:f?e.bbox:void 0,d=m?e.features[n].id:f?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1;o<a;o++){if(null===(i=u?s.geometries[o]:s)){if(!1===t(null,p,c,l,d))return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,c,l,d))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],p,c,l,d))return!1;break;default:throw Error("Unknown Geometry Type")}}p++}}function p(e){var t,n;return t=function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return m(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=m(e.coordinates[t]);return n}return 0}(t)},n=0,d(e,function(e,r,o,i,a){n=t(n,e,r,o,i,a)}),n}function m(e){var t=0;if(e&&e.length>0){t+=Math.abs(f(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(f(e[n]))}return t}function f(e){var t,n,r,o,i,a,s=0,u=e.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,o=u-1,i=0):a===u-1?(r=u-1,o=0,i=1):(r=a,o=a+1,i=a+2),t=e[r],n=e[o],s+=(v(e[i][0])-v(t[0]))*Math.sin(v(n[1]));s=40680631590769*s/2}return s}function v(e){return e*Math.PI/180}var h=n(65510);function g(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,i=t.length-1;o<t.length;i=o++){var a=t[o][0],s=t[o][1],u=t[i][0],c=t[i][1];if(e[1]*(a-u)+s*(u-e[0])+c*(e[0]-a)==0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(c-e[1])<=0)return!n;s>e[1]!=c>e[1]&&e[0]<(u-a)*(e[1]-s)/(c-s)+a&&(r=!r)}return r}function y(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!y(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}var _=function(e,t,n,r,o){this.coord=e,this.param=t,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=o},b=function(e,t,n,r,o,i,a){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=o,this.ringAndEdge1Walkable=i,this.ringAndEdge2Walkable=a};function w(e,t){if(void 0===t&&(t=!0),3!=e.length)throw Error("This function requires an array of three points [x,y]");return(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0])>=0==t}function E(e,t){if(!e||!t||e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!E(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}var S=function(e){var t,n=[];return t=function(e){"Polygon"===e.geometry.type&&function(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}(function(e){if("Feature"!=e.type)throw Error("The input must a geojson object of type Feature");if(void 0===e.geometry||null==e.geometry)throw Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=e.geometry.type)throw Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,n=[],r=0;r<t;r++){var o=e.geometry.coordinates[r];E(o[0],o[o.length-1])||o.push(o[0]),n.push.apply(n,o.slice(0,o.length-1))}if(!function(e){for(var t={},n=1,r=0,o=e.length;r<o;++r){if(Object.prototype.hasOwnProperty.call(t,e[r])){n=0;break}t[e[r]]=1}return n}(n))throw Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var i=n.length,a=function(e,t,n){if("Polygon"!==e.geometry.type)throw Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=e.geometry.coordinates,o=[],i={};if(n){for(var a=[],s=0;s<r.length;s++)for(var u=0;u<r[s].length-1;u++)a.push(v(s,u));var c=h();c.load(a)}for(var l=0;l<r.length;l++)for(var d=0;d<r[l].length-1;d++)if(n)c.search(v(l,d)).forEach(function(e){var t=e.ring,n=e.edge;f(l,d,t,n)});else for(var p=0;p<r.length;p++)for(var m=0;m<r[p].length-1;m++)f(l,d,p,m);return t||(o={type:"Feature",geometry:{type:"MultiPoint",coordinates:o}}),o;function f(e,n,a,s){var u,c,l=r[e][n],d=r[e][n+1],p=r[a][s],m=r[a][s+1],f=function(e,t,n,r){if(y(e,n)||y(e,r)||y(t,n)||y(r,n))return null;var o=e[0],i=e[1],a=t[0],s=t[1],u=n[0],c=n[1],l=r[0],d=r[1],p=(o-a)*(c-d)-(i-s)*(u-l);return 0===p?null:[((o*s-i*a)*(u-l)-(o-a)*(u*d-c*l))/p,((o*s-i*a)*(c-d)-(i-s)*(u*d-c*l))/p]}(l,d,p,m);if(null!==f&&(u=d[0]!==l[0]?(f[0]-l[0])/(d[0]-l[0]):(f[1]-l[1])/(d[1]-l[1]),c=m[0]!==p[0]?(f[0]-p[0])/(m[0]-p[0]):(f[1]-p[1])/(m[1]-p[1]),!(u>=1)&&!(u<=0)&&!(c>=1)&&!(c<=0))){var v=!i[f];v&&(i[f]=!0),t?o.push(t(f,e,n,l,d,u,a,s,p,m,c,v)):o.push(f)}}function v(e,t){var n,o,i,a,s=r[e][t],u=r[e][t+1];return s[0]<u[0]?(n=s[0],o=u[0]):(n=u[0],o=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:o,maxY:a,ring:e,edge:t}}}(e,function(e,t,n,r,o,i,a,s,u,c,l,d){return[e,t,n,r,o,i,a,s,u,c,l,d]}),s=a.length;if(0==s){for(var u=[],r=0;r<t;r++)u.push(c([e.geometry.coordinates[r]],{parent:-1,winding:function(e){for(var t,n,r=0,o=0;o<e.length-1;o++)e[o][0]<e[r][0]&&(r=o);if(w([e[((r-1)%(t=e.length-1)+t)%t],e[r],e[((r+1)%(n=e.length-1)+n)%n]],!0))var i=1;else var i=-1;return i}(e.geometry.coordinates[r])}));var d=l(u);return K(),J(),d}for(var m=[],f=[],r=0;r<t;r++){m.push([]);for(var v,S,C,k=0;k<e.geometry.coordinates[r].length-1;k++)m[r].push([new _(e.geometry.coordinates[r][((k+1)%(v=e.geometry.coordinates[r].length-1)+v)%v],1,[r,k],[r,((k+1)%(S=e.geometry.coordinates[r].length-1)+S)%S],void 0)]),f.push(new b(e.geometry.coordinates[r][k],[r,((k-1)%(C=e.geometry.coordinates[r].length-1)+C)%C],[r,k],void 0,void 0,!1,!0))}for(var r=0;r<s;r++)m[a[r][1]][a[r][2]].push(new _(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&f.push(new b(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));for(var R=f.length,r=0;r<m.length;r++)for(var k=0;k<m[r].length;k++)m[r][k].sort(function(e,t){return e.param<t.param?-1:1});for(var x=[],r=0;r<R;r++)x.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var P=h();P.load(x);for(var r=0;r<m.length;r++)for(var k=0;k<m[r].length;k++)for(var M=0;M<m[r][k].length;M++){T=M==m[r][k].length-1?m[r][((k+1)%(I=e.geometry.coordinates[r].length-1)+I)%I][0].coord:m[r][k][M+1].coord;var I,T,Z=P.search({minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]})[0];m[r][k][M].nxtIsectAlongEdgeIn=Z.index}for(var r=0;r<m.length;r++)for(var k=0;k<m[r].length;k++)for(var M=0;M<m[r][k].length;M++){var T=m[r][k][M].coord,Z=P.search({minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]})[0],D=Z.index;D<i?f[D].nxtIsectAlongRingAndEdge2=m[r][k][M].nxtIsectAlongEdgeIn:E(f[D].ringAndEdge1,m[r][k][M].ringAndEdgeIn)?f[D].nxtIsectAlongRingAndEdge1=m[r][k][M].nxtIsectAlongEdgeIn:f[D].nxtIsectAlongRingAndEdge2=m[r][k][M].nxtIsectAlongEdgeIn}for(var L=[],r=0,k=0;k<t;k++){for(var A=r,M=0;M<e.geometry.coordinates[k].length-1;M++)f[r].coord[0]<f[A].coord[0]&&(A=r),r++;for(var z=f[A].nxtIsectAlongRingAndEdge2,M=0;M<f.length;M++)if(f[M].nxtIsectAlongRingAndEdge1==A||f[M].nxtIsectAlongRingAndEdge2==A){var N=M;break}var U=w([f[N].coord,f[A].coord,f[z].coord],!0)?1:-1;L.push({isect:A,parent:-1,winding:U})}L.sort(function(e,t){return f[e.isect].coord>f[t.isect].coord?-1:1});for(var u=[];L.length>0;){var F=L.pop(),O=F.isect,q=F.parent,B=F.winding,H=u.length,W=[f[O].coord],j=O;if(f[O].ringAndEdge1Walkable)var G=f[O].ringAndEdge1,Y=f[O].nxtIsectAlongRingAndEdge1;else var G=f[O].ringAndEdge2,Y=f[O].nxtIsectAlongRingAndEdge2;for(;!E(f[O].coord,f[Y].coord);){W.push(f[Y].coord);for(var V=void 0,r=0;r<L.length;r++)if(L[r].isect==Y){V=r;break}if(void 0!=V&&L.splice(V,1),E(G,f[Y].ringAndEdge1)){if(G=f[Y].ringAndEdge2,f[Y].ringAndEdge2Walkable=!1,f[Y].ringAndEdge1Walkable){var X={isect:Y};w([f[j].coord,f[Y].coord,f[f[Y].nxtIsectAlongRingAndEdge2].coord],1==B)?(X.parent=q,X.winding=-B):(X.parent=H,X.winding=B),L.push(X)}j=Y,Y=f[Y].nxtIsectAlongRingAndEdge2}else{if(G=f[Y].ringAndEdge1,f[Y].ringAndEdge1Walkable=!1,f[Y].ringAndEdge2Walkable){var X={isect:Y};w([f[j].coord,f[Y].coord,f[f[Y].nxtIsectAlongRingAndEdge1].coord],1==B)?(X.parent=q,X.winding=-B):(X.parent=H,X.winding=B),L.push(X)}j=Y,Y=f[Y].nxtIsectAlongRingAndEdge1}}W.push(f[Y].coord),u.push(c([W],{index:H,parent:q,winding:B,netWinding:void 0}))}var d=l(u);function K(){for(var e=[],t=0;t<d.features.length;t++)-1==d.features[t].properties.parent&&e.push(t);if(e.length>1)for(var t=0;t<e.length;t++){for(var n=-1,r=1/0,o=0;o<d.features.length;o++)e[t]!=o&&function(e,t,n){if(void 0===n&&(n={}),!e)throw Error("point is required");if(!t)throw Error("polygon is required");var r=function(e){if(!e)throw Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw Error("coord must be GeoJSON Point or an Array of numbers")}(e),o="Feature"===t.type?t.geometry:t,i=o.type,a=t.bbox,s=o.coordinates;if(a&&!1==(a[0]<=r[0]&&a[1]<=r[1]&&a[2]>=r[0]&&a[3]>=r[1]))return!1;"Polygon"===i&&(s=[s]);for(var u=!1,c=0;c<s.length&&!u;c++)if(g(r,s[c][0],n.ignoreBoundary)){for(var l=!1,d=1;d<s[c].length&&!l;)g(r,s[c][d],!n.ignoreBoundary)&&(l=!0),d++;l||(u=!0)}return u}(d.features[e[t]].geometry.coordinates[0][0],d.features[o],{ignoreBoundary:!0})&&p(d.features[o])<r&&(n=o);d.features[e[t]].properties.parent=n}}function J(){for(var e=0;e<d.features.length;e++)if(-1==d.features[e].properties.parent){var t=d.features[e].properties.winding;d.features[e].properties.netWinding=t,function e(t,n){for(var r=0;r<d.features.length;r++)if(d.features[r].properties.parent==t){var o=n+d.features[r].properties.winding;d.features[r].properties.netWinding=o,e(r,o)}}(e,t)}}return K(),J(),d}(e),function(t){n.push(c(t.geometry.coordinates,e.properties))})},d(e,function(e,n,r,o,i){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(!1===t(u(e,r,{bbox:o,id:i}),n,0))return!1;return}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<e.coordinates.length;c++)if(!1===t(u({type:a,coordinates:e.coordinates[c]},r),n,c))return!1}),l(n)},C=n(31336),k=n(41886),R=n(48447),x=n(29657),P=n(41421),M=n(38067),I=n(65569),T=n(36581),Z=n(44748),D=n(97313),L=n(13340),A=n(81194),z=n(94507),N=n(44953),U=n(57636),F=(0,Z.Z)("ruler-balloon"),O={main:10,side:0},q={"delete-points":{title:"Удалить все точки?",description:"Чтобы удалить только одну точку, нажмите на неё дважды.",confirmation:"Удалить все"},close:{title:"Выключить линейку?",description:"Вы уверены, что хотите удалить все точки и выключить линейку?",confirmation:"Выключить"}},B=function(e){function t(t){var n;return(n=e.call(this,t)||this)._clearAndDisableRuler=function(){n.props.deletePoints(),n.props.isEnabled&&(null==n.props.switchRuler||n.props.switchRuler.call(n.props))},n._openPopup=function(e){n.setState({popupType:e})},n._closePopup=function(){n.setState({popupType:null})},n._clearRuler=function(){n.props.deletePoints()},n._renderPopup=function(){var e=n.state.popupType;if(!e)return null;var t=n.props;return o.createElement(L.Z,{coordinates:t.coordinates,position:["top","bottom","left","right"],offset:O,showArrow:!1,isShown:!0},o.createElement(N.ZP,{name:"popup",nodeState:{type:e}},o.createElement("div",{className:F("popup")},o.createElement("div",{className:F("title")},q[e].title),o.createElement("div",{className:F("description")},q[e].description),o.createElement("div",{className:F("buttons")},o.createElement("div",{className:F("confirm")},o.createElement(N.ZP,{name:"confirm",logClick:!0},o.createElement(A.Z,{ariaHidden:!0,view:"primary",size:"small",onClick:"delete-points"===e?n._clearRuler:n._clearAndDisableRuler},q[e].confirmation))),o.createElement("div",{className:F("cancel")},o.createElement(N.ZP,{name:"cancel",logClick:!0},o.createElement(A.Z,{ariaHidden:!0,view:"secondary-blue",size:"small",onClick:n._closePopup},"Отмена")))))))},n._renderTooltip=function(){return o.createElement("div",{className:F("tooltip-wrapper")},o.createElement("div",{className:F("tooltip")},o.createElement("div",{className:F("label")},I.jq(n.props.value,n.props.measure),"quadratic"===n.props.measure?"²":null),n._renderControls()))},n._renderControls=function(){return n.props.showControls?o.createElement(N.ZP,{name:"controls"},o.createElement("div",{className:F("controls")},o.createElement(z.Z,{text:"Удалить точки",position:"bottom",size:"s",isAir:!0},o.createElement(N.ZP,{name:"remove_all_points",logClick:!0},o.createElement("div",{className:F("icon",{type:"trash"}),onClick:function(){return n._openPopup("delete-points")}},o.createElement(U.Z,{name:"trash-12",className:F("icon-icon"),inline:!0})))),n.props.isEnabled?o.createElement(z.Z,{text:"Удалить точки и закрыть",position:"bottom",size:"s",isAir:!0},o.createElement(N.ZP,{name:"turn_off_ruler",logClick:!0},o.createElement("div",{className:F("icon",{type:"close"}),onClick:function(){return n._openPopup("close")}},o.createElement(U.Z,{name:"cross-small-12",className:F("icon-inner"),inline:!0})))):null,n.props.isEnabled?o.createElement(z.Z,{text:"Завершить редактирование",position:"bottom",size:"s",isAir:!0},o.createElement(N.ZP,{name:"stop_editing",logClick:!0},o.createElement("div",{className:F("icon",{type:"stop-editing"}),onClick:function(){return null==n.props.switchRuler?void 0:n.props.switchRuler.call(n.props)}},o.createElement(U.Z,{name:"done-12",className:F("icon-inner"),inline:!0})))):o.createElement(z.Z,{text:"Добавить точки",position:"bottom",size:"s",isAir:!0},o.createElement(N.ZP,{name:"start_editing",logClick:!0},o.createElement("div",{className:F("icon",{type:"stop-editing"}),onClick:function(){return null==n.props.switchRuler?void 0:n.props.switchRuler.call(n.props)}},o.createElement(U.Z,{name:"edit-12",className:F("icon-inner"),inline:!0})))))):null},n.state={popupType:null},n}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(T.Z,{coordinates:e.coordinates,zIndex:D.I.ruler+1,dataSourceId:e.dataSourceId,blockEvents:!0,draggable:e.draggable,cursor:e.draggable?"grab":void 0,onDragStart:e.onDragStart,onDragMove:e.onDragMove,onDragEnd:e.onDragEnd},o.createElement("div",{className:F()},this.state.popupType?this._renderPopup():this._renderTooltip()))},t}(o.Component),H=n(22712),W=n(99870),j=n(32241),G=n(91260),Y={stroke:[{color:"#666",width:3,opacity:.7},{color:"#fff",width:5,opacity:.7}],fillOpacity:0,simplificationRate:0,cursor:"pointer",zIndex:21},V={stroke:[{color:"#666",width:0,opacity:0}],fill:"#666",fillOpacity:.3,simplificationRate:0,cursor:"grab",zIndex:20},X=(0,Z.Z)("ruler-view"),K=function(e){function t(t){var n;if((n=e.call(this,t)||this)._referencePointPositions=[],n._getGeometryApproximateCenter=function(e){var t=(0,k.o)(e),n=(0,R.t)(t[0],t[1]);return(0,x.S)(t[0],n.startDirection,n.distance/2).endPoint},n._calcGeodesicLine=function(e){var t=(0,a._)(e),r=t[0],o=t.slice(1);return("area"===n.props.type&&r?(0,s._)(o).concat([r]):o).reduce(function(e,t){var n=e.pop();return n?(0,s._)(e).concat((0,s._)((0,P.b)((0,j.g)([n,t])))):e},r?[r]:[])},n._onPointAdd=function(e,t){n._updatePoints(t,e)},n._onPointUpdate=function(e,t){n._updatePoints(t,e,!0)},n._onPointRemove=function(e){n._updatePoints(e,void 0,!0)},n._calcArea=function(e){return e.length>2?function(e){var t={type:"Feature",properties:null,geometry:{type:"Polygon",coordinates:[e]}};try{var n=S(t);return p(n)}catch(r){return p(t)}}(n._calcGeodesicLine(e.map(function(e){return e.coordinates}))):0},n._updatePoints=function(e,t,r){if(n.props.onUpdate){var o=n.props.draggedPoints||n.props.points,a=o.slice(0,e);if(t&&a.push({coordinates:t,value:J(t,a[a.length-1]),showBalloon:o[e]&&o[e].showBalloon}),o.slice(e+(r?1:0)).forEach(function(e){a.push((0,i._)({},e,{value:J(e.coordinates,a[a.length-1])}))}),a.length>1){var s=n._getGeometryApproximateCenter(a.map(function(e){return e.coordinates}));s&&(n._referencePointPositions=a.map(function(e){return(0,R.t)(s,e.coordinates)}))}n.props.onUpdate(a,a)}},n._togglePointBalloon=function(e){if(n.props.onUpdate){var t=n.props.points,r=(0,i._)({},t[e],{showBalloon:!t[e].showBalloon}),o=(0,s._)(t.slice(0,e)).concat([r],(0,s._)(t.slice(e+1)));n.props.onUpdate(o)}},n._applyDragEvent=function(e){var t=n.props;if(t.onUpdate){var r=(t.draggedPoints||t.points).map(function(t,r){return(0,i._)({},t,{coordinates:(0,x.S)(e,n._referencePointPositions[r].startDirection,n._referencePointPositions[r].distance).endPoint})});t.onUpdate(t.points,r)}},n._onBalloonDrag=function(e){var t=n.props,r=t.draggedPoints||t.points,o=(0,R.t)(r[r.length-1].coordinates,e.coordinates),i=n._getGeometryApproximateCenter(r.map(function(e){return e.coordinates})),a=(0,x.S)(i,o.endDirection,o.distance).endPoint;n._applyDragEvent(a)},n._onFeatureDrag=function(e){if(n.props.onUpdate){var t=n._getGeometryApproximateCenter(e.coordinates[0]);t&&n._applyDragEvent(t)}},n._onFeatureDragStart=function(e){n.setState({isDragging:!0}),n._onFeatureDrag(e)},n._onFeatureDragEnd=function(e){n.setState({isDragging:!1}),n._onFeatureDrag(e)},n._renderBalloon=function(e,t){var r=t===n.props.points.length-1,i="area"===n.props.type;if(i&&!r||0===t||!e.showBalloon&&!r)return null;var a=i?n.state.area:e.value;return o.createElement(B,{key:t,coordinates:e.coordinates,value:a,measure:i?"quadratic":"linear",showControls:r,dataSourceId:n.props.isEnabled?W.UZ.EDITOR_MARKERS:void 0,isEnabled:n.props.isEnabled,switchRuler:n.props.switchRuler,deletePoints:n.props.deletePoints,draggable:i&&!!n.props.onUpdate,onDragStart:n._onBalloonDrag,onDragMove:n._onBalloonDrag,onDragEnd:n._onBalloonDrag})},n._renderPoint=function(){return o.createElement("div",{className:X("point")},o.createElement(U.Z,{name:"point-15"}))},n.state={geodesicLine:n._calcGeodesicLine(n.props.points.map(function(e){return e.coordinates})),area:n._calcArea(n.props.points),isDragging:!1},n.props.points.length>1){var r=n._getGeometryApproximateCenter(n.props.points.map(function(e){return e.coordinates}));r&&(n._referencePointPositions=n.props.points.map(function(e){return(0,R.t)(r,e.coordinates)}))}return n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){if(e.points!==this.props.points||e.type!==this.props.type||this.props.draggedPoints!==e.draggedPoints){var t=this.props.draggedPoints||this.props.points;this.setState({geodesicLine:this._calcGeodesicLine(t.map(function(e){return e.coordinates})),area:this._calcArea(t)})}},n.render=function(){var e=this.props.draggedPoints||this.props.points,t="area"===this.props.type;return o.createElement(o.Fragment,null,t?o.createElement(G.Z,{drawingStyle:(0,i._)({},V,{cursor:this.state.isDragging?"grabbing":"grab"}),geometry:{type:"Polygon",coordinates:[this.state.geodesicLine]},draggable:!!this.props.onUpdate,onDragStart:this._onFeatureDragStart,onDragMove:this._onFeatureDrag,onDragEnd:this._onFeatureDragEnd,dataSourceId:this.props.isEnabled?W.UZ.EDITOR_GRAPHICS:W.UZ.RASTER_GRAPHICS}):null,o.createElement(H.Z,{previewPointElement:o.createElement("div",{className:X("preview-point")}),renderPointElement:this._renderPoint,polyLineCoordinates:this.state.geodesicLine,points:e.map(function(e){return e.coordinates}),lineStyle:Y,isActive:!!this.props.onUpdate,onPointAdd:this._onPointAdd,onPointUpdate:this._onPointUpdate,onPointRemove:this._onPointRemove,onPointClick:this._togglePointBalloon,editorLayerOwner:this.props.isEnabled?"ruler":void 0}),e.map(this._renderBalloon))},t}(o.Component);function J(e,t){return t?t.value+(0,M.t)(e,t.coordinates):0}K.displayName="RulerComponent";var $=(0,C.ZP)(K),Q=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement($,{type:e.ruler.type,points:e.ruler.points,isEnabled:e.ruler.isEnabled,onUpdate:function(t){return e.updateRuler({points:t})},deletePoints:function(){return e.updateRuler({points:[]})},switchRuler:function(){return e.updateRuler({isEnabled:!e.ruler.isEnabled})}})},t}(o.Component)},96315:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,v:()=>u});var r=n(87363),o=n(44748),i=n(57636),a=n(81194),s=(0,o.Z)("map-widget-search-control-view"),u=s(),c=function(e){let t;return r.createElement("div",{className:s({checked:e.checked})},r.createElement(a.Z,{size:"small",view:"air-alt",checked:e.checked,icon:r.createElement(i.Z,{name:"search-24",inline:!0,className:s("icon")}),onClick:e.onClick},(t={count:e.resultsCount}).count+" "+(t.count%10==1&&t.count%100!=11?"найден":"найдено")))}},33369:(e,t,n)=>{"use strict";n.d(t,{x:()=>u});var r=n(34788),o=n(87363),i=n(95570),a=n(61111),s=n(22645),u={advert:void 0,brandingId:void 0};t.Z=function(e){var t,n=s.V(e.results.items),c=1===e.results.resultsCount?n[0]:void 0,l=e.results.exactResult||c;return o.createElement(o.Fragment,null,!l||(null==(t=e.hiddenResults)?void 0:t.find(function(e){return e.id===l.id}))?null:o.createElement(o.Fragment,null,o.createElement(i.Z,{key:l.id,result:(0,r._)({},l,u),coordinates:l.coordinates,mode:"subtitle",onClick:e.onPlacemarkClick}),l.uri?o.createElement(a.Z,{uri:l.uri}):null),n.filter(function(t){var n;return t.id!==(null==l?void 0:l.id)&&!(null==(n=e.hiddenResults)?void 0:n.find(function(e){return e.id===t.id}))}).map(function(t){var n=(0,r._)({},t,u);return o.createElement(i.Z,{key:t.id,result:n,coordinates:n.coordinates,mode:"base",onClick:e.onPlacemarkClick})}))}},23840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f,h:()=>m});var r=n(18188),o=n(87363),i=n(44748),a=n(94897),s=n(96315),u=n(50607),c=n(54062),l=(0,i.Z)("map-widget-search-result-list-container"),d={top:10,right:10},p={offset:{main:0,side:8},arrowOffset:110};function m(e){return e.width<=460}var f=function(e){var t=o.useRef(null),i=o.useRef(null),m=(0,r._)(o.useState(!1),2),f=m[0],v=m[1];if(o.useEffect(function(){return e.searchFormMode?n.e("map-widget-rich-client").then(n.bind(n,56113)).then(function(e){return new Promise(function(t,n){var r=0;!function o(){r>100&&n(),r++,i.current=document.querySelector("."+e.mapWidgetSearchFormClassName),i.current?t():setTimeout(o,1e3)}()})}).catch(function(){}).finally(function(){v(!0)}):(t.current=document.querySelector("."+s.v),v(!0)),function(){v(!1)}},[e.searchFormMode]),e.mapSize.width<=460)return o.createElement(o.Fragment,null,o.createElement(u.v7,null,o.createElement("div",{className:l("panel")},o.createElement(c.Z,{offset:d,onClick:e.onClose}),e.children)));var h=(0,r._)(e.searchFormMode?[i,p.offset,p.arrowOffset]:[t,void 0,void 0],3),g=h[0],y=h[1],_=h[2];return f?o.createElement(a.Z,{isShown:!0,getTarget:function(){return g.current},type:"normal",position:["bottom-left","bottom"],offset:y,arrowOffset:_,onClose:e.onClose},o.createElement("div",{className:l("popup"),style:{maxHeight:e.mapSize.height-110}},e.children)):null}},23936:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(87363),o=n(44748),i=n(39705),a=n(93813),s=n(31336),u=n(19382),c=n(57636),l=n(36887),d=n(34788),p=n(47868),m=n(5130),f=n(33611),v=(0,o.Z)("map-widget-search-result-list-item"),h=function(e){var t,n,o,i,a=(0,s.ZR)();return r.createElement("div",{className:v(),onClick:function(){e.onClick(e.item)}},"toponym"===e.item.type?(t=e.item,r.createElement(m.Z,{title:t.title,subtitle:t.description})):(n=e.item,i=p.lR(n,a),r.createElement(r.Fragment,null,r.createElement(m.Z,{title:e.item.title,subtitle:null==(o=n.categories)?void 0:o.slice(0,2).map(function(e){return e.name}).join(", ")}),r.createElement("div",{className:v("data")},r.createElement(f.Z,{result:n,disableLink:!0}),r.createElement("div",{className:v("time-label",(0,d._)({},i.state))},i.text)))))},g=n(22645),y=n(18188);function _(e,t){var n=(0,y._)(t,2),r=n[0],o=n[1];return e.reduce(function(e,t){return"string"!=typeof t?e.push(t):t.split(r).forEach(function(t,n){n>0&&e.push(o),e.push(t)}),e},[])}var b=(0,o.Z)("map-widget-search-result-list-view"),w=function(e){let t,n;var o,d,p,m,f,v=(0,s.ZR)(),y=(null!=(m=null==(d=e.searchResults)?void 0:d.totalResultCount)?m:0)-(null!=(f=null==(p=e.searchResults)?void 0:p.pageCount)?f:0);return r.createElement("div",{className:b()},e.searchDisplayText?r.createElement("div",{className:b("header")},(t={query:e.searchDisplayText,resultsCount:e.searchResultsCount}).resultsCount?t.resultsCount+" "+(t.resultsCount%10==1&&t.resultsCount%100!=11?"найден":"найдено")+" по запросу «"+t.query+"»":"Результаты поиска «"+t.query+"»"):null,r.createElement(u.Z,{width:"dynamic"},e.searchResults?r.createElement("div",null,g.V(e.searchResults.items).map(function(t){return r.createElement(h,{item:t,key:t.id,onClick:e.onListItemClick})})):null,e.isLoading?r.createElement("div",{className:b("spinner-container")},r.createElement(l.Z,{view:"small"})):e.searchResults&&y>0?r.createElement("div",{className:b("more"),onClick:e.onLoadMoreClick},"Показать ещё "+(n={count:Math.min(e.searchResults.requestResults,y)}).count+" "+(n.count%10==1&&n.count%100!=11?"результат":n.count%10>1&&n.count%10<5&&(n.count%100<10||n.count%100>20)?"результата":"результатов")):null,r.createElement("div",{className:b("footer")},r.createElement("div",{className:b("icon")},r.createElement(c.Z,{name:"super-search-24-flip",inline:!0})),r.createElement("span",{className:b("caption")},(o="Не нашли, что искали, — измените масштаб или __refineSearch",Object.entries({__refineSearch:function(){if(!e.searchRequest)return null;var t,n,o,s,u,c,l,d=(t=e.searchRequest.mapLocation,n=e.searchRequest.text,o=null==(l=e.searchRequest.chain)?void 0:l.id,s=e.searchDisplayText,u=e.searchRequest.filters,c=o?"text=chain_id:("+o+")":n?"text="+n:"",s&&c&&(c+="&display-text="+s),u&&(c+="&filter="+encodeURIComponent(u.join(";"))),"ll="+(0,i.s)(t.center)+"&spn="+(0,i.s)(t.span)+"&from=mapframe&"+c),p=a.e("/?"+d,v);return r.createElement("a",{className:b("link"),href:p,target:"_blank"},"уточните запрос")}()}).reduce(_,[o]).filter(function(e){return e}).map(function(e,t){return r.createElement("span",{key:t},e)}))))))}},93798:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(18007),o=n(87363),i=n(80129),a=n(39705),s=n(44748),u=n(31336),c=n(6241),l=n(96976),d=n(93813),p=n(13688),m=n(81194),f=n(59093),v=n(5130),h=(0,s.Z)("map-widget-toponym-content-view"),g=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getUrl=function(){var e,n=l.h(t.props.result,t.props.result.region,{skipPointCheck:!0});n||(n="?"+i.stringify({poi:{uri:null==(e=t.props.result)?void 0:e.uri,point:(0,a.s)(t.props.result.coordinates)}}));var r=(0,p._)(d.e("/"+n,t.props.config));return t.props.isTrafficLayerEnabled&&(r+="&l="+(t.props.config.query.l||"trf")),r},t._getInsideUrl=function(){var e=t.props.result.businesses&&t.props.result.businesses.totalResultCount>0,n=l.h(t.props.result,t.props.result.region,{skipPointCheck:!0},e?{sublanding:"inside"}:{});return(0,p._)(d.e("/"+n,t.props.config))},t._renderContent=function(){return"house"===t.props.result.kind?o.createElement(o.Fragment,null,o.createElement("div",{className:h("nearest-stops")},o.createElement(f.Z,{result:t.props.result})),o.createElement("div",{className:h("button-wrapper")},o.createElement(m.Z,{view:"primary",size:"small",isStretched:!0,url:t._getInsideUrl(),target:"_blank"},"Организации в доме"))):o.createElement("div",{className:h("button-wrapper")},o.createElement(m.Z,{view:"primary",size:"small",isStretched:!0,url:t._getUrl(),target:"_blank"},"Открыть в Картах"))},t._renderFeedbackUrl=function(){if(!t.props.result.uri)return null;var e,n=(e=t.props.result.uri,c.render("/",{feedback:"object/edit",ol:"geo",ouri:e})),r=d.e(n,t.props.config);return o.createElement("div",{className:h("button-wrapper")},o.createElement(m.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:r,target:"_blank"},"Сообщить об ошибке"))},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement("div",{className:h()},o.createElement("div",{className:h("title-wrapper")},o.createElement(v.Z,{title:e.result.title,titleUrl:this._getUrl(),subtitle:this.props.result.description})),this._renderContent(),this._renderFeedbackUrl())},t}(o.Component),y=(0,u.ZP)(g)},4307:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var r=n(18007),o=n(87363),i=n(31336),a=n(91027),s=n(44748),u=n(99802),c=n(59270),l=n(22370),d=(0,s.Z)("traffic-road-event-content-view"),p=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.event;if(!t.position)return null;var n=t.time_start_value||t.time_end_value,r=t.time_start_value&&t.tzOffset&&(0,l.wQ)(new Date(1e3*Number(t.time_start_value)),t.tzOffset)||void 0,i=t.time_end_value&&t.tzOffset&&(0,l.wQ)(new Date(1e3*Number(t.time_end_value)),t.tzOffset)||void 0;return o.createElement("div",{className:d()},o.createElement("div",{className:d("title")},(0,c.t0)(this.props.event)),t.description?o.createElement("div",{className:d("description"),dangerouslySetInnerHTML:{__html:t.description}}):null,n?o.createElement("div",{className:d("time"),dangerouslySetInnerHTML:{__html:r&&i?(0,u.o0)(r,e.config)+" &mdash; "+(0,u.o0)(i,e.config):r?(0,u.o0)(r,e.config):""}}):null,t.author&&t.link?o.createElement("div",{className:d("source")},o.createElement("span",{className:d("source-label")},"Источник"),o.createElement("a",{className:d("source-link"),href:t.link.href,target:"_blank"},t.author.name)):null)},t}(o.Component),m=(0,i.ZP)(p),f=n(15462),v=n(52869),h=n(24063),g=n(92830),y=n(22678),_=function(e){function t(t){var n,r,o;return(n=e.call(this,t)||this)._updateVersionFromStaticLayers=function(e){e.trf&&e.trfe&&n.setState({actualVersion:e.trf.version,roadEventsVersion:e.trfe.version})},n.state={actualVersion:null==(r=t.config.layers.trf)?void 0:r.version,roadEventsVersion:null==(o=t.config.layers.trfe)?void 0:o.version},n}(0,r._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),v.Z.cancel(this._loadStaticLayerAction)},n._shouldUpdateLayer=function(e){return e.mapLocation!==this.props.mapLocation},n._updateLayer=function(){e.prototype._updateLayer.call(this),this._updateStaticLayer()},n._onLayerLoad=function(e){var t=g.Z.actual.getLevel(e.timezone.ids,this.props.config);null==this.props.onLayerLoaded||this.props.onLayerLoaded.call(this.props,e),this._loadLevel(t)},n._updateStaticLayer=function(){v.Z.cancel(this._loadStaticLayerAction),this._loadStaticLayerAction=v.Z.create(h.Z.getLayers({layers:["trf","trfe"]},this.props.config),{success:this._updateVersionFromStaticLayers})},n.render=function(){var e=this.state;return this.props.children({actualVersion:e.actualVersion,roadEventsVersion:e.roadEventsVersion})},t}(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._updateTimer=-1,t._onLayerDataLoad=function(e){var n=t.props;if(!e||!e.timezone){n.onTrafficLevelChange(null);return}null==t._onLayerLoad||t._onLayerLoad.call((0,y._)(t),e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._updateLayer(),this._updateTimer=window.setInterval(function(){return e._updateLayer()},12e4)},n.componentDidUpdate=function(e){this._shouldUpdateLayer(e)&&this._updateLayer()},n.componentWillUnmount=function(){window.clearInterval(this._updateTimer),v.Z.cancel(this._loadLayerAction),v.Z.cancel(this._loadLevelAction)},n._loadLevel=function(e){v.Z.cancel(this._loadLevelAction);var t=this.props;this._loadLevelAction=v.Z.create(e,{success:function(e){return t.onTrafficLevelChange(e.level)},fail:function(){return t.onTrafficLevelChange(null)}})},n._updateLayer=function(){v.Z.cancel(this._loadLayerAction),this._loadLayerAction=v.Z.create(h.Z.getLayer({layer:"trf",center:this.props.mapLocation.center,zoom:this.props.mapLocation.zoom},this.props.config),{success:this._onLayerDataLoad})},t}(o.Component)),b=(0,i.ZP)(_),w=n(37048),E=n(90585),S=n(51457),C=n(73911),k=n(78510),R=n(99870),x=n(80129),P=n(4670),M=n(16911),I={getTimings:function(e,t){var n=RegExp("/tiles\\?.*l=("+e.join("|")+")"),r=M.Z.getResourcesTimings(function(e){return n.test(e)}).filter(function(e){var n=x.parse(e.name),r=[[256*Number(n.x),256*Number(n.y)],[(Number(n.x)+1)*256,(Number(n.y)+1)*256]];return(0,P.Y)(t,r)&&e.responseEnd<6e5&&e.responseEnd>0&&e.duration<6e5&&e.duration>=0});if(0!==(r=r.filter(function(e,t){var n=e.name;return r.findIndex(function(e){return e.name===n})===t})).length)return r.sort(function(e,t){return t.responseEnd-e.responseEnd}),{averageDuration:Math.round(r.reduce(function(e,t){return e+t.duration},0)/r.length),minLoadEnd:Math.round(r[r.length-1].responseEnd),medianaLoadEnd:Math.round(r[Math.floor(r.length/2)].responseEnd),maxLoadEnd:Math.round(r[0].responseEnd)}}},T=n(12574),Z=n(28216),D=n(34788),L=n(44953),A=n(42850),z=function(e){return e.ready?o.createElement(A.Z,{type:"timingNode"},o.createElement(L.ZP,{name:e.type,nodeState:(0,D._)({ready:e.ready},e.extraState)},e.children)):null},N=n(98109),U=Z.$j(function(e){return{config:e.config,isSidebarCollapsed:N.X(e)}}),F=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){if("distribution_fullscreen"===this.props.type){this.setState({ready:M.Z.getTimeToNow()});return}if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;("search-result"===e.config.pageMode||e.config.uatraits.isMobile&&"orgpage"===e.config.pageMode)&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":case"distribution_fullscreen":return"home";case"panorama_page":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,e.isSidebarCollapsed||this.setState({ready:M.Z.getTimeToNow()}))}},n.render=function(){var e=this.props.type;if("undefined"==typeof window)return null;var t=window._maps_internal_timingsMarks;return o.createElement(z,{type:e,ready:this.state.ready,extraState:{show:t&&e in t?t[e]:this.state.ready}})},t}(o.PureComponent);F.isTimingLogged=!1;var O=U(F),q=n(42454),B=n(69113),H=n(85172),W=(0,E.Z)(i.ZP,H.ZP)(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._memoizedCreateHotspotFetchFunction=(0,q.Z)(B.R),t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.config,n=t.hosts.roadEventsRenderer,r=n+"1.1/tiles?trf&%n&%l&%c&v=%v";return o.createElement(k.ZP,{layer:"trfe",dataSource:{type:"tile",vector:(0,R.x8)({priority:"medium",tileUrl:(0,R.pr)((n+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&v=%v&format=protobuf").replace("%n","l=trfe"),t.lang,e.roadEventsVersion),imageUrl:n+"icons?id={{id}}&scale={{scale}}",glyphRangeUrl:t.hosts.vectorGlyphs.replace("{{lang}}",t.lang),theme:(0,R.gh)(e.theme)},t),raster:{type:"ground",fetchTile:(0,R.pp)((0,R.pr)(r.replace("%n","l=trfe"),t.lang,e.roadEventsVersion),t),fetchHotspots:this._memoizedCreateHotspotFetchFunction((0,R.pp)((0,R.c1)((0,R.pr)(r.replace("%n","l=trje")+"&format=json",t.lang,e.roadEventsVersion),t),t)),transparent:!0},zoomRange:e.zoomRange},onClick:e.onClick})},t}(o.Component)),j=(0,E.Z)(i.ZP,H.ZP),G=!0,Y=j(function(e){function t(t){(n=e.call(this,t)||this)._onTilesReady=function(){if(!n.state.tilesReady){var e=n.props,t=(0,w.n)(e.mapLocation.bounds,e.mapLocation.zoom);if(n.setState({tilesReady:!0}),G){var r=I.getTimings(["trf"],t);r&&n.setState({tilesTimings:r}),G=!1}}},n._countTrafficModeChange=function(){S.Z.reachGoal("traffic")},n._renderLayer=function(){var e=n.props,t=e.config;if(!t.layers.trf)return null;var r=t.layers.trf.zoomRange?{min:t.layers.trf.zoomRange[0],max:t.layers.trf.zoomRange[1]}:void 0;if("traffic#actual"===e.providerKey){var i=t.hosts.traffic+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",a=t.hosts.traffic+"1.1/tiles?trf&%n&%l&%c&tm=%v";return o.createElement(o.Fragment,null,o.createElement(k.ZP,{layer:"trf",dataSource:{type:"tile",vector:(0,R.x8)({priority:"medium",tileUrl:(0,R.pr)(i.replace("%n","l=trf"),t.lang,e.actualVersion),imageUrl:t.hosts.traffic+"icons/{{id}}?scale={{scale}}&id={{id}}",theme:(0,R.gh)(e.theme)},t),raster:{type:"ground",fetchTile:(0,R.pp)((0,R.pr)(a.replace("%n","l=trf"),t.lang,e.actualVersion),t),transparent:!0},zoomRange:r}}),e.showRoadEvents?o.createElement(W,{onClick:e.onClick,zoomRange:r,roadEventsVersion:e.roadEventsVersion}):null)}return"traffic#archive"===e.providerKey?o.createElement(k.ZP,{layer:"trfa",dataSource:{type:"tile",raster:{type:"ground",fetchTile:(0,R.pp)((0,R.pr)(t.hosts.trafficArchive+"tiles?trj&l=trf&%l&%c&tm=%v",t.lang,e.archiveVersion),t),transparent:!0},vector:(0,R.x8)({priority:"medium",tileUrl:(0,R.pr)(t.hosts.trafficArchive+"2.x/tiles?trf&l=trf&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",t.lang,e.archiveVersion),imageUrl:t.hosts.trafficArchive+"icons?id={{id}}&scale={{scale}}",theme:(0,R.gh)(e.theme)},t),zoomRange:r}}):null};var n,r=t.config.query;return G=G&&r.l&&r.l.split(",").includes("trf"),n.state={tilesReady:!1},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._countTrafficModeChange()},n.componentDidUpdate=function(e){var t=this.props;e.providerKey!==t.providerKey&&this._countTrafficModeChange()},n.componentWillUnmount=function(){G=!1},n.render=function(){var e=this.props,t=this.state;return o.createElement(o.Fragment,null,o.createElement(T.Z,{onReady:this._onTilesReady}),this._renderLayer(),o.createElement(C.Z,{name:"traffic_layer",nodeState:{providerKey:e.providerKey}}),o.createElement(z,{type:"traffic_tiles",ready:t.tilesTimings?t.tilesTimings.averageDuration:void 0,extraState:t.tilesTimings}),this.state.tilesReady&&this.props.logTilesReady?o.createElement(O,{type:"traffic_page"}):null)},t}(o.Component)),V={main:16,side:0},X=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content?o.createElement(a.Z,{displayType:t._getDisplayType(),mapLocation:t.props.mapLocation,coordinates:t.props.content.data.coordinates,onClose:t.props.resetContentData,updateLocationRequest:t.props.updateLocationRequest,offset:V,mapSize:t.props.mapSize},o.createElement(m,{event:t.props.content.data.event})):null},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=f.W(e.config);return o.createElement(o.Fragment,null,o.createElement(b,{mapLocation:e.mapLocation,onTrafficLevelChange:e.onTrafficLevelChange},function(n){return o.createElement(Y,{providerKey:"traffic#actual",mapLocation:e.mapLocation,actualVersion:n.actualVersion,onClick:e.onClick,showRoadEvents:t,roadEventsVersion:n.roadEventsVersion})}),this._renderContent())},t}(o.Component),K=(0,i.ZP)(X)},39572:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(89318),u=n(33228),c=n(18692),l=n(91260),d=n(77600),p=n(57636),m=(0,i.Z)("user-maps-map-view"),f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._renderFeature=function(e,t,r){var i=n.props.config,a=(e.zIndex||r.length-t)+(t===n.state.hoveredIndex?r.length:0),d=!1;if("placemark"===e.type){if(e.content){if("text"===e.content.type)f=o.createElement("div",{className:m("text")},e.content.text);else if(null==(v=i.query.cnstr)?void 0:v[e.content.name]){var f,v,h=i.query.cnstr[e.content.name];f=o.createElement(p.Z,{name:h,className:m("icon")})}else{var g=s.y7(e.content.name),y="fallback"===e.content.name;g&&(d=!y,f=o.createElement(u.Z,{className:m("icon",{fallback:y}),url:g}))}}return o.createElement(c.Z,{key:t,coordinates:e.coordinates,zIndex:a,color:e.stroke&&e.stroke.color,onClick:function(){return n.props.onFeatureClick(t,e.coordinates)},onMouseEnter:function(){return n.setState({hoveredIndex:t})},onMouseLeave:function(){return n.setState({hoveredIndex:-1})},comma:e.isComma,caption:e.caption,size:d?"large":"medium",outline:!0},f)}return o.createElement(l.Z,{key:t,geometry:n._moveGeometryToZeroWorld(e.geometry),drawingStyle:{zIndex:a,cursor:n.props.cursor||"pointer",stroke:e.stroke?[e.stroke]:void 0,fill:"polygon"===e.type&&e.fill?e.fill.color:void 0,fillOpacity:"polygon"===e.type&&e.fill?e.fill.opacity:void 0,interactive:!!e.balloonCoordinates},onClick:function(e,r){return n.props.onFeatureClick(t,r.coordinates)}})},n.state={hoveredIndex:-1},n}(0,r._)(t,e);var n=t.prototype;return n._moveGeometryToZeroWorld=function(e){var t=1/0,n=-1/0;(0,d.ZE)(e,function(e){t=e[0]<t?e[0]:t,n=e[0]>n?e[0]:n});var r=-(360*Math.trunc((n+t)/360));return r?(0,d.ZE)(e,function(e){return[e[0]+r,e[1]]}):e},n.render=function(){return this.props.features.map(this._renderFeature)},t}(o.PureComponent),v=(0,a.ZP)(f),h=n(91027),g=(0,i.Z)("user-maps-balloon-content"),y=function(e){return o.createElement(o.Fragment,null,"placemark"===e.feature.type&&e.feature.caption&&e.showTitle?o.createElement("div",{className:g("title"),dangerouslySetInnerHTML:{__html:e.feature.caption}}):null,o.createElement("span",{dangerouslySetInnerHTML:{__html:e.feature.isTextInTitle?e.feature.title:e.feature.subtitle}}))},_=(0,i.Z)("map-widget-user-maps-content-view"),b=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){return this.props.feature.balloonCoordinates?o.createElement("div",{className:_()},o.createElement(y,{showTitle:!1,feature:this.props.feature})):null},t}(o.Component),w=(0,a.ZP)(b),E=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content&&(t.props.content.data.feature.isTextInTitle?t.props.content.data.feature.title:t.props.content.data.feature.subtitle)?o.createElement(h.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,displayType:t._getDisplayType(),onClose:t.props.resetContentData,mapSize:t.props.mapSize},o.createElement(w,{feature:t.props.content.data.feature})):null},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(v,{features:this.props.userMap.features,cursor:this.props.cursor,onFeatureClick:this.props.onFeatureClick}),this._renderContent())},t}(o.Component)},24063:(e,t,n)=>{"use strict";var r,o=n(34788),i=n(20224),a=n(77473),s=n.n(a),u=n(25164),c=n(39705),l={getLayers:function(e,t){var n=(r=r||{}).requests||[],o=n.push({layerIds:e.layers,center:e.center?(0,c.s)(e.center,{fractionDigits:8}):void 0,zoom:e.zoom&&Math.round(e.zoom),span:e.span?(0,c.s)(e.span,{fractionDigits:8}):void 0,locale:t.locale,lang:t.lang})-1,i=r.promise||new Promise(function(e,n){s()(function(){var o=r.requests;r=void 0,(0,u.Z)("layers/info",{query:{requests:o}},t).then(e).catch(n)})});return r={promise:i,requests:n},i.then(function(e){return e[o]})},getLayer:function(e,t){var n=e.layer,r=(0,i._)(e,["layer"]);return r.zoom&&!d(n,r.zoom,t)?Promise.resolve(void 0):l.getLayers((0,o._)({layers:[n]},r),t).then(function(e){return e[n]})},checkStaticZoomRange:d};function d(e,t,n){var r=n.layers[e];if(!r)return!0;var o="zoomRange"in r&&r.zoomRange;return!o||t>=o[0]&&t<=o[1]}t.Z=l},99870:(e,t,n)=>{"use strict";n.d(t,{mt:()=>_,pr:()=>b,c8:()=>C,Hi:()=>p,UZ:()=>l,Il:()=>d,se:()=>P,_I:()=>Z,Iw:()=>y,pp:()=>T,x8:()=>I,gh:()=>z,c1:()=>w});var r=n(34788),o=n(18188),i=n(80129),a=n.n(i),s=n(17451),u=n(69113),c=n(2315),l={DEFAULT_MARKERS:"defaultMarkers",DEFAULT_GRAPHICS:"defaultGraphics",DEFAULT_GRAPHICS_UNDER_BUILDINGS:"defaultGraphicsUnderBuildings",NIGHT_CIVIL_GRAPHICS:"nightCivilGraphics",NIGHT_NAVI_GRAPHICS:"nightNaviGraphics",NIGHT_ASTRO_GRAPHICS:"nightAstroGraphics",NIGHT_GRAPHICS:"nightGraphics",RASTER_GRAPHICS:"rasterGraphics",EDITOR_MARKERS:"editorMarkers",EDITOR_GRAPHICS:"editorGraphics"},d=":__customEventBlockerLayer",p=["map","sat","skl"],m=["map","sat"],f=["map","trf","trfe","trfa","stv","pht","indoor","carparks","mrc","mrcpe","personalizedPoi","directPoi","tile3d",l.DEFAULT_GRAPHICS,l.DEFAULT_GRAPHICS_UNDER_BUILDINGS],v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",h={map:function(e){var t=e.mapTiles,n=e.mapjTiles;return{url:S(t),hotspotsUrl:S(n)}},sat:function(e){return{url:S(e.satTiles)}},skl:function(e){var t=e.sklTiles,n=e.skljTiles;return{url:S(t),hotspotsUrl:S(n)}},stv:function(e){return{url:e.stvTiles.replace("l=stv","l=stv,sta")}},sta:function(e){return{hotspotsUrl:e.staHotspotTiles}},pht:function(e){var t=e.phtRenderer;return{url:t+"tiles?l=pht&%c&v=%v&%l&format=png",hotspotsUrl:t+"tiles?l=phj&%c&v=%v&%l&format=json"}},mrc:function(e){return{url:e.mrcTiles+"&camera-direction=front",hotspotsUrl:e.mrcHotspotTiles+"&camera-direction=front"}},mrcpe:function(e){return{url:e.mrcpeTiles+"&camera-direction=front",hotspotsUrl:e.mrcpeHotspotTiles+"&camera-direction=front"}},carparks:function(e){return{url:e.carparksTiles}},personalizedPoi:function(){return{}},directPoi:function(){return{}}},g=["map:ground","sat:ground","skl:ground","personalizedPoi:ground","directPoi:ground","trf:ground","trfe:ground","trfa:ground","carparks:ground","mrc:ground","mrcpe:ground","stv:ground","indoor:ground",l.DEFAULT_GRAPHICS_UNDER_BUILDINGS,"map:buildings","tile3d:buildings",l.DEFAULT_GRAPHICS,"map:icons","map:labels","personalizedPoi:icons","personalizedPoi:labels","directPoi:icons","directPoi:labels","trfe:icons","trfe:labels","carparks:icons","indoor:icons","indoor:labels","stv:icons","pht:icons","sta:ground","pht:ground",l.NIGHT_CIVIL_GRAPHICS,l.NIGHT_NAVI_GRAPHICS,l.NIGHT_ASTRO_GRAPHICS,l.NIGHT_GRAPHICS,l.RASTER_GRAPHICS,l.DEFAULT_MARKERS,d,l.EDITOR_GRAPHICS,l.EDITOR_MARKERS],y=["map","sat"];function _(e){var t,o,i,a,s=e.config,c=e.theme,d=e.modeFutureSelected,f=Object.keys(h).reduce(function(e,t){var o=s.layers["sta"===t?"stv":t],i=o&&o.zoomRange;return e[t]={type:"tile",raster:R(function(e,t,n,r){var o=h[e];if(!t||!o)return{type:"ground",fetchTile:v};var i=o(n.hosts),a=function(e){return L(b(e,n.locale,t.version),n)},s=["map","skl","carparks","stv","sta","mrc","mrcpe"].includes(e)?"&"+M(n):"",c=["map","stv","sta","pht","mrc","mrcpe","carparks"].includes(e)&&"dark"===r?"&theme=dark":"",l=i.url?A(a(i.url),s+c):v;return{type:"ground",fetchTile:"map"===e?D(l,n):l,fetchHotspots:i.hotspotsUrl?(0,u.R)(a(i.hotspotsUrl)+s):void 0,transparent:!m.includes(e),hotspotPadding:n.uatraits.isMobile?12:0}}(t,o,s,c),{alias:t,config:s,modeFutureSelected:d}),vector:R(function(e,t,o,i){if(t){var a=o.locale,s=o.hosts,c=o.experiments,l=o.uatraits.isMobile,d="directPoi"===e;if("personalizedPoi"===e||d){var p=o.experiments.ui.vectorVmap3,m=s.tilesApi+"personalized_poi/tiles?l="+(d?"personalized_poi_ads":"personalized_poi")+"&%l&v=%v&x={{x}}&y={{y}}&z={{z}}&zmin={{zmin}}&zmax={{zmax}}&service="+(l?"touch-maps":"desktop-maps"),f=p?{tileFormat:"vmap3",tileUrl:""+m+"&pbversion=3&experimental_pp_over_dj=prod",imageUrl:s.vectorVmap3Images,glyphRangeUrl:s.vectorVmap3Glyphs.replace("{{lang}}",a),fontObjectUrl:s.vectorFontObjects,fontListUrl:s.vectorFontList,styleUrl:s.vectorVmap3Styles}:{tileFormat:"vmap2",tileUrl:m,imageUrl:""+s.tilesApi+"personalized_poi/icons?id={{id}}&scale={{scale}}",glyphRangeUrl:""+s.tilesApi+"personalized_poi/glyphs?font_id={{fontId}}&range={{range}}"},v=d?c.ui.directPpoiLoadingPriority:c.ui.vectorPpoiLoadingPriority,h=d?c.ui.directPpoiCollisionPriority:c.ui.vectorPpoiCollisionPriority;return I((0,r._)({priority:v||"medium",collisionPriority:h||"medium",requestTileSize:"X4",tileBeltSize:d&&void 0!==c.ui.directPoiBeltSize?Number(c.ui.directPoiBeltSize):void 0,lowPrecisionBeltTiles:(!d||void 0===c.ui.directPoiBeltSize)&&void 0,cameraIdleThrottling:d&&void 0!==c.ui.directPoiThrottling?Number(c.ui.directPoiThrottling):void 0,theme:z(i),tileRequestWithCredentials:!0},f,{tileUrl:N(b(f.tileUrl,a,t.version),o,D,L)}),o)}if("carparks"===e){var g,y=(null==(g=o.mocks)?void 0:g.version)?"":"&v=%v";return I({priority:"medium",tileUrl:N(b(s.carparksTileRenderer+"tiles?version=2&l=carparks&%l"+y+"&x={{x}}&y={{y}}&z={{z}}",a,t.version),o,w,L),imageUrl:""+s.carparksTileRenderer+"icons?id={{id}}&scale={{scale}}",theme:z(i)},o)}if("stv"===e)return I({priority:"medium",tileUrl:L(b(""+s.stvTileRenderer+"tiles?l=sta,stv&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",a,t.version),o),imageUrl:""+s.stvTileRenderer+"icons?id={{id}}&scale={{scale}}",theme:z(i)},o);if("pht"===e)return I({priority:"medium",tileUrl:L(b(""+s.phtRenderer+"tiles?l=pht&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",a,t.version),o),imageUrl:""+s.phtRenderer+"icons?id={{id}}&scale={{scale}}",theme:z(i),iconsOnlyTiles:!0,lowPrecisionBeltTiles:!1,tileBeltSize:0,tileCacheSize:100},o);if("mrc"===e||"mrcpe"===e){var _="mrc"===e?s.mrcTiles:s.mrcpeTiles,S="mrc"===e?s.mrcHotspotTiles:s.mrcpeHotspotTiles;return I({priority:"medium",tileUrl:L(_.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front&format=protobuf",o),hotspots:{ground:(0,u.R)(S.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front")},theme:z(i)},o)}if("map"===e){var C=o.experiments.ui,k=C.vectorVmap3,R=C.vectorNoRichModels,P=C.vectorRichPointsEnabled,M=C.vectorHdModeEnabled,T=C.vectorMapType,Z=C.vectorTileCacheSize,A=k?{tileFormat:"vmap3",tileUrl:s.vectorVmap3Tiles,imageUrl:s.vectorVmap3Images,meshUrl:s.vectorVmap3Meshes,glyphRangeUrl:s.vectorVmap3Glyphs,richModelUrl:s.vectorVmap3RichModels,fontObjectUrl:s.vectorFontObjects,fontListUrl:s.vectorFontList,styleUrl:s.vectorVmap3Styles,indoorPlanUrl:s.vectorVmap3IndoorPlans,hdModeEnabled:M,mapType:T}:{tileFormat:"vmap2",tileUrl:s.vectorTiles,imageUrl:s.vectorImages,meshUrl:s.vectorMeshes,glyphRangeUrl:s.vectorGlyphs,richModelUrl:s.vectorRichModels},U=A.tileUrl.replace("{{lang}}",a).replace("v={{version}}",t.version?"v="+t.version:""),F=A.glyphRangeUrl.replace("{{lang}}",a),O=o.query.host_crowdtest_tiles?{tileRequestWithCredentials:!0,imageRequestWithCredentials:!0,meshRequestWithCredentials:!0,glyphRequestWithCredentials:!0,richModelRequestWithCredentials:!0}:{};return I((0,r._)({collisionPriority:"low",priority:"high",tileBeltSize:1,tileCacheSize:void 0!==Z?Number(Z):void 0,requestTileSize:l?"X1":"X4",richModelEnabled:!x(R),richPointEnabled:x(P),richModelDecoderWorkerUrl:"undefined"!=typeof window?o.baseUrl+new URL(n(1367),n.b).pathname:void 0,hotspots:{buildings:{minZoom:16.5}},theme:z(i)},A,O,{tileUrl:N(U,o,D,w,E,L),glyphRangeUrl:F}),o)}}}(t,o,s,c),{alias:t,config:s,modeFutureSelected:d}),clampMapZoom:p.includes(t),zoomRange:i?{min:i[0],max:i[1]}:void 0},e},{});return f.indoor=(t=s.hosts,o=s.locale,i=s.uatraits.isMobile,a=s.query.host_crowdtest_tiles?{tileRequestWithCredentials:!0,imageRequestWithCredentials:!0,meshRequestWithCredentials:!0,glyphRequestWithCredentials:!0,richModelRequestWithCredentials:!0}:{},{type:"tile",vector:I((0,r._)({collisionPriority:"low",priority:"low",requestTileSize:i?"X1":"X4",glyphRangeUrl:t.vectorIndoorGlyphs.replace("{{lang}}",o),imageUrl:t.vectorIndoorImages,meshUrl:t.vectorIndoorMeshes,tileUrl:D(t.vectorIndoorTiles.replace("{{lang}}",o),s),indoorPlanUrl:t.vectorIndoorPlans},a,{theme:z(c)}),s),zoomRange:{min:16.5,max:21}}),Object.keys(l).forEach(function(e){f[l[e]]={type:"geojson"}}),f}function b(e,t,n){return e.replace("%l","lang="+t).replace(/(v|tm)=%v/,n?"$1="+n:"").replace(/%d\|\d+/,function(e){return"{{"+e+"}}"}).replace(/%d/,"{{d|4}}").replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}")}function w(e,t){var n;return e+((null==(n=t.mocks)?void 0:n.version)?"&mocks%5Bversion%5D="+t.mocks.version:"")}function E(e,t){return(t.authorization||t.experiments.ui.personalizedPoiNoAuth)&&t.experiments.ui.poiVectorAuthExperimentalData?e+"&experimental_data_poi="+t.experiments.ui.poiVectorAuthExperimentalData:e}function S(e){return e.replace("%c","v=%v&%c")}function C(e,t,n){for(var r=e.filter(function(e,t,n){return n.indexOf(e)===t}).sort(function(t,n){var r=g.indexOf(t)-g.indexOf(n);return 0===r?e.indexOf(t)-e.indexOf(n):r}).reverse(),o=[],i=r.length-1;i>=0;i--){var a=r[i],s=a.split(":")[0];if(f.includes(s))o.push(a),r.splice(i,1);else break}return r.reverse(),{topRasterLayers:k(r,n).map(function(e){return e===d?{id:d,type:"custom",implementation:function(e){return"raster"===e.effectiveMode&&t}}:e===l.DEFAULT_MARKERS||e===l.EDITOR_MARKERS?{id:e,type:"markers",source:e}:e}),mainLayers:k(o,n)}}function k(e,t){var n,o,i,a={"map:buildings":{vector:{modelsAppearingAnimation:{duration:250}}},"tile3d:buildings":{vector:{parentLayerId:"map:buildings",modelsAppearingAnimation:{duration:250}}},"map:icons":i={vector:{iconsInteractiveArea:t&&(n=t.uatraits.isMobile,o=t.experiments.ui.vectorExtendTaps,n&&o?{field:10,minSize:40}:void 0)}},"indoor:icons":i,"trfe:icons":i,"stv:icons":i,"pht:icons":{vector:(0,r._)({},i.vector,{isolateObjectsColliding:!0})},"carparks:icons":i,"personalizedPoi:icons":i,"directPoi:icons":i};return e.map(function(e){return e in a?(0,c.F7)(e,a[e]):e})}function R(e,t){var n=t.config.experiments.ui.mapModeFuture;return e&&"map"===t.alias&&n&&t.modeFutureSelected?"fetchTile"in e?(0,r._)({},e,{fetchTile:""+e.fetchTile+"&maptype=future_map"}):(0,r._)({},e,{tileUrl:""+e.tileUrl+"&maptype=future_map"}):e}function x(e){if(void 0===e)return!1;if("string"==typeof e){var t=e.toLowerCase();return t.length>0&&"false"!==t&&"no"!==t&&"0"!==t}return e}function P(e){return g.filter(function(t){return t.startsWith(""+e+":")})}function M(e){var t=(0,r._)({},e.experiments.rendererParams||{});return Object.keys(e.query).forEach(function(n){n.startsWith("renderer_")&&(t[n.replace(/^renderer_/,"")]=e.query[n])}),a().stringify(t,{indices:!1})}function I(e,t){return(0,r._)({},e,{imageUrl:T(e.imageUrl,t),tileUrl:T(e.tileUrl,t),meshUrl:T(e.meshUrl,t),richModelUrl:T(e.richModelUrl,t),indoorPlanUrl:T(e.indoorPlanUrl,t),glyphRangeUrl:T(e.glyphRangeUrl,t),fontObjectUrl:T(e.fontObjectUrl,t),fontListUrl:T(e.fontListUrl,t),styleUrl:T(e.styleUrl,t)})}function T(e,t){if(!e)return e;var n=M(t),r=e.includes("?")?"&":"?";return e+r+n}function Z(e,t){var n,r,i,u,c,l,d=(0,s.wo)(e);return d.raster&&"string"==typeof d.raster.fetchTile&&(d.raster.fetchTile=(n=d.raster.fetchTile,r=t.raster,u=(i=(0,o._)(n.split("?"),2))[0],c=i[1],l=a().parse(c),u.includes(";base64")?u:(r?l.style=r:delete l.style,Object.values(l).length>0?[u,a().stringify(l,{encode:!1})].join("?"):u))),d.vector&&(d.vector.customization=t.vector),d}function D(e,t){return A(e,t.bunker.disableAdsMapTiles?"":"&ads=enabled")}function L(e,t){return A(e,"&client_id="+(t.isYango?"yango-web-maps":"yandex-web-maps"))}function A(e,t){return e.includes(";base64")?e:e+t}function z(e){return"dark"===e?"dark":void 0}function N(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return r.reduce(function(e,n){return n(e,t)},e)}},71682:(e,t,n)=>{"use strict";n.d(t,{zR:()=>g,M3:()=>y,p_:()=>m});var r,o=n(34788),i=n(3782),a=function(e,t,n){var r,o,a;return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=(0,i.Z)(n))==n?n:0),void 0!==t&&(t=(t=(0,i.Z)(t))==t?t:0),r=(0,i.Z)(e),o=t,a=n,r==r&&(void 0!==a&&(r=r<=a?r:a),void 0!==o&&(r=r>=o?r:o)),r},s=n(52869),u={linear:function(e){return e},easeOutCubic:function(e){return 1-Math.pow(1-e,3)},easeOutQuart:function(e){return 1-Math.pow(1-e,4)},easeInOutQuad:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},c=50*Math.PI/180;function l(e,t,n){void 0===n&&(n=1e-6);var r=e-t;return-n<r&&r<n}var d=function(e){return a(17.5+(e.size.y-800)*.0017857142857142857,17.5,18)},p=function(e,t,n,o,i,a){if(void 0===i&&(i=u.linear),!r){var c,l,d,p,m,f,v,h,g,y,_,b=(void 0===(c=i)&&(c=u.linear),m=e.worldCenter,f=e.zoom,v=e.tilt,h=e.azimuth,g=null!=(l=n.zoom)?l:e.zoom,y=null!=(d=n.tilt)?d:e.tilt,_=null!=(p=n.azimuth)?p:e.azimuth,e.animateForDuration(o,function(e,t){var r,o,i,a,s,u=c(t);return{worldCenter:n.worldCenter?(r=u,o=m,i=n.worldCenter,{x:(a=o.x)+(i.x-a)*r,y:(s=o.y)+(i.y-s)*r}):e.worldCenter,zoom:void 0!==n.zoom?f+(g-f)*u:e.zoom,tilt:void 0!==n.tilt?v+(y-v)*u:e.tilt,azimuth:void 0!==n.azimuth?h+(_-h)*u:e.azimuth}})),w=s.Z.create(b.complete,{success:function(){r=void 0,null==a||a()},fail:function(){r=void 0}});r={name:t,stop:function(){null==a||a(),b.stop(),w.cancel()}}}},m=function(e){e&&e!==(null==r?void 0:r.name)||(null==r||r.stop(),r=void 0)},f=function(e,t){var n=null==t?void 0:t.worldCenter;return!!n&&!(l(e.worldCenter.x,n.x)&&l(e.worldCenter.y,n.y)&&l(e.zoom,d(e))&&l(e.tilt,c))},v=function(e,t,n){void 0===t&&(t=!0);var r=t?6e4:59500;p(e,"flyover",{azimuth:e.azimuth+2*Math.PI*r/6e4},r,u.linear,n)},h=function(e,t,n,r){var o,i,a=u[n||"easeOutCubic"];p(e,"positioning",{worldCenter:t.worldCenter,zoom:null!=(o=null==t?void 0:t.zoom)?o:d(e),tilt:null!=(i=null==t?void 0:t.tilt)?i:c,azimuth:null==t?void 0:t.azimuth},500,a,r)},g=function(e,t,n){if(r&&m(),f(e,t)){var i=e.azimuth+2*Math.PI*500/6e4;h(e,(0,o._)({},t,{azimuth:i}),"linear",function(){v(e,!1,n)})}else v(e,!0,n)},y=function(e,t,n){r&&m(),h(e,t,"easeOutCubic",n)}},69113:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(34788),o=n(18188),i=n(2467);function a(e){var t=function(t,n,a,s){var u=e.replace("{{x}}",String(t)).replace("{{y}}",String(n)).replace("{{z}}",String(a)).replace("{{scale}}","1").replace(/\{\{d\|(\d+)\}\}/,function(e,r){return String((t+n+a)%Number(r)+1)});return(0,i.Z)({url:u,signal:s}).then(function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return[]}return!e||e.error&&404===e.error.code?[]:e.data.features.map(function(e){var t,n,i,a=e.properties.HotspotMetaData.RenderedGeometry;return{type:"rendered",feature:(n=e.properties.URIMetaData,{type:"Feature",id:(i=null==(t=e.properties.HotspotMetaData)?void 0:t.id)?String(i):"",geometry:e.geometry,properties:(0,r._)({},e.properties,{uri:(n&&n.URIs[0]||{}).uri})}),geometry:"Polygon"===a.type?{type:"Polygon",coordinates:a.coordinates.map(function(e){return e.map(function(e){var t=(0,o._)(e,2);return{x:t[0],y:t[1]}})})}:{type:"MultiPolygon",coordinates:a.coordinates.map(function(e){return e.map(function(e){return e.map(function(e){var t=(0,o._)(e,2);return{x:t[0],y:t[1]}})})})}}})})};return t.template=e,t}},49297:(e,t,n)=>{"use strict";n.d(t,{F0:()=>f,LY:()=>y,Ny:()=>h,$Y:()=>p,cx:()=>m,CM:()=>E,Oc:()=>v,gC:()=>b});var r=n(18188),o=n(11640),i=n(44330),a=n(37806),s=n(60309);function u(e,t){return[(0,s.W)(e[0],t),(0,s.W)(e[1],t)]}var c=n(15900),l=n(37048),d=n(48860);function p(e,t,n,r,o){void 0===r&&(r=!0);var s=e.center,u=e.zoom,c=e.span,l=e.bounds,d=b(n,t);if(!u){var p,m,y,_,w,E,S,C,k,R,x,P=l||(m=(p={center:s,span:c}).center,y=p.span,_=Math.min(Math.max(m[1]*Math.PI/180,-Math.PI/2+a.Qs),Math.PI/2-a.Qs),E=(w=Math.max(Math.min(y[1],180),0))*Math.PI/180,k=Math.max((C=((S=Math.exp(a.d3*Math.log(Math.tan(_/2+Math.PI/4))*2/a.d3))+1)*Math.tan(Math.min(Math.max(E/2,-Math.PI/2+a.Qs),Math.PI/2-a.Qs)))*C- -(4*S),0),R=(Math.atan((-C+Math.sqrt(k))/2*1)-Math.PI/4)*360/Math.PI,x=y[0]/2,[[(0,i.u)(m[0]-x),R],[(0,i.u)(m[0]+x),R+w]]);u=v(P,d,r,o),s=h(P)}return c=g(l=f(s,u,d)),{center:s,zoom:u,span:c,bounds:l}}function m(e){var t=[e.center[0],e.center[1]],n=e.size,r=b({width:n.x,height:n.y},e.margin),o=f(t,e.zoom,r),i=g(o);return{center:t,zoom:e.zoom,span:i,bounds:o}}function f(e,t,n){var o=(0,r._)((0,c.f)(e,t),2),i=o[0],a=o[1],u=[[i-n.width/2,a+n.height/2],[i+n.width/2,a-n.height/2]];return[(0,s.W)(u[0],t),(0,s.W)(u[1],t,!1)]}function v(e,t,n,r){void 0===r&&(r=0);var o=(0,l.n)(e,0),i=Math.max(Math.abs(o[1][0]-o[0][0]),1e-10),a=Math.max(Math.abs(o[1][1]-o[0][1]),1e-10),s=Math.min(Math.max(0,Math.min(_(t.width/i),_(t.height/a))),23);return n?Math.floor(s+r+1e-10):Math.round(100*s)/100}function h(e){var t,n,o,i,a,u,c,d;return t=[0,0,0,0],n=(0,r._)((0,l.n)(e,23),2),i=(o=(0,r._)(n[0],2))[0],a=o[1],c=(u=(0,r._)(n[1],2))[0],d=u[1],(0,s.W)([(i+c-0)/2,(a+d-0)/2],23)}function g(e){var t=(0,r._)(e,2),n=(0,r._)(t[0],2),o=n[0],i=n[1],a=(0,r._)(t[1],2),s=a[0],u=a[1];return[Math.abs(s-o),(0,d.d)(u,i,i+360)-i]}function y(e,t){var n=(0,l.n)(e,23),r=(0,l.n)(t,23);return u([[Math.min(n[0][0],r[0][0]),Math.min(n[0][1],r[0][1])],[Math.max(n[1][0],r[1][0]),Math.max(n[1][1],r[1][1])]],23)}function _(e){return Math.log(e)*Math.LOG2E}function b(e,t){return{width:Math.max(e.width-(t?t[1]+t[3]:0),1),height:Math.max(e.height-(t?t[0]+t[2]:0),1)}}function w(e){var t=(0,o._)(e),n=t[0];return t.slice(1).reduce(function(e,t){var n,r;return n=(0,l.n)(e,23),r=(0,c.f)(t,23),u([[Math.min(n[0][0],r[0]),Math.min(n[0][1],r[1])],[Math.max(n[1][0],r[0]),Math.max(n[1][1],r[1])]],23)},[n,n])}function E(e){var t,n,r;return"MultiPolygon"===e.geometry.type?e.geometry.coordinates.map(function(e){var t=(0,o._)(e),n=t[0];return t.slice(1).reduce(function(e,t){return y(e,w(t))},w(n))}).reduce(y):(t=e.geometry.coordinates,r=(n=(0,o._)(t))[0],n.slice(1).reduce(function(e,t){return y(e,w(t))},w(r)))}},78597:(e,t,n)=>{"use strict";n.d(t,{Ib:()=>a,Sx:()=>s});var r=n(34788),o=n(87363),i=o.createContext({});i.displayName="mapContext";var a=i.Provider;function s(){return o.useContext(i)}t.ZP=function(e){return void 0===e&&(e={}),function(t){var n=function(n){return o.createElement(i.Consumer,null,function(i){var a=i.map,s=i.ymaps3;return e.shouldWait&&!a?null:o.createElement(t,(0,r._)({},n,{map:a,ymaps3:s}))})};return n.displayName="mapContext("+t.displayName+")",n}}},67677:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=n(11640),o=n(45731);function i(e){return e.split("~").reduce(function(e,t){var n=(0,r._)(t.split(",")),i=n[0],a=n[1],s=n[2],u=n.slice(3),c=(0,o.P)(i+","+a);return a&&!(u.length>0)&&c&&e.push({coordinates:c,color:s}),e},[])}},18898:(e,t,n)=>{"use strict";n.d(t,{fL:()=>d,AK:()=>p,lp:()=>m,Cm:()=>f,Hm:()=>c,zn:()=>s});var r=n(75766),o=n(34788),i=n(48860),a=n(30141),s=400,u=(0,a.u)("ease-in-out"),c=7;function l(e,t,n,i){void 0===i&&(i={});var a=i.cb,c=i.duration,l=e[n];if(l!==t){var d=t-l;e.animateForDuration(null!=c?c:s,function(e,t){return(0,o._)({},e,(0,r._)({},n,l+d*u(t)))}).complete.then(a,a)}}function d(e,t){var n,r=t.cb,o=t.duration;n=0===e.azimuth?-Math.PI/4:e.azimuth<Math.PI?0:2*Math.PI,l(e,n,"azimuth",{cb:r,duration:o})}function p(e,t){void 0===t&&(t={});var n=t.cb,r=t.duration,o=e.tilt===e.tiltRange.min?e.tiltRange.max:e.tiltRange.min;l(e,o,"tilt",{cb:n,duration:r})}function m(e,t,n){void 0===n&&(n={});var r=n.duration,o=n.cb,i=Math.max(e.tiltRange.min,Math.min(t,e.tiltRange.max));l(e,i,"tilt",{duration:r,cb:o})}function f(e,t,n){void 0===n&&(n={});var r=n.duration,o=n.cb,a=(0,i.d)(t,0,2*Math.PI);l(e,a<Math.PI?a:-2*Math.PI+a,"azimuth",{duration:r,cb:o})}},32241:(e,t,n)=>{"use strict";function r(e){if(0===e.length)return[];for(var t=[e[0]],n=0,r=e[0],o=1;o<e.length;o++){var i=e[o],a=i[0]+n-r[0];if(a>360||a<-360){var s=360*Math.floor(a/360);n-=s,a-=s}a>180?n-=360:a<-180&&(n+=360);var u=[i[0]+n,i[1]];t.push(u),r=u}return t}n.d(t,{g:()=>r})},13340:(e,t,n)=>{"use strict";var r=n(34788),o=n(18007),i=n(20224),a=n(87363),s=n(36581),u=n(12574),c=n(94897),l=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._ref=a.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,o=(0,i._)(t,["coordinates"]);return a.createElement(a.Fragment,null,a.createElement(s.Z,{coordinates:n,nonInteractive:!0},a.createElement("div",{ref:this._ref}),a.createElement(c.Z,(0,r._)({type:"balloon"},o,{getTarget:function(){return e._ref.current}}),o.children)),a.createElement(u.Z,{onUpdate:o.isShown?this._onMapUpdate:void 0}))},t}(a.PureComponent);t.Z=l},18692:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(20224),o=n(87363),i=n(44748),a=n(36581),s=n(33228),u=n(69085),c=n.n(u),l=n(90870),d=n.n(l),p=(0,i.Z)("map-circle-placemark"),m=function(e){var t=e.color,n=e.size,i=e.comma,u=e.caption,l=e.outline,m=(0,r._)(e,["color","size","comma","caption","outline"]);return o.createElement(a.Z,m,o.createElement("div",{className:p({comma:i,size:void 0===n?"medium":n,outline:l}),style:{color:t}},o.createElement(s.Z,{className:p("placemark"),url:i?d():c()}),o.createElement("div",{className:p("content")},e.children),u?o.createElement("div",{className:p("caption")},u):null))}},57031:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(55877),a=n.n(i),s=n(78597),u=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._uuid=a().v4(),t._getCollidingPrimitiveId=function(e){return t._uuid+":"+e.id},t._getCollidingPrimitives=function(e){var n=new Map;return e.forEach(function(e){n.set(t._getCollidingPrimitiveId(e),{anchor:e.anchor,rect:{minX:e.pixelSize[0][0],minY:e.pixelSize[0][1],maxX:e.pixelSize[1][0],maxY:e.pixelSize[1][1]}})}),n},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._getCollidingPrimitives(e.placemarks);e.map.addInvisibleCollidingPrimitives(t)},n.shouldComponentUpdate=function(){return!this.props.preventUpdates},n.componentDidUpdate=function(){var e=this,t=this.props,n=t.map.getInvisibleCollidingPrimitives(),r=[],o=this._getCollidingPrimitives(t.placemarks);n.forEach(function(t,n){n.startsWith(e._uuid+":")&&r.push(n)}),t.map.removeInvisibleCollidingPrimitives(r),t.map.addInvisibleCollidingPrimitives(o)},n.componentWillUnmount=function(){var e=this.props;e.map.removeInvisibleCollidingPrimitives(e.placemarks.map(this._getCollidingPrimitiveId))},n.render=function(){return null},t}(o.Component);t.Z=(0,s.ZP)({shouldWait:!0})(u)},83243:(e,t,n)=>{"use strict";var r=n(18007);n(8664);var o=n(87363),i=n(44748),a=n(90585),s=n(31336),u=n(78597),c=n(73760),l=n(37830),d=n(44953),p=n(12574),m=n(35846),f=n(88599),v=n(980),h=(0,f.Z)((0,m.Z)({resolved:{},chunkName:function(){return"lang-switcher"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("lang-switcher").then(n.bind(n,40039))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 40039}}),function(e){return e.config.availableLangs.length>1}),g=(0,m.Z)({resolved:{},chunkName:function(){return"scale-line"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.resolve().then(n.bind(n,70692))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 70692}}),y=(0,m.Z)({resolved:{},chunkName:function(){return"logo-view"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("logo-view").then(n.bind(n,88931))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 88931}}),_=(0,a.Z)(s.ZP,(0,u.ZP)({shouldWait:!0})),b=(0,i.Z)("map-copyrights"),w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._update=function(){n.setState({maxWidth:n.props.map.container.offsetWidth-n._getRightOffset(),copyrights:(0,c.h)(n.props.map)})},n._getRightOffset=function(){return n.props.right-12},n._getPrivacyItem=function(){var e=n.props.config;return e.isYango?{type:"privacy",text:"Конфиденциальность",href:e.confidentialPolicyUrl+"?lang="+e.lang}:null},n._getTermsItem=function(e){var t=n.props.config;return{type:e?"terms_short":"terms",text:e?"Условия":"Условия использования",href:t.agreementUrl+"?lang="+t.lang}},n._getCopyrightsItem=function(){return{type:"copyrights",text:n.state.copyrights,shrink:!0}},n._getRightHoldersItem=function(){var e=n.props.config;return{type:"right_holders",text:"Правообладатели",href:e.rightHoldersUrl+"?lang="+e.lang}},n._getSupportItem=function(){var e=n.props.config;return(0,l.m)(e)?null:{type:"support",text:"Справка",href:e.feedback.helpUrl+"?lang="+e.lang}},n._getLocalizationItem=function(){return 1===n.props.config.availableLangs.length?null:{type:"lang",text:o.createElement(h,null)}},n._renderBlock=function(e,t){var n=t.filter(function(e){return!!e});return o.createElement("div",{className:b("block",{type:e})},n.map(function(e){var t=e.href?"a":"div";return o.createElement(d.ZP,{name:e.type,logClick:!!e.href,key:e.type},o.createElement(t,{className:b("item",{shrink:e.shrink,noprint:e.noprint,type:e.type}),href:e.href,target:"_blank"},e.text))}))},n._renderBlocks=function(){var e=n.props;return(e.config,e.copyrightOnly)?n._renderBlock("copyrights-only",[n._getCopyrightsItem(),n._getTermsItem(),n._getPrivacyItem()]):o.createElement(o.Fragment,null,n._renderBlock("copyrights",[n._getCopyrightsItem(),n._getRightHoldersItem()]),n._renderBlock("links",[{type:"service",text:"© Яндекс"},n._getLocalizationItem(),n._getSupportItem(),n._getTermsItem(),n._getTermsItem(!0),n._getPrivacyItem()]))},n.state={maxWidth:0,copyrights:(0,c.h)(n.props.map)},n}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.copyrightOnly?"copyrights-only":"map"===e.layer?"scheme":"satellite";return o.createElement("footer",null,o.createElement(d.ZP,{name:"map_copyrights"},o.createElement("div",{className:b({type:t}),style:(0,v.cq)(e.config,{maxWidth:this.state.maxWidth,right:this._getRightOffset()})},this._renderBlocks(),o.createElement(p.Z,{onResize:this._update,onCopyrightsChange:this._update}))),e.copyrightOnly?null:o.createElement("div",{className:b("logo-layout")},o.createElement(y,{view:"map",isNegative:"map"!==e.config.mapType})),!e.copyrightOnly&&e.location?o.createElement("div",{className:b("scale-line")},o.createElement(g,{center:e.location.center,zoom:e.location.zoom})):null)},t}(o.PureComponent);t.Z=_(w)},84238:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(78597),a=n(31336),s=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._key="",t._applyCursor=function(){var e,n=t._getCursor();!t.props.src&&n&&n.startsWith("url(")||(t.props.map.container.style.cursor=(e=t.props).src&&e.basePoint?'url("'+e.src+'") '+e.basePoint.join(" ")+', url("'+e.src+'"), auto':e.cursor||"default",t._key=t._getCursor())},t._getCursor=function(){return t.props.map.container.style.cursor||""},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._applyCursor()},n.componentDidUpdate=function(){this._applyCursor()},n.componentWillUnmount=function(){this._getCursor()===this._key&&(this.props.map.container.style.cursor="")},n.render=function(){return null},t}(o.Component);t.Z=(0,i.ZP)({shouldWait:!0})((0,a.ZP)(s))},96313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(18007),o=n(87363),i=n(94960),a=n(39705),s=n(57636),u=n(44748),c=n(78597),l=n(12574),d=n(36581),p=n(44953),m=n(97313),f=n(57031),v=n(31336),h=n(90585),g=n(85172),y=(0,u.Z)("map-entrances-view"),_=(0,h.Z)(v.ZP,(0,c.ZP)({shouldWait:!0}),g.ZP),b=[[-5,-5],[5,5]];function w(e){return e>=18?"large":e>=17?"normal":e>=16?"small":void 0}var E=_(function(e){function t(t){var n;return(n=e.call(this,t)||this)._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._onMapUpdate=function(){var e=n.props,t=n.state,r=e.map.zoom,o=e.map.azimuth;(r!==t.mapZoom||o!==t.mapAzimuth)&&n.setState({mapZoom:r,mapAzimuth:o})},n._renderEntrance=function(e,t){var r=n.props,u=n.state,c=w(u.mapZoom),l=((e.azimuth||0)+(0,i.Z)(u.mapAzimuth))%360,f=r.isMetro?16:0;return o.createElement(p.ZP,{key:t,name:"entrance",nodeState:{name:e.name,coords:(0,a.s)(e.coordinates)}},o.createElement(d.Z,{coordinates:e.coordinates,nonInteractive:!r.onEntranceClick,onClick:function(){return null==r.onEntranceClick?void 0:r.onEntranceClick.call(r,e)},zIndex:m.I.search.base},o.createElement("div",{className:y({size:c,animated:r.animated})},o.createElement("div",{style:{transform:"rotate("+l+"deg)",paddingTop:f}},void 0!==e.azimuth&&"small"!==c?o.createElement("div",{className:y("arrow-container")},o.createElement(s.Z,{name:"large"===c?"entrance-arrow-red-13x22":"entrance-arrow-red-10x15",theme:r.theme,className:y("arrow",{large:"large"===c}),inline:!0})):void 0,r.isMetro?null:o.createElement("div",{className:y("dot")})),u.isVector&&e.name&&u.mapZoom>=18.5?o.createElement("div",{className:y("title",{position:l>45&&l<135?"left":"right"})},e.name):null)))},n._renderEntrances=function(){var e=n.props,t=n.state,r=w(t.mapZoom);return e.result.entrances&&r?o.createElement(o.Fragment,null,e.result.entrances.map(n._renderEntrance),t.mapZoom>=18.5&&!e.isMetro?o.createElement(f.Z,{placemarks:e.result.entrances.map(function(e){return{anchor:e.coordinates,id:e.coordinates.join(","),pixelSize:b}})}):null):null},n.state={mapZoom:t.map.zoom,mapAzimuth:t.map.azimuth,isVector:"vector"===t.map.getEffectiveMode()},n}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderEntrances(),o.createElement(l.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.PureComponent))},43410:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=(0,n(84641).Z)("mapFeatureGroup",{}),o=r.connect,i=r.Provider;t.Z=o},91260:(e,t,n)=>{"use strict";var r=n(2267),o=n(18007),i=n(87363),a=n(55877),s=n.n(a),u=n(78597),c=n(111),l=n(50576),d=n(99870),p=n(43410),m=n(90585),f=n(77600),v={onClick:"click",onFastClick:"fastclick",onTouchEnd:"touchend",onDoubleClick:"dblclick",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseMove:"mousemove"},h=(0,m.Z)(p.Z,(0,u.ZP)({shouldWait:!0})),g=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n._getFeature=function(){return{type:"Feature",id:n._id,geometry:n.props.geometry,draggable:n.props.draggable}},n._addHandler=function(e,t,r){n._handlers[e]=function(e,t,o){(null==e?void 0:e.type)==="feature"&&e.feature.id===n._id&&r(o,t)},n.props.map.events.on(v[e],t,n._handlers[e])},n._removeHandler=function(e,t){n.props.map.events.off(v[e],t,n._handlers[e]),delete n._handlers[e]},n._dragStart=function(e){var t=e.object,r=e.newGeometry;if("Feature"===t.type&&t.id===n._id){var o=(0,f.ZE)(r,function(e){return n.props.map.projection.fromWorldCoordinates(e)});o.coordinates&&(null==n.props.onDragStart||n.props.onDragStart.call(n.props,{coordinates:o.coordinates}))}},n._dragMove=function(e){var t=e.object,r=e.newGeometry;if(n.props.onDragMove&&"Feature"===t.type&&t.id===n._id){var o=(0,f.ZE)(r,function(e){return n.props.map.projection.fromWorldCoordinates(e)});return o.coordinates&&(null==n.props.onDragMove||n.props.onDragMove.call(n.props,{coordinates:o.coordinates})),!1}},n._dragEnd=function(e){var t=e.newGeometry,r=e.object;if(n._dragMoveThrottled.cancel(),"Feature"===r.type&&r.id===n._id){var o=(0,f.ZE)(t,function(e){return n.props.map.projection.fromWorldCoordinates(e)});return o.coordinates&&(null==n.props.onDragEnd||n.props.onDragEnd.call(n.props,{coordinates:o.coordinates})),!1}},n._id=t.id||s().v4(),n._dragMoveThrottled=(0,c.Z)(n._dragMove,50),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props;t.map.addFeature(this._dataSourceId,this._getFeature(),t.drawingStyle,t.parentGroupId),Object.keys(v).forEach(function(n){t[n]&&e._addHandler(n,e._dataSourceId,t[n])}),t.draggable&&(t.map.dragger.on("dragStart",this._dragStart),t.map.dragger.on("dragMove",this._dragMoveThrottled),t.map.dragger.on("dragEnd",this._dragEnd))},n.componentDidUpdate=function(e){var t=this,n=this.props,r=e.dataSourceId?e.dataSourceId:d.UZ.DEFAULT_GRAPHICS;r!==this._dataSourceId?(n.map.removeFeatureById(r,this._id),n.map.addFeature(this._dataSourceId,this._getFeature(),n.drawingStyle,n.parentGroupId)):((0,l.Z)(e.drawingStyle,n.drawingStyle)&&(0,l.Z)(e.geometry,n.geometry)&&e.draggable===n.draggable||n.map.updateFeature(this._dataSourceId,this._getFeature(),n.drawingStyle),e.parentGroupId!==n.parentGroupId&&n.map.moveFeatureToGroup(this._dataSourceId,this._getFeature().id,n.parentGroupId)),Object.keys(v).forEach(function(o){(n[o]!==e[o]||r!==t._dataSourceId)&&(e[o]&&t._removeHandler(o,r),n[o]&&t._addHandler(o,t._dataSourceId,n[o]))}),!e.draggable&&n.draggable?(n.map.dragger.on("dragStart",this._dragStart),n.map.dragger.on("dragMove",this._dragMoveThrottled),n.map.dragger.on("dragEnd",this._dragEnd)):e.draggable&&!n.draggable&&(n.map.dragger.offSingle("dragStart",this._dragStart),n.map.dragger.offSingle("dragMove",this._dragMoveThrottled),n.map.dragger.offSingle("dragEnd",this._dragEnd))},n.componentWillUnmount=function(){var e=this;this.props.map.dragger.offSingle("dragStart",this._dragStart),this.props.map.dragger.offSingle("dragMove",this._dragMoveThrottled),this.props.map.dragger.offSingle("dragEnd",this._dragEnd),Object.keys(this._handlers).forEach(function(t){return e._removeHandler(t,e._dataSourceId)}),this.props.map.removeFeatureById(this._dataSourceId,this._id)},n.render=function(){return null},(0,r._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||d.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent);t.Z=h(g)},9322:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(34788),o=n(18007),i=n(87363),a=n(31336),s=n(78597),u=n(84238),c=n(99870),l=n(12574);function d(e,t){var n;return!!(null==(n=e.properties.tags)?void 0:n.includes(t))}var p={color:{r:1,g:68/255,b:.2,a:1}},m={lightness:-.1,saturation:1},f={lightness:-.1,saturation:0},v=n(16145).Z.getLogger("map-objects"),h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n.state={isHover:!1},Object.keys(l.h).forEach(function(e){return n._handlers[e]=n._getHandler(e)}),n}(0,o._)(t,e);var n=t.prototype;return n._getHandler=function(e){var t=this;return function(n,r){var o=t.props,i=n.feature;"onMouseEnter"===e&&v(i.id,n);var a=!o.config.uatraits.isTouch&&!o.disableHighlight;(o.shouldHover?o.shouldHover(i):!!o.onClick)&&("onMouseEnter"===e&&(a&&o.map.setObjectHighlight(function(e){var t,n,r,o;if(r=(null==(n=e.properties.vectorMetadata)?void 0:n.get("_vector_richModel"))==="model",o=d(e,"major_landmark")&&d(e,"building"),!r&&!o)return(null==(t=e.properties.vectorMetadata)?void 0:t.get("_vector_layerName"))==="tile3d"?{object:e,color:f}:{object:e,color:d(e,"building")?m:p}}(i)),t.setState({isHover:!0})),"onMouseLeave"===e&&(a&&o.map.setObjectHighlight(void 0),t.setState({isHover:!1})));var s=o[e];s&&s(i,r)}},n.render=function(){var e=this,t=(0,c.se)(this.props.layer);return i.createElement(i.Fragment,null,this.state.isHover?i.createElement(u.Z,{cursor:"pointer"}):null,t.map(function(t){return i.createElement(l.Z,(0,r._)({key:t,layer:t},e._handlers))}))},t}(i.Component),g=(0,a.ZP)((0,s.ZP)({shouldWait:!0})(h))},78510:(e,t,n)=>{"use strict";var r=n(18007),o=n(11912),i=n(87363),a=n(50576),s=n(31336),u=n(78597),c=n(99870),l=n(9322),d=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._updateLayer=function(e,n){var r=t.props.map;if(!r.destroyed){var i=n&&r.getDataSource(n.layer);n&&n.dataSource&&(i?e&&r.updateTileDataSource(n.layer,n.dataSource):r.addDataSource(n.layer,n.dataSource));var a=r.getLayers(),s=a.topRasterLayers,u=a.mainLayers,l=(0,o._)(u).concat((0,o._)(s));if(e){var d=(0,c.se)(e.layer);l=l.filter(function(e){return!d.includes(e)})}if(n){var p,m=(0,c.se)(n.layer);(p=l).push.apply(p,(0,o._)(m))}r.setLayers((0,c.c8)(l,t.props.ymaps3.EventBlockerLayer,t.props.config)),e&&e.dataSource&&(!n||!n.dataSource)&&r.removeDataSource(e.layer)}},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateLayer(void 0,this.props)},n.componentDidUpdate=function(e){this.props.layer===e.layer&&(0,a.Z)(e.dataSource,this.props.dataSource)||this._updateLayer(e,this.props)},n.componentWillUnmount=function(){this._updateLayer(this.props)},n.render=function(){return i.createElement(l.Z,this.props)},t}(i.Component);t.ZP=(0,s.ZP)((0,u.ZP)({shouldWait:!0})(d))},22712:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r,o=n(18007),i=n(11912),a=n(87363),s=n(78597),u=n(31336),c=n(91260),l=n(36581),d=n(39029),p=n(36897),m=n(44748),f=n(97313),v=n(99870),h=(0,m.Z)("map-line-editor"),g=f.I.editing-3,y=f.I.editing-1,_=f.I.editing-2,b=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setLayers=function(e){var t=n.props.map,o=t.getLayers(),a=o.topRasterLayers,s=o.mainLayers,u=(0,i._)(a).concat((0,i._)(s)),c=n.props.config.uatraits.isMobile?"click":"fastclick";n.props.editorLayerOwner?(u.push(v.Il),r=n.props.editorLayerOwner,t.events.on(c,v.Il,n._onEditorLayerClick)):e&&(e.editorLayerOwner===r&&(u=u.filter(function(e){return e!==v.Il}),r=void 0),t.events.off(c,v.Il,n._onEditorLayerClick)),t.setLayers((0,v.c8)(u,n.props.ymaps3.EventBlockerLayer,n.props.config))},n._onEditorLayerClick=function(e,t){n.props.onPointAdd(t.coordinates,n.props.points.length)},n._updatePoint=function(e,t,r){n.props.onPointUpdate&&void 0!==t&&n.props.onPointUpdate(e,t,!!r)},n._onMouseMove=function(e){var t,r=n.props.map.convertScreenToWorldCoordinates(e).coordinates;if(n.props.onLineMouseMove&&n.props.onLineMouseMove(e,{coordinates:r}),n.props.polyLineCoordinates&&n.props.isActive&&void 0===n.state.draggingPoint){var o=(t=Math).max.apply(t,(0,i._)(n.props.lineStyle.stroke.map(function(e){return e.width||0}))),a=(0,d.x)(n.props.polyLineCoordinates,r,o,n.props.map.zoom,!0);a&&"point"in a&&n.setState({previewPoint:a})}},n._onNewPointDragStart=function(){var e=n.state,t=n.props;if(e.previewPoint){var r=function(e,t,n){for(var r=0,o=0;o<e.length-1;o++){var i=t[r];if(i&&(0,p.J)(i,e[o],15e-7)&&(r+=1),o===n)break}return r}(t.polyLineCoordinates,t.points,e.previewPoint.segmentIndex)||void 0;void 0!==r&&e.previewPoint.point&&(n.setState({draggingPoint:{index:r,point:e.previewPoint.point}}),t.onPointAdd(e.previewPoint.point,r))}},n._onExistingPointDragStart=function(e){n.props.points[e]&&n.setState({draggingPoint:{index:e,point:n.props.points[e]}})},n._onDragMove=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:{index:r.draggingPoint.index,point:t}}),n._updatePoint(t,r.draggingPoint.index))},n._onDragEnd=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:void 0,previewPoint:void 0}),n._updatePoint(t,r.draggingPoint.index,!0))},n._onPointDoubleClick=function(e){n.props.isActive&&n.props.onPointRemove&&n.props.onPointRemove(e)},n._onPointClick=function(e){n.props.onPointClick&&n.props.onPointClick(e)},n._renderDraggingOrPreviewPoint=function(){var e=n.state,t=n.props,r=e.draggingPoint||e.previewPoint;if(!r||!t.isActive||t.config.uatraits.isMobile)return null;var o="segmentIndex"in r;return a.createElement(l.Z,{coordinates:r.point,onDragStart:n._onNewPointDragStart,onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onMouseMove:n._onMouseMove,onMouseLeave:t.onPreviewPointMouseLeave,onClick:t.onPreviewPointClick,zIndex:o?g:y,draggable:t.isActive,dataSourceId:v.UZ[t.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0},o?a.createElement("div",{className:h("preview-point")},t.previewPointElement):n.props.renderPointElement("index"in r&&r.index||0))},n._renderPoints=function(){return n.props.points.map(function(e,t){return a.createElement(l.Z,{key:t,onDragStart:function(){return n._onExistingPointDragStart(t)},onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onDoubleClick:function(){return n._onPointDoubleClick(t)},onClick:function(){return n._onPointClick(t)},coordinates:e,draggable:n.props.isActive,zIndex:_,dataSourceId:v.UZ[n.props.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0,nonInteractive:!n.props.isActive},n.state.draggingPoint&&n.state.draggingPoint.index===t?null:n.props.renderPointElement(t))})},n.state={},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._setLayers()},n.componentDidUpdate=function(e){e.editorLayerOwner!==this.props.editorLayerOwner&&this._setLayers(e)},n.render=function(){var e=this.props.editorLayerOwner?"EDITOR_GRAPHICS":"RASTER_GRAPHICS";return a.createElement(a.Fragment,null,this._renderDraggingOrPreviewPoint(),this._renderPoints(),a.createElement(c.Z,{drawingStyle:this.props.lineStyle,geometry:{type:"LineString",coordinates:this.props.polyLineCoordinates},onMouseMove:this._onMouseMove,onMouseEnter:this.props.onLineMouseEnter,onMouseLeave:this.props.onLineMouseLeave,dataSourceId:v.UZ[e],onClick:this.props.onPreviewPointClick}))},t}(a.Component),w=(0,s.ZP)({shouldWait:!0})((0,u.ZP)(b))},12574:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var r=n(18007),o=n(87363),i=n(78597),a={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onFastClick:"fastclick",onTouchCancel:"touchcancel",onPointerDown:"pointerdown",onPointerMove:"pointermove",onPointerUp:"pointerup",onPointerCancel:"pointercancel",onClick:"click",onDoubleClick:"dblclick",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove"},s={onUpdate:"update",onCopyrightsChange:"copyrightsChange",onResize:"resize",onZoomRangeChange:"zoomRangeChange",onReady:"ready",onTile3dChanged:"tile3dChanged",onTile3dVisibilityChange:"tile3dVisibilityChange",onVisibleObjectsChanged:"visibleObjectsChanged",onIndoorPlansChanged:"indoorPlansChanged",onVectorError:"vectorError",onVectorStart:"vectorStart",onZoomRoundingChanged:"zoomRoundingChanged",onMainEngineChanged:"mainEngineChanged"},u=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._applyMapHandlers=function(e,t,n){Object.keys(s).forEach(function(r){(!n||!t||n[r]!==t[r])&&(n&&n[r]&&e.offSingle(s[r],n[r]),t&&t[r]&&e.on(s[r],t[r]))})},t._applyDomHandlers=function(e,t,n){Object.keys(a).forEach(function(r){(!n||!t||n[r]!==t[r]||n.layer!==t.layer)&&(n&&n[r]&&e.events.off(a[r],n.layer||"none",n[r]),t&&t[r]&&e.events.on(a[r],t.layer||"none",t[r]))})},t._onInertiaStart=function(e){t.props.onInertiaStart&&t.props.onInertiaStart(t.props.map.calculateCenter(e.targetPositionWcs))},t._onDragStart=function(){t.props.onDragStart&&t.props.onDragStart()},t._onDragEnd=function(){t.props.onDragEnd&&t.props.onDragEnd()},t._onContainerTouchMove=function(e){t.props.onContainerTouchMove&&t.props.onContainerTouchMove(c(e))},t._onContainerPointerMove=function(e){t.props.onContainerPointerMove&&t.props.onContainerPointerMove(c(e))},t._onActionStart=function(e){t.props.onActionStart&&t.props.onActionStart(e)},t._onActionEnd=function(e){t.props.onActionEnd&&t.props.onActionEnd(e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.map;this._applyMapHandlers(e,this.props),this._applyDomHandlers(e,this.props),e.behaviors.on("actionStart",this._onActionStart),e.behaviors.on("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.on("inertiaStart",this._onInertiaStart),e.behaviors.drag.on("dragStart",this._onDragStart),e.behaviors.drag.on("dragEnd",this._onDragEnd)),e.container.addEventListener("touchmove",this._onContainerTouchMove),e.container.addEventListener("pointermove",this._onContainerPointerMove)},n.componentDidUpdate=function(e){this._applyMapHandlers(this.props.map,this.props,e),this._applyDomHandlers(this.props.map,this.props,e)},n.componentWillUnmount=function(){var e=this.props.map;this._applyMapHandlers(e,void 0,this.props),this._applyDomHandlers(e,void 0,this.props),e.behaviors.offSingle("actionStart",this._onActionStart),e.behaviors.offSingle("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.offSingle("inertiaStart",this._onInertiaStart),e.behaviors.drag.offSingle("dragStart",this._onDragStart),e.behaviors.drag.offSingle("dragEnd",this._onDragEnd)),e.container.removeEventListener("touchmove",this._onContainerTouchMove),e.container.removeEventListener("pointermove",this._onContainerPointerMove)},n.render=function(){return null},t}(o.PureComponent);function c(e){if("touches"in e){var t=e.touches[0]||e.changedTouches[0];return[t.clientX,t.clientY]}return[e.clientX,e.clientY]}t.Z=(0,i.ZP)({shouldWait:!0})(u)},36581:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(2267),o=n(34788),i=n(18007),a=n(87363),s=n(61533),u=n(55877),c=n.n(u),l=n(44748),d=n(78597),p=n(97313),m=n(99870),f=n(58155),v=n(31336),h=(0,l.Z)("map-placemark"),g=function(){},y=function(e){function t(t){var n;return(n=e.call(this,t)||this)._container=document.createElement("div"),n._onDragStart=function(){n.setState({isDragging:!0}),n._fireInteractionEvent()},n._fireInteractionEvent=function(){var e,t,n,r;e=window,t="map-placemark-interaction",void 0===n&&(n={bubbles:!0,cancelable:!0}),"function"==typeof Event?r=new Event(t,n):(r=document.createEvent("Event")).initEvent(t,n.bubbles,n.cancelable),e.dispatchEvent(r)},n._updateCursor=function(){var e=n.state.isDragging?"grabbing":n.props.cursor?n.props.cursor:n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default";n._container.style.cursor=e},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach(function(e){t[e]&&n._mapEventHandlers.on(e,function(r){var o=r.object,i=r.newGeometry;if(o&&"Feature"===o.type&&o.id===n._marker.feature.id){var a=n.props.map.projection.fromWorldCoordinates(i.coordinates);t[e]({coordinates:a})}})})},n._onDragEnd=function(e){var t=e.object,r=e.newGeometry;n.setState({isDragging:!1}),t&&"Feature"===t.type&&t.id===n._marker.feature.id&&(n._marker.feature.geometry.coordinates=n.props.map.projection.fromWorldCoordinates(r.coordinates))},n._onClick=function(e){e.stopPropagation(),n._fireInteractionEvent();var t=n.props,r=t.onClick||g,o=t.onFastClick||g,i=t.onDoubleClick||g;n._clickTimer?(i(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(o(),n._clickTimer=window.setTimeout(function(){r(),n._clickTimer=void 0},300))},n.state={isDragging:!1},n._container.className=h(),n._marker={feature:{type:"Feature",id:c().v4(),draggable:t.draggable,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents,geometry:{type:"Point",coordinates:t.coordinates}},style:{zIndex:t.zIndex||p.I.default,element:n._container}},n._mapEventHandlers=n.props.map.dragger.group(),n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._updateCursor(),this._addMapEventHandlers(e),e.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style),this._mapEventHandlers.on("dragStart",this._onDragStart),this._mapEventHandlers.on("dragEnd",this._onDragEnd)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeFeatureById(this._dataSourceId,this._marker.feature.id)),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e,t){var n=e.dataSourceId?e.dataSourceId:m.UZ.DEFAULT_MARKERS;n!==this._dataSourceId&&(this.props.map.removeFeatureById(n,this._marker.feature.id),this.props.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style));var r=this.props,i=!1;r.coordinates!==e.coordinates&&(i=!0,this._marker.feature.geometry.coordinates=r.coordinates),e.draggable!==r.draggable&&(i=!0,this._marker.feature.draggable=r.draggable),e.zIndex!==r.zIndex&&(i=!0,this._marker.style.zIndex=r.zIndex||p.I.default),e.disableRoundCoordinates!==r.disableRoundCoordinates&&(i=!0,this._marker.feature.disableRoundCoordinates=r.disableRoundCoordinates||!1),i&&this.props.map.upsertFeature(this._dataSourceId,(0,o._)({},this._marker.feature),(0,o._)({},this._marker.style)),(r.onDragStart!==e.onDragStart||r.onDragMove!==e.onDragMove||r.onDragEnd!==e.onDragEnd)&&(this._mapEventHandlers.offAll(),this._addMapEventHandlers(r)),(e.draggable!==r.draggable||e.cursor!==r.cursor||e.onClick!==r.onClick||t.isDragging!==this.state.isDragging)&&this._updateCursor()},n.render=function(){var e=this,t=this.props,n=a.createElement("div",{dir:t.config.isRtl?"rtl":"ltr","aria-hidden":!0,className:h("wrapper",{"non-interactive":t.nonInteractive}),onClick:this._onClick,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseMove:t.onMouseMove},this.props.onMouseLeave&&this.props.shoulTrackOutsideClick?a.createElement(f.Z,{callback:function(){return null==e.props.onMouseLeave?void 0:e.props.onMouseLeave.call(e.props)}},t.children):t.children);return s.createPortal(n,this._container)},(0,r._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||m.UZ.DEFAULT_MARKERS}}]),t}(a.PureComponent),_=(0,v.ZP)((0,d.ZP)({shouldWait:!0})(y))},44054:(e,t,n)=>{"use strict";var r=n(18007),o=n(11640),i=n(11912),a=n(87363),s=n(37806),u=n(29657),c=n(41421),l=n(38067),d=n(15900),p=n(12690),m=n(60309),f=n(36897),v=n(91260),h=n(32241),g=(s.d3,Math.PI,function(e){function t(t){var n;return(n=e.call(this,t)||this)._getGeodesicGeometry=function(){for(var e=n.props,t=[],r=0;r<=2*Math.PI;r+=Math.PI/40){var a=(0,u.S)(e.center,[Math.cos(r),Math.sin(r)],e.radius).endPoint;t.push(a)}var s=(0,o._)(t),d=s[0],p=s.slice(1),m=(0,i._)(p).concat([d]).reduce(function(e,t){return(0,i._)(e).concat((0,i._)((0,c.b)([e.pop(),t])))},[d]),f=m.reduce(function(e,t){var n=t[0]>90||t[0]<-90?Math.round(t[0]/360):0;return e[n]++,e},{"-1":0,0:0,1:0}),v=0;f["-1"]>f[0]&&(v=360),f[1]>f[0]&&(v=-360),v&&(m=m.map(function(e){return[e[0]+v,e[1]]}));var h=[m[0][0],e.center[1]>0?90:-90];return(0,l.t)(h,e.center)<=e.radius&&(m.unshift(h),m.push(h)),m},n._getPixelGeometry=function(){for(var e=n.props,t=(0,d.f)(e.center,2),r=(0,u.S)(e.center,[-1,0],e.radius).endPoint,o=(0,p.g)((0,d.f)(r,2),t),i=[],a=0;a<=2*Math.PI;a+=Math.PI/40){var s=[t[0]+Math.cos(a)*o,t[1]+Math.sin(a)*o];i.push((0,m.W)(s,2))}return i},n._getGeometry=function(){var e=n.props;e.radius;var t=e.geodesic?n._getGeodesicGeometry():n._getPixelGeometry();return{type:"Polygon",coordinates:[(0,h.g)(t)]}},n.state={geometry:n._getGeometry()},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props;(0,f.J)(t.center,e.center)&&t.radius===e.radius||this.setState({geometry:this._getGeometry()})},n.render=function(){return a.createElement(v.Z,{geometry:this.state.geometry,drawingStyle:this.props.drawingStyle,dataSourceId:this.props.dataSourceId})},t}(a.PureComponent));t.Z=g},70692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(18007);n(59773);var o=n(87363),i=n(44748),a=n(31336),s=n(18188),u=n(15900),c=n(60309),l=n(38067),d=n(65569),p=n(35645),m=(0,i.Z)("map-scale-line"),f=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e,t,n,r,i,a,p,f,v,h,g=this.props,y=g.config.uatraits.isMobile,_=y?80:75,b=(e={center:g.center,zoom:g.zoom,dimension:y?"height":"width",maxSize:_},n=(t=(0,s._)((0,u.f)(e.center,e.zoom),2))[0],r=t[1],i="width"===e.dimension?1:0,a="height"===e.dimension?1:0,p=(0,c.W)([n-i*e.maxSize/2,r-a*e.maxSize/2],e.zoom),f=(0,c.W)([n+i*e.maxSize/2,r+a*e.maxSize/2],e.zoom),v=(0,l.t)(p,f),h=d.Lr(v,1),{size:Math.abs(v)>1e-7?Math.round(h*e.maxSize/v):e.maxSize,distance:h}),w=b.size,E=b.distance,S={};return y?S.height=_+"px":S.width=w+"px",o.createElement("div",{ref:this.props.forwardedRef,className:m(),style:S,"aria-hidden":!0},o.createElement("div",{className:m("label")},d.Bb(E)),o.createElement("div",{className:m("line")}))},t}(o.PureComponent),v=(0,p.Z)((0,a.ZP)(f))},13109:(e,t,n)=>{"use strict";var r=n(87363),o=n(18692),i={pmbl:"#177ee6",pmrd:"#f43",pmgn:"#3bb300"},a=i.pmbl;t.Z=function(e){return e.points?r.createElement(r.Fragment,null,e.points.map(function(e,t){var n=e.coordinates,s=e.color;return r.createElement(o.Z,{key:t+"_"+n.join(),coordinates:n,color:s&&s in i?i[s]:a,nonInteractive:!0,comma:!0})})):null}},14185:(e,t,n)=>{"use strict";var r=n(18007);n(23144);var o=n(87363),i=n(94960),a=n(99111),s=n(44748),u=n(35846),c=n(12574),l=n(78597),d=n(99870),p=n(94507),m=n(18898),f=n(44953),v=n(31336),h=n(71682),g=(0,u.Z)({resolved:{},chunkName:function(){return"tooltip"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("tooltip").then(n.bind(n,11866))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 11866}}),y=(0,s.Z)("map-tilt-rotate-control"),_=function(e){function t(t){var n;return(n=e.call(this,t)||this)._controlRef=o.createRef(),n._tooltipTargetRef=o.createRef(),n._analyticsCompassRef=o.createRef(),n._analyticsTiltRef=o.createRef(),n._isClick=!1,n._startAzimuth=0,n._isMovementEnabled=!0,n._prevTilt=0,n._recalculateCenter=function(){if(n._controlRef.current){var e=n._controlRef.current.getBoundingClientRect(),t=e.x,r=e.y,o=e.height,i=e.width;n._controlCenterPosition={x:t+i/2,y:r+o/2}}},n._onMapTilt=function(){var e=n.props.map.tilt;e!==n._prevTilt&&(n._prevTilt=e,n.setState({showTooltip:!0}))},n._onMapUpdate=function(){if(n._onMapTiltDebounced(),!n._isClick&&(n.props.map.tilt!==n.state.tilt||n.props.map.azimuth!==n.state.azimuth)){var e;null==(e=n._tooltipTargetRef.current)||e.click()}var t=n._prevZoom,r=n.props.map.zoom,o=n.state.tilt;r<m.Hm&&t&&t>=m.Hm&&o!==n.props.map.tiltRange.min&&(0,m.AK)(n.props.map),n._prevZoom=n.props.map.zoom,n.setState({azimuth:n.props.map.azimuth,tilt:n.props.map.tilt,isTiltDisabled:n.props.map.zoom<m.Hm})},n._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._addRotateEventListeners=function(){window.addEventListener("mousemove",n._onRotateMove),window.addEventListener("mouseup",n._onRotateEnd)},n._removeRotateEventListeners=function(){window.removeEventListener("mousemove",n._onRotateMove),window.removeEventListener("mouseup",n._onRotateEnd)},n._addTiltEventListeners=function(){window.addEventListener("mousemove",n._onTiltMove),window.addEventListener("mouseup",n._onTiltEnd)},n._removeTiltEventListeners=function(){window.removeEventListener("mousemove",n._onTiltMove),window.removeEventListener("mouseup",n._onTiltEnd)},n._onRotateStart=function(e){if(0===e.button&&n._isMovementEnabled){n._isClick=!0,n.setState({isMove:!0});var t=n._controlRef.current.getBoundingClientRect(),r=t.x,o=t.y,i=t.height,a=t.width;n._controlCenterPosition={x:r+a/2,y:o+i/2},n._startMovePosition={x:e.clientX,y:e.clientY},n._startAzimuth=n.state.azimuth,n._recalculateCenter(),n._addRotateEventListeners()}},n._onRotateMove=function(e){var t=n._controlCenterPosition,r=t.x,o=t.y,i=n._startMovePosition,a=Math.atan2(e.pageY-o,e.pageX-r)-Math.atan2(i.y-o,i.x-r);n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n._startAzimuth+a,tilt:n.props.map.tilt})},n._onRotateEnd=function(){if(n.setState({showTooltip:!0,isMove:!1}),n._removeRotateEventListeners(),!n._isClick){var e;null==(e=n._analyticsCompassRef.current)||e.changeState({action_type:"drag",rotation_angle_state:(0,i.Z)(n.props.map.azimuth),rotation_angle_diff:(0,i.Z)(n.props.map.azimuth-n._startAzimuth)})}},n._toggleMapRotate=function(){n._isClick&&n._isMovementEnabled&&(h.p_(),n._isMovementEnabled=!1,(0,m.fL)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null==(e=n._analyticsCompassRef.current)||e.changeState({action_type:"click",rotation_angle_state:(0,i.Z)(n.props.map.azimuth),rotation_angle_diff:(0,i.Z)(n.props.map.azimuth-n._startAzimuth)})}}))},n._onTiltStart=function(e){0===e.button&&n._isMovementEnabled&&(n._isClick=!0,n.setState({isMove:!0}),n._startMovePosition={x:e.clientX,y:e.clientY},n._startTilt=n.props.map.tilt,n._addTiltEventListeners())},n._onTiltMove=function(e){var t=n._startMovePosition.y-e.clientY;if(!(3>Math.abs(t))){var r=Math.PI*t/n.props.map.size.y;n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n.props.map.azimuth,tilt:n._startTilt+r})}},n._onTiltEnd=function(){if(n.setState({showTooltip:!0,isMove:!1}),n._removeTiltEventListeners(),!n._isClick){var e;null==(e=n._analyticsTiltRef.current)||e.changeState({action_type:"drag",rotation_angle_state:(0,i.Z)(n.props.map.tilt),rotation_angle_diff:(0,i.Z)(n.props.map.tilt-n._startTilt)})}},n._toggleMapTilt=function(){n._isClick&&n._isMovementEnabled&&(n._isMovementEnabled=!1,(0,m.AK)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null==(e=n._analyticsTiltRef.current)||e.changeState({action_type:"click",rotation_angle_state:(0,i.Z)(n.props.map.tilt),rotation_angle_diff:(0,i.Z)(n.props.map.tilt-n._startTilt)})}}))},n._isTiltRotateAllowed=function(){var e=n.state.isVector,t=n.props.map.getLayers().topRasterLayers;return e&&t.every(function(e){return!d.Iw.includes(e.split(":")[0])})},n._renderTooltip=function(){return n.state.showTooltip?o.createElement(g,{id:"tilt-rotate",targetRef:n._tooltipTargetRef,title:"Наклон карты",text:"Нажмите 2D, чтобы изменить угол обзора",showArrow:!0,position:"left",offset:{main:10,side:0},hideForeverOnTargetClick:!0,ignoreCloseButtonClick:!0,closeOnOutsideClick:!0,renderControls:function(e){return o.createElement("div",{"aria-hidden":!0,className:y("tooltip-button"),onClick:e},"Понятно")},checkTargetVisibility:!1}):null},n.state={azimuth:t.map.azimuth,tilt:t.map.tilt,isMove:!1,showTooltip:!1,isTiltDisabled:t.map.zoom<m.Hm,isVector:"vector"===t.map.getEffectiveMode()},n._startTilt=t.map.tiltRange.min,n._onMapTiltDebounced=(0,a.Z)(n._onMapTilt,m.zn),n}(0,r._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._removeRotateEventListeners(),this._removeTiltEventListeners(),this._onMapTiltDebounced.cancel()},n.render=function(){var e,t=this.state,n=this._isTiltRotateAllowed(),r=t.azimuth,i=t.tilt,a=t.isMove,s=t.isTiltDisabled,u=this.props.map.tiltRange.min;return e=s?"Увеличьте масштаб, чтобы наклонить карту":i!==u?"Убрать наклон карты":"Наклонить карту",o.createElement(o.Fragment,null,n?o.createElement(o.Fragment,null,o.createElement("div",{className:y({"in-action":a}),ref:this._controlRef,"aria-hidden":!0},o.createElement(f.ZP,{name:"compass",nodeRef:this._analyticsCompassRef},o.createElement(p.Z,{text:0!==r?"Вернуть север сверху":"Повернуть карту",position:"left",isAir:!0,delay:500,isDisabled:a},o.createElement("div",null,o.createElement("div",{"aria-hidden":!0,className:y("ring"),style:{transform:"rotate("+r+"rad)"},onClick:this._toggleMapRotate,onMouseDown:this._onRotateStart})))),o.createElement(f.ZP,{name:"tilt_control",nodeRef:this._analyticsTiltRef},o.createElement(p.Z,{text:e,position:"left",isAir:!0,delay:500,isDisabled:a,offset:{main:12,side:0}},o.createElement("div",{className:y("tilt-wrapper"),ref:this._tooltipTargetRef},o.createElement("div",{"aria-hidden":!0,className:y("tilt",{tilted:i!==u,disabled:s}),style:{transform:"rotateX("+i+"rad)"},onClick:s?void 0:this._toggleMapTilt,onMouseDown:s?void 0:this._onTiltStart},i===u?"3D":"2D"))))),this._renderTooltip()):null,o.createElement(c.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.Component);t.Z=(0,l.ZP)({shouldWait:!0})((0,v.ZP)(_))},61111:(e,t,n)=>{"use strict";var r,o=n(18007),i=n(87363),a=n(78597),s=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;r||(r=new(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._uris=[],t}(0,o._)(t,e);var n=t.prototype;return n.test=function(e){var t=e.metadata,n=t&&t.get("uri");return!n||!this._uris.includes(n)},n.add=function(e){this._uris.push(e),this._emit("update")},n.remove=function(e){this._uris=this._uris.filter(function(t){return t!==e}),this._emit("update")},t}(e.ymaps3.eventify().with())),e.map.addObjectFilter(r)),r.add(this.props.uri)},n.componentDidUpdate=function(e){this.props.uri!==e.uri&&(r.remove(e.uri),r.add(this.props.uri))},n.componentWillUnmount=function(){r.remove(this.props.uri)},n.render=function(){return null},t}(i.Component);t.Z=(0,a.ZP)({shouldWait:!0})(s)},32584:(e,t,n)=>{"use strict";n.d(t,{V:()=>r,x:()=>o});var r={bus:{normal:"bus-16"},minibus:{normal:"minibus-16"},tramway:{normal:"tram-16"},trolleybus:{normal:"trolley-16"},water:{normal:"ship-16"},underground:{normal:"subway-icon-fallback-16"},cable:{normal:"cableway-16-flip"},aero:{normal:"aero-16-flip"},aeroexpress:{normal:"aeroexpress-16"},funicular:{normal:"funicular-16-flip"},train:{normal:"train-16"},suburban:{normal:"train-16"},suburban_express:{normal:"train-16"},railway:{normal:"train-16"},fallback:{normal:"unknown-16-flip"}},o={fallback:{small:"subway-fallback-16",normal:"subway-fallback-24"},adana_metro:{small:"subway-adana-16",normal:"subway-adana-24"},almaty_metro:{small:"subway-almaty-16",normal:"subway-almaty-24"},amsterdam_metro:{},ankara_metro:{small:"subway-ankara-16",normal:"subway-ankara-24"},ankaray:{small:"subway-ankaray-16",normal:"subway-ankaray-24"},athens_metro:{small:"subway-athens-16",normal:"subway-athens-24"},baku_metro:{small:"subway-baku-16",normal:"subway-baku-24"},barcelona_fgc:{small:"subway-barcelona-16",normal:"subway-barcelona-24"},barcelona_tmb:{small:"subway-barcelona-16",normal:"subway-barcelona-24"},beijing_metro:{},berlin_ubahn:{small:"subway-berlin-16",normal:"subway-de-ubahn-24"},brussels_metro:{},bucharest_metro:{small:"subway-bucharest-16",normal:"subway-bucharest-24"},budapest_metro:{small:"subway-budapest-16",normal:"subway-budapest-24"},buenos_aires_metro:{},bursaray:{small:"subway-bursa-16",normal:"subway-bursa-24"},cairo_metro:{},copenhagen_metro:{small:"subway-copenhagen-metro-16",normal:"subway-copenhagen-24"},dnipro_metro:{small:"subway-dnepropetrovsk-16",normal:"subway-dnepropetrovsk-24"},dubai_metro:{small:"uae-subway-16",normal:"uae-subway-24"},dubai_monorail:{small:"uae-monorail-16",normal:"uae-monorail-24"},dubai_tram:{small:"uae-tram-16",normal:"uae-tram-24"},ekaterinburg_metro:{small:"subway-ekb-16",normal:"subway-ekb-24"},genoa_metro:{},glasgow_subway:{},hamburg_ubahn:{},harbin_metro:{},helsinki_metro:{small:"subway-helsinki-16",normal:"subway-helsinki-24"},hong_kong_mtr:{},istanbul_funicular:{},istanbul_marmaray:{small:"subway-istanbul-marmaray-16",normal:"subway-istanbul-marmaray-24"},istanbul_metro:{small:"subway-istanbul-16",normal:"subway-istanbul-24"},istanbul_metrobus:{small:"subway-bus-istanbul-16",normal:"subway-bus-istanbul-24"},izmir_metro:{small:"subway-izmir-16",normal:"subway-izmir-24"},kazan_metro:{small:"subway-kazan-16",normal:"subway-kazan-24"},kharkiv_metro:{small:"subway-kharkov-16",normal:"subway-kharkov-24"},kiev_metro:{small:"subway-kiev-16",normal:"subway-kiev-24"},kryvyirih_metrotram:{},lille_metro:{},lisbon_metro:{small:"subway-lisboa-16",normal:"subway-lisboa-24"},london_dlr:{small:"subway-london-16",normal:"subway-london-underground-24"},london_underground:{small:"subway-london-16",normal:"subway-london-underground-24"},lyon_metro:{},madrid_metro:{small:"subway-madrid-16",normal:"subway-madrid-24"},mexico_city_metro:{},milan_metro:{},minsk_metro:{small:"subway-minsk-16",normal:"subway-minsk-24"},moscow_mcd:{small:"subway-msk-16",normal:"subway-msk-24"},moscow_metro:{small:"subway-msk-16",normal:"subway-msk-24"},munich_ubahn:{},naples_metro:{},newathos_metro:{},nizhnynovgorod_metro:{small:"subway-nn-16x17",normal:"subway-nn-24"},novosibirsk_metro:{small:"subway-nsk-16",normal:"subway-nsk-24"},nuremberg_ubahn:{},oslo_metro:{small:"subway-oslo-16",normal:"subway-oslo-24"},paris_metro:{small:"subway-paris-16",normal:"subway-paris-metro-24"},paris_rer:{small:"subway-paris-rer-16",normal:"subway-paris-rer-24"},paris_tramway:{small:"subway-paris-tramway-16",normal:"subway-paris-tramway-24"},prague_metro:{small:"subway-prague-metro-16",normal:"subway-prague-24"},pyongyang_metro:{},rome_metro:{small:"subway-roma-16",normal:"subway-roma-24"},sanfrancisco_metro:{small:"subway-san-francisco-metro-16",normal:"subway-san-francisco-metro-24"},samara_metro:{small:"subway-samara-16",normal:"subway-samara-24"},seville_metro:{},singapore_mrt:{},sofia_metro:{small:"subway-sofia-metro-16",normal:"subway-sofia-metro-24"},spb_metro:{small:"subway-spb-16",normal:"subway-spb-24"},stockholm_metro:{small:"subway-stockholm-16",normal:"subway-stockholm-24"},tashkent_metro:{small:"subway-tashkent-16",normal:"subway-tashkent-24"},tbilisi_metro:{small:"subway-tbilisi-16",normal:"subway-tbilisi-24"},toulouse_metro:{},turin_metro:{},vienna_ubahn:{small:"subway-wein-16",normal:"subway-wein-24"},volgograd_metrotram:{small:"subway-tram-volgograd-16",normal:"subway-volgograd-tram-24"},warsaw_metro:{small:"subway-warsaw-metro-16",normal:"subway-warsaw-24"},washington_metro:{},yerevan_metro:{small:"subway-erevan-16",normal:"subway-erevan-24"}}},23363:(e,t,n)=>{"use strict";n.d(t,{Od:()=>p,TX:()=>m,Lq:()=>f,Sm:()=>v,hU:()=>g,AC:()=>y,lX:()=>s,U2:()=>_});var r=n(34788),o=n(11912),i=["aero","bus","cable","funicular","minibus","tramway","trolleybus","underground","railway","water","train"],a=["aeroexpress","suburban_express","suburban"],s={bus:"buses",trolleybus:"trolleybuses",minibus:"minibuses",tramway:"trams",water:"water"},u=(0,r._)({},{aero:function(e,t){return e.count%10==1&&e.count%100!=11?"Самолёт":"Самолёты"},bus:function(e,t){return e.count%10==1&&e.count%100!=11?"Автобус":"Автобусы"},cable:function(e,t){return e.count%10==1&&e.count%100!=11?"Канатная дорога":"Канатная дороги"},funicular:function(e,t){return e.count%10==1&&e.count%100!=11?"Фуникулер":"Фуникулеры"},minibus:function(e,t){return e.count%10==1&&e.count%100!=11?"Маршрутка":"Маршрутки"},railway:function(e,t){return e.count%10==1&&e.count%100!=11?"Поезд":"Поезда"},rapid_tram:function(e,t){return e.count%10==1&&e.count%100!=11?"Трамвай":"Трамваи"},train:function(e,t){return e.count%10==1&&e.count%100!=11?"Поезд":"Поезда"},tramway:function(e,t){return e.count%10==1&&e.count%100!=11?"Трамвай":"Трамваи"},trolleybus:function(e,t){return e.count%10==1&&e.count%100!=11?"Троллейбус":"Троллейбусы"},underground:function(e,t){return"Метро"},water:function(e,t){return"Водный транспорт"},suburban:function(e,t){return e.count%10==1&&e.count%100!=11?"Электричка":"Электрички"},suburban_express:function(e,t){return e.count%10==1&&e.count%100!=11?"Экспресс":"Экспрессы"},aeroexpress:function(e,t){return e.count%10==1&&e.count%100!=11?"Аэроэкспресс":"Аэроэкспрессы"}},{water:function(e,t){return"Маршрут"}}),c="#666",l={bus:"#3cb300",minibus:"#b43dcc",tramway:"#f43",trolleybus:"#196dff",suburban:"#666",suburban_express:"#334680",aeroexpress:"#f43",cable:"#666",funicular:"#666",water:"#0f8399",underground:"#c00",railway:"#666",train:"#f43",aero:"#666"};function d(e){return(0,o._)(a).concat((0,o._)(i)).find(function(t){return e.Types.includes(t)})||e.type}function p(e){var t=e.transports[0]?{type:e.transports[0].type,Types:e.transports.map(function(e){return e.Types}).reduce(function(e,t){return(0,o._)(e).concat((0,o._)(t))},[])}:void 0;return"railway"===e.type&&e.transports.every(function(e){return"aeroexpress"===d(e)})?"aeroexpress":t?d(t):void 0}function m(e,t){var n,r;return n={},(r=u[e])?r({count:n.isPlural?2:1},t):"Общественный транспорт"}function f(e){return e&&l[e]||c}function v(e){var t;return(null==(t=e.contour)?void 0:t.color)||e.color||e.type&&l[e.type]||c}(0,r._)({},l,{bus:"#2F8C00",minibus:"#9031A3",tramway:"#CC3629",trolleybus:"#1470CC",aeroexpress:"#CC3629"});var h={bus:!0,minibus:!0,tramway:!0,trolleybus:!0,water:!0};function g(e){return"string"==typeof e&&e in h}function y(e){return["underground","suburban","railway","suburban_express","aeroexpress"].includes(e)}function _(e,t){var n,r;return(null==(n=e.features)?void 0:n.cooled)?"Есть кондиционер":(null==(r=e.features)?void 0:r.heated)?"Отапливается":null}(0,r._)({},h,{aero:!0,cable:!0,funicular:!0,underground:!0,railway:!0,suburban:!0,suburban_express:!0,aeroexpress:!0,train:!0})},3705:(e,t,n)=>{"use strict";n.d(t,{Yu:()=>s,xP:()=>u,sN:()=>c,CA:()=>l,n:()=>d});var r=n(34788),o=n(25164),i=n(39705),a={cameraDirection:"front"};function s(e,t){var n=e.type,i=e.featureId,s=e.graphType,u=(0,r._)({featureId:i,types:[n],graphType:s},a);return(0,o.Z)("mrc",{query:u},t)}function u(e,t){return(0,o.Z)("mrc/near",{query:{ll:(0,i.s)(e.ll),z:e.z,graphType:e.graphType}},t)}function c(e,t){var n=e.ll,s=e.dir,u=e.graphType;return(0,o.Z)("mrc/directions",{query:(0,r._)({},a,{ll:(0,i.s)(n),dir:s,graphType:u})},t).catch(function(){return null})}function l(e,t){return(0,o.Z)("mrc/track/chunk",{body:{chunkId:e.chunkId}},t)}function d(e,t){return(0,o.Z)("mrc/photo/batch",{body:{ids:e}},t).catch(function(){return null})}},12276:(e,t,n)=>{"use strict";n.d(t,{TO:()=>s,qT:()=>i,Fg:()=>a});var r=n(55877),o=n.n(r);function i(e,t){return{uuid:o()(),type:"FeatureCollection",features:e,polyline:t}}function a(e,t){var n,r,o,i;return o=(n=t.polyline)[(r=e.polylinePosition).segmentIndex],i=n[r.segmentIndex+1],(o&&i?[o[0]*(1-r.segmentPosition)+i[0]*r.segmentPosition,o[1]*(1-r.segmentPosition)+i[1]*r.segmentPosition]:null)||t.polyline[t.polyline.length-1]||[0,0]}var s=null},33418:(e,t,n)=>{"use strict";n.d(t,{Kc:()=>s});var r=n(75766),o=n(34862),i=n(35501),a={};function s(e,t,n){var r,i,a;return e.uri&&e.coords?(r=e.uri,i=e.coords,c(r,t,n).then(function(e){return!e&&i?u(i,t,n):e})):e.uri?c(e.uri,t,n):e.value&&!e.coords?l(a=e.value,function(){return o.Z.fetch({type:["geo"],text:a,count:1,origin:n},t)}):e.coords?u(e.coords,t,n):Promise.resolve(void 0)}function u(e,t,n){return l(e.join(","),function(){return o.Z.fetch({mode:"reverse",type:["geo"],center:e,count:1,origin:n},t)})}function c(e,t,n){return l(e,function(){return o.Z.fetch({uri:e,count:1,origin:n},t)})}function l(e,t){return a[e]?Promise.resolve(a[e]):t().then(function(e){return i.Y(null==e?void 0:e.items)}).then(function(t){return t&&(a[e]=t,Object.keys(a).length>100&&(a=(0,r._)({},e,a[e]))),t})}},17316:(e,t,n)=>{"use strict";n.d(t,{jk:()=>r,cz:()=>o,Gz:()=>i,Ly:()=>a,uC:()=>s});var r={auto:"auto",masstransit:"mt",pedestrian:"pd",bicycle:"bc",scooter:"sc",taxi:"taxi",comparison:"comparison"},o=["bus","tramway","trolleybus","underground","minibus","railway"],i={default:{underlay:8,main:4,border:void 0},colorize:{underlay:10,main:4,border:6}},a={underlay:"#fff",inactive:"#6d6d6d",main:"#6000ff"},s="#b3b3b3"},88237:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function o(e){return e.routes.forEach(function(e){e.coordinates=e.encodedCoordinates?function(e){for(var t=function(e){for(var t=[],n=(e=e.replace(/[^A-Za-z0-9\-\+_\=]/g,"")).length,o=0;o<n;){var i=r.indexOf(e.charAt(o++)),a=r.indexOf(e.charAt(o++)),s=r.indexOf(e.charAt(o++)),u=r.indexOf(e.charAt(o++)),c=i<<2|a>>4,l=(15&a)<<4|s>>2,d=(3&s)<<6|u;t.push(String.fromCharCode(c)),64!==s&&t.push(String.fromCharCode(l)),64!==u&&t.push(String.fromCharCode(d))}return t.join("")}(e),n=t.length,o=0,i=[0,0],a=[];o<n;){for(var s=0,u=0,c=0,l=t.substr(o,8);c<4;)s|=l.charCodeAt(c)<<8*c,u|=l.charCodeAt(c+4)<<8*c,c++;var d=[s/1e6,u/1e6],p=[d[0]+i[0],d[1]+i[1]];i=p,a.push(p),o+=8}return a}(e.encodedCoordinates):[]}),e}},13183:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(73754);function o(){return[(0,r.Y)(),(0,r.Y)()]}},86946:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(55877),o=n.n(r),i=n(17316),a=n(13183);function s(e){var t=e.routes;return{uuid:o().v4(),travelMode:(null==t?void 0:t.defaults.travelMode)||"auto",activeField:0,isFocused:!0,isLoading:!1,optimizingStatus:void 0,activeRouteIndex:0,skipApplyBounds:!1,showMapForm:!1,detailedIndex:-1,moreSnippetsShown:!1,activePoint:null,routePoints:(0,a.V)(),viaIndexes:[],routerResponse:null,mrcFeatureCollection:null,activeMrcIndex:null,geolocationError:null,editingCargoPresetId:void 0,activeCargoPresetId:(null==t?void 0:t.defaults.cargo.activeId)||null,cargoPresets:(null==t?void 0:t.defaults.cargo.presets)||[],settings:{auto:{ignoreTrafficJams:!1,avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:i.cz,timeDependent:{type:"departure"}}}}}},73754:(e,t,n)=>{"use strict";function r(){return{input:"",value:"",coords:null}}n.d(t,{Y:()=>r})},56590:(e,t,n)=>{"use strict";function r(e,t){return 0===e?"start":t&&e!==t.length-1?"middle":"finish"}n.d(t,{B:()=>r})},29287:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var r=n(34788);function o(e){var t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");return e.getFullYear()+"-"+t+"-"+n+"T"+r+":"+o+":00"}var i=n(17316);function a(e,t,n){switch(e){case"auto":var a=t[e].timeDependent;return{avoid:0!==t[e].avoid.length?t[e].avoid.join():void 0,timeDependent:{time:a.time?o(new Date(a.time)):void 0},cargo:n&&0!==Object.keys(n).length?n:void 0};case"masstransit":var s=t[e].timeDependent,u=t[e].avoidTypes;return{avoidTypes:0===u.length||u.length===i.cz.length?void 0:u.join(),timeDependent:(0,r._)({},s,{time:s.time?o(new Date(s.time)):void 0})};default:return}}},28361:(e,t,n)=>{"use strict";n.d(t,{D:()=>c});var r=n(34788),o=n(36897),i=n(39705),a=n(37358),s=n(29287),u=n(17316);function c(e,t){var n,c=e.routePoints,l=e.viaIndexes,d=e.travelMode,p=e.activeRouteIndex,m=e.detailedIndex,f=e.settings,v=e.routerResponse,h=e.ignoreTravelModes,g=e.startNavigationInApp,y=e.cargo,_=c[0],b=c.reduce(function(e,n,r){var s=n.coords,u=n.searchResult,l=u&&u.uri&&s&&("toponym"!==u.type||(0,o.J)(u.coordinates,u.displayCoordinates)||u.uri&&a.mI(u.uri))&&(r<t.routes.maxCount-1||r===c.length-1)?u.uri:"";l=a.Jm(l)&&r>0&&r<c.length-1?"":l;var d=s&&(0,i.s)(s,{reverse:!0});return d?{pointCoords:e.pointCoords.concat([d]),pointUris:e.pointUris.concat([a.vz(l)?l:""])}:e},{pointCoords:[],pointUris:[]}),w=b.pointCoords,E=b.pointUris;1===w.length&&_&&!(_.coords||_.value)&&(w.unshift(""),E.unshift(""));var S=f&&(0,s.F)(d,f,y),C=v&&v.routes[p],k="masstransit"===d&&f&&f.masstransit.avoidTypes.length!==u.cz.length?f.masstransit.avoidTypes.join():void 0;return{rtext:w.join("~"),ruri:E.length>0?E.join("~"):void 0,via:l.length>0?l.join("~"):void 0,rtt:u.jk[d],rtn:p>0?p:void 0,rtm:["auto","taxi"].includes(d)&&(null==f?void 0:f.auto.ignoreTrafficJams)?"atm":void 0,rtd:m>-1?m:void 0,routes:(0,r._)({},S,{avoidTypes:k,cargo:(null==(n=t.debug)?void 0:n.params.includes("save-cargo-to-url"))?null==S?void 0:S.cargo:void 0,activeComparisonMode:"comparison"===d&&C&&"taxi"!==C.type?C.type:void 0,timeDependent:S&&S.timeDependent&&("departure"!==S.timeDependent.type||S.timeDependent.time)?S.timeDependent:void 0,ignoreTravelModes:"comparison"===d?h:void 0}),start_navigation:g?"true":void 0}}},51898:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(38614);function o(e,t){var n;return"auto"===e&&!(n=t).uatraits.isMobile&&n.enableRoutesB2B&&r.Z.get("routes_b2b_agreement")||!1}},5835:(e,t,n)=>{"use strict";n.d(t,{n:()=>o,y:()=>i});var r=n(25441);function o(e){return!!(("house"===e.kind||"entrance"===e.kind)&&e.businesses&&e.businesses.totalResultCount>0)}function i(e,t){var n,o,i=(0,r.HA)(e);return t.ui.cardBkoRedesignWithHotels&&i?!!(null==(o=e.advert)?void 0:o.isBko):!!(t.ui.cardBkoRedesign&&!i&&(null==(n=e.advert)?void 0:n.isBko))}},62042:(e,t,n)=>{"use strict";n.d(t,{Z6:()=>u,IP:()=>p,KA:()=>d,M:()=>m,ZI:()=>f,mV:()=>h,eI:()=>l,EX:()=>v});var r=n(4046),o=["overview","timetable","reviews","gallery"],i=["stops","timetable"],a=n(5835),s=n(35501);function u(e){if("services"!==e&&"attractions"!==e)return r.F$.includes(e||"")?e:void 0}function c(e){return r.is.includes(e||"")}function l(e,t){var n,r=(null==t?void 0:null==(n=t.toponymDiscovery)?void 0:n.categories.map(function(e){return e.seoname||e.id}))||[];return c(e)||r.includes(e||"")?e:void 0}function d(e){return o.includes(e||"")?e:void 0}function p(e){return i.includes(e||"")?e:void 0}function m(e){if("overview"!==e)return e}function f(e){return e&&"panorama"!==e&&"feed"!==e?e:"overview"}function v(e){if(e&&"overview"!==e)return e&&e.startsWith(r.dM)?e.replace(r.dM,""):e}function h(e,t){if(!e||"panorama"===e||"gallery"===e)return"overview";var n=s.Y(null==t?void 0:t.items);return"inside"===e&&n&&!(0,a.n)(n)?"overview":c(e)?e:""+r.dM+e}},87708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(18007),o=n(87363),i=n(31336),a=n(91260),s=n(97313),u=n(44054),c=n(44953),l=n(52869),d=(n(34788),n(25164)),p=(n(2467),n(65807),n(50770),{fetchServiceZone:function(e,t){return(0,d.Z)("business/fetchServiceZone",{query:{businessId:e,lang:t.lang,locale:t.locale,ugc_params:t.query.ugc_params}},t)}}),m={fill:"#3cb300",fillOpacity:.15,stroke:[{color:"#3cb300",opacity:1,width:2}],interactive:!1,zIndex:s.I.minimum,simplificationRate:0},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadGeometry=function(){n.setState({geometry:void 0});var e=n.props.result.onlineProperties;if(e&&e.toponymIds&&!e.serviceGeometry){null==(t=n._loadAction)||t.cancel();var t,r=n.props;n._loadAction=l.Z.create(p.fetchServiceZone(r.result.id,r.config),{success:function(e){n.setState({geometry:e})}})}},n._renderPolygon=function(e,t){return o.createElement(a.Z,{key:t,geometry:{type:"Polygon",coordinates:e},drawingStyle:m})},n._renderRadius=function(e){var t=n.props.result.coordinates;return o.createElement(c.ZP,{name:"zone"},o.createElement(u.Z,{center:t,radius:e,drawingStyle:m}))},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadGeometry()},n.componentDidUpdate=function(e){e.result.id!==this.props.result.id&&this._loadGeometry()},n.render=function(){var e=this.props.result.onlineProperties||{},t=e.serviceGeometry,n=e.radius,r=this.state.geometry||t;return n?this._renderRadius(1e3*n):r&&r.length>0?r.map(this._renderPolygon):null},t}(o.Component),v=(0,i.ZP)(f)},34862:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(34788),o=n(20224),i=n(11912),a=n(47855),s=n(79651),u=n(50585),c=n(56009),l=n(77226),d=function(e,t,n){if(!(0,l.Z)(n))return!1;var r=typeof t;return("number"==r?!!((0,u.Z)(n)&&(0,c.Z)(t,n.length)):"string"==r&&t in n)&&(0,s.Z)(n[t],e)},p=n(99651),m=Math.ceil,f=Math.max,v=function(e,t,n){t=(n?d(e,t,n):void 0===t)?1:f((0,p.Z)(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,s=Array(m(r/t));o<r;)s[i++]=(0,a.Z)(e,o,o+=t);return s},h=n(57619),g=n(73841),y=n(94960),_=n(39705),b=n(38024),w=n(25164),E=n(18188),S=n(22645),C=n(35501),k=n(24934),R=n(94430),x="",P={fetch:function(e,t,n){void 0===n&&(n={});var r=n.useSlowHandler?"slow/search":"search",o=I(e,t);return(0,w.Z)(r,{query:o},t).then(function(e){x=e.requestId;var t=(0,R.W)();return t&&t.createChild("search_response",{origin:o.origin,reqid:e.requestId,serpid:e.requestSerpId,suggest_reqid:e.suggestRequestId}).attach().detach(),e})},batchFetch:function(e,t){return v(e,15).reduce(function(e,n){return e.then(function(e){var r={requestQueries:n.map(function(e){return I(e,t)})};return(0,w.Z)("search/batch",{body:r},t).then(function(e){var t,n=null==(t=e.find(function(e){return!!e}))?void 0:t.requestId;return n&&(x=n),e}).catch(function(){return n.map(function(){return null})}).then(function(t){return(0,i._)(e).concat([t])})})},Promise.resolve([])).then(function(e){return(0,h.Z)(e)})},fetchSearchResult:function(e,t,n){if("poi"===e.from){if(e.uri)return P.loadPoiByUri(e.uri,t,(0,r._)({},n||{},{origin:e.origin})).then(function(t){return(0,r._)({},t,{items:S.V(t.items).map(function(t,n){return(0,r._)({},t,{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===n?e.coordinates:t.displayCoordinates})})})});if(e.coordinates)return P.loadPoiByCoordinates(e.coordinates,t,(0,r._)({},n||{},{origin:e.origin})).then(function(t){var n=C.Y(t.items);if(k.b(e.hotspotProperties)&&n){var r={title:"Парковка",description:n.address,hotspotProperties:e.hotspotProperties,id:n.id,type:n.type,kind:n.kind,requestId:n.requestId,analyticsId:n.analyticsId,address:n.address,coordinates:n.coordinates,displayCoordinates:n.displayCoordinates,encodedCoordinates:n.encodedCoordinates,stops:n.stops,panorama:n.panorama,photos:n.photos,uri:n.uri,index:0};t.items=[r]}return t})}if("whatshere"===e.from)return P.loadWhatshere(e,t);var o=(0,r._)({},e,{count:1,searchType:"TEXT"});return o.uri&&(o.mode="uri"),P.fetch(o,t)},prepareChainSearchRequest:function(e,t){return P.fetch({count:1,kind:"locality",text:(0,_.s)(e.center,{reverse:!0}),origin:"chain-city"},t).then(function(t){var n={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},r=t.bounds;if(r){var o,i,a,s,u,c=(o=r[0][1],i=[r[1][0]-r[0][0],r[1][1]-o],u=2*(Math.atan(Math.exp(.5*Math.log(Math.max((-(a=Math.tan((0,g.I)(o+90)/2))*a-a*(s=Math.tan((0,g.I)(i[1])/2)))/(a*s-1),0))))-.25*Math.PI),{center:[(r[0][0]+r[1][0])/2,(0,y.Z)(u)],span:i});n.center=c.center,n.span=c.span}return n})},loadPoiByCoordinates:function(e,t,n){return P.fetch({text:(0,_.s)(e,{reverse:!0}),count:1,origin:n.origin,clientId:n.clientId,snippets:M(t)},t)},loadPoiByUri:function(e,t,n){return P.fetch({mode:"uri",uri:e,count:1,origin:n.origin,clientId:n.clientId,snippets:M(t)},t)},loadWhatshere:function(e,t){var n=e.origin,r=(0,o._)(e,["origin"]);return P.fetch({pin:!0,text:(0,_.s)(r.coordinates,{reverse:!0}),zoom:r.zoom,span:[.001,.001],count:1,origin:n||"whatshere",addBuildingGeometry:e.addGeometry},t).then(function(e){var r,o=C.Y(e.items);return o?("poi"!==n||t.uatraits.isMobile||(o.displayCoordinates=o.coordinates),t.uatraits.isMobile&&(null==(r=e.exactResult)?void 0:r.kind)==="house"&&(o.displayCoordinates=e.exactResult.coordinates),e):null}).catch(function(){return null})}};function M(e){return e.search.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e})}function I(e,t){var n,o,i,a=e.clientId||(t.uatraits.isMobile?"maps-m":"maps"),s=e.origin?a+"-"+e.origin:a,u={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:s,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,business_empty_filter:e.emptyFilters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch,menuParams:t.experiments.menuParams,advert_page_id:e.advert_page_id,pron:e.pron};return e.addBuildingGeometry&&(u.search_geometry="2"),e.sortOrigin&&(u.sort_origin=(0,_.s)(e.sortOrigin)),e.center&&(u.ll=(0,_.s)(e.center)),e.span&&(u.spn=(0,_.s)(e.span)),e.bbox&&(u.bbox=e.bbox.join("~")),e.snippets?u.snippets=e.snippets:u.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(u.snippets=u.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(u.snippets=u.snippets.concat("pin_priority/1.x")),t.experiments.ui.showRelatedPlacesAdvertOnMap&&(u.snippets=u.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e}),u.snippets=u.snippets.concat("related_places/1.x")),u.snippets=u.snippets.join(),e.direct&&(u=(0,r._)({},u,t.advert.direct.searchParams)),e.pin&&(u.geocoder_pin=1),e.type&&(u.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some(function(t){return(0,b.V)(e.bounds,t)})&&(u.business_rll=e.routeCoordinates.map(function(e){return(0,_.s)(e,{fractionDigits:5})}).join("~")),e.clientUsecase&&(u.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(u.suggest_reqid=e.suggestReqid),e.serpId&&(u.serpid=e.serpId),(e.parentReqId||x||t.searchPreloadedResults)&&(u.parent_reqid=e.parentReqId||x||t.searchPreloadedResults.requestId),e.geoWhere&&(u.geowhere=(0,_.s)(e.geoWhere,{reverse:!0})),e.businessMode&&(u.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(u.business_show_closed=e.businessShowClosed?1:0),e.ull&&(u.ull=(0,_.s)(e.ull)),t.experiments.ui.a11ySearchFilters&&(u.a11ySearchFilters=1),(0,r._)({},u,e.rawParams,(n=t.query,o=t.experiments,i=(0,r._)({},o.geoSearchParams),o.boxes&&(i["test-buckets"]=o.boxes),i.internal_pron=o.ui,Object.entries(n).reduce(function(e,t){var n=(0,E._)(t,2),r=n[0],o=n[1];return r.startsWith("search_")&&(e[r]=o),e},i)))}var T=P},14245:(e,t,n)=>{"use strict";function r(e){return"enum"===e.type&&"alternate_vertical"===e.id}n.d(t,{S:()=>r})},99209:(e,t,n)=>{"use strict";var r,o,i=n(18007),a=n(87363),s=n(20745),u=n(31336),c={offsetWidth:0,offsetHeight:0},l=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=a.createRef(),n._calcSizes=function(e){return new Promise(function(t){n.setState({render:e},function(){var e,r,o,i=null!=(o=null==(r=n._ref.current)?void 0:null==(e=r.children)?void 0:e[0])?o:c;t({width:i.offsetWidth,height:i.offsetHeight})})})},n.state={render:function(){return null}},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.setCalcSizes(this._calcSizes)},n.render=function(){return a.createElement("div",{ref:this._ref},this.state.render())},t}(a.PureComponent);t.Z=function(e,t){var n=function(){var n,r;return o||((n=window.document.createElement("div")).setAttribute("style","position: absolute; top: -1000px; left: -1000px"),window.document.body.appendChild(n),r=(0,s.s)(n),o=new Promise(function(e){r.render(a.createElement(u.iV,{value:t},a.createElement(l,{setCalcSizes:e})))})),o.then(function(t){return t(e)})};return r=r?r.then(n):n()}},38648:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(5835);function o(e,t){return"business"===e.type?e.direct?"geodirect":t&&(0,r.y)(e,t)?"bko":e.advert?"yabs":"bizfinder":"toponym"===e.type?"geocoder":"direct"===e.type?"geodirect":"collection"===e.type?"collection":"query-suggestions"===e.type?"query-suggestions":void 0}},35501:(e,t,n)=>{"use strict";function r(e){if(e){var t=e.at(0);return t&&"group"===t.type?t.items.at(0):t}}n.d(t,{Y:()=>r})},22645:(e,t,n)=>{"use strict";function r(e){return void 0===e&&(e=[]),e.reduce(function(e,t){return"group"===t.type?t.items.forEach(function(t){return e.push(t)}):e.push(t),e},[])}n.d(t,{V:()=>r})},24773:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(24934);function o(e){if(e){if("categories"in e&&e.categories){var t;return null==(t=e.categories[0])?void 0:t.class}if("toponym"===e.type)return(0,r.b)(e.hotspotProperties)?"car park":"country"===e.kind?"country_fallback":e.kind}}},3558:(e,t,n)=>{"use strict";function r(e){return"similar"===e.type?e.isAdvert:!!("business"===e.type&&e.advert&&e.advert.highlighted)}n.d(t,{x:()=>r})},27760:(e,t,n)=>{"use strict";function r(e){return"business"===e.type}n.d(t,{z:()=>r})},24934:(e,t,n)=>{"use strict";function r(e){return null!=e&&!!e.vectorMetadata&&"carparks"===e.vectorMetadata.get("_vector_layerName")}n.d(t,{b:()=>r})},37358:(e,t,n)=>{"use strict";n.d(t,{fS:()=>E,BW:()=>y,Uu:()=>d,QT:()=>f,p1:()=>w,AW:()=>b,Jm:()=>h,mI:()=>v,vz:()=>g,lB:()=>m,k8:()=>l,l4:()=>p,A:()=>S});var r=n(18188),o=n(80129),i=n(45731),a=n(39705),s="ymapsbm1://pin",u="ymapsbm1://transit/stop",c=/ymapsbm1:\/\/route\/(\w+)/;function l(e){return!!e&&e.startsWith("ymapsbm1://org")}function d(e){return e&&l(e)?_(e).oid:void 0}function p(e){return e.startsWith(s)}function m(e){return!!e&&e.startsWith(u)}function f(e){return e&&m(e)?_(e).id:void 0}function v(e){return l(e)||p(e)||m(e)}function h(e){return e.startsWith("ymapsbm1://geo")}function g(e){return l(e)||p(e)||m(e)||h(e)}function y(e){return(0,i.P)(_(e).ll)}function _(e){return o.parse(e.split("?")[1])}function b(e){return s+o.stringify({ll:(0,a.s)(e)},{addQueryPrefix:!0})}function w(e){return u+o.stringify({id:e},{addQueryPrefix:!0})}function E(e){return"direct"===e.type?"direct-"+(e.direct.url||e.coordinates):"collection"===e.type?"collection-"+e.alias+"-"+e.analyticsId:e.uri}function S(e){return!function(e){if(e)return({pedestrian:"pedestrian",transit:"masstransit",bicycle:"bicycle",scooter:"scooter",driving:"auto"})[(0,r._)(e.match(c)||[],2)[1]]}(e)?void 0:e}},47868:(e,t,n)=>{"use strict";n.d(t,{bL:()=>k,lR:()=>C});var r=n(11912),o=n(22967),i=n(64381),a=n(22370),s=n(99802);function u(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,p=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,m=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f(e){return e?parseInt(e):1}function v(e){return e&&parseFloat(e.replace(",","."))||0}var h=[31,null,31,30,31,30,31,31,30,31,30,31];function g(e){return e%400==0||e%4==0&&e%100!=0}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){u(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===y(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}var b={};function w(e,t){u(1,arguments);var n,r,o,i,a,s,l,d,p=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:b.weekStartsOn)&&void 0!==r?r:null===(l=b.locale)||void 0===l?void 0:null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=_(e),f=m.getDay();return m.setDate(m.getDate()-((f<p?7:0)+f-p)),m.setHours(0,0,0,0),m}function E(e,t){u(1,arguments);var n=_(e);return Math.round((w(n,t).getTime()-(function(e,t){u(1,arguments);var n,r,o,i,a,s,l,d,p=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:b.firstWeekContainsDate)&&void 0!==r?r:null===(l=b.locale)||void 0===l?void 0:null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1),m=function(e,t){u(1,arguments);var n,r,o,i,a,s,l,d,p=_(e),m=p.getFullYear(),f=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:b.firstWeekContainsDate)&&void 0!==r?r:null===(l=b.locale)||void 0===l?void 0:null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setFullYear(m+1,0,f),v.setHours(0,0,0,0);var h=w(v,t),g=new Date(0);g.setFullYear(m,0,f),g.setHours(0,0,0,0);var y=w(g,t);return p.getTime()>=h.getTime()?m+1:p.getTime()>=y.getTime()?m:m-1}(e,t),f=new Date(0);return f.setFullYear(m,0,p),f.setHours(0,0,0,0),w(f,t)})(n,t).getTime())/6048e5)+1}var S=["break","opening_soon","closing_soon"];function C(e,t,n){void 0===n&&(n={});var r,o=e.status,i=e.currentWorkingStatus,a=n.short?null==i?void 0:i.shortText:null==i?void 0:i.text;return{text:n.showMoved&&(null==(r=e.businessProperties)?void 0:r.moved_to)?"Организация переехала":"open"===o?null!=a?a:"График работы не указан":({"possible-closed":"Возможно, больше не работает","temporary-closed":"Временно не работает","permanent-closed":"Больше не работает"})[o],state:{closed:"open"!==o||!!(i&&!i.isOpenNow),"changing-soon":!!i&&!!i.tag&&i.tag.some(function(e){return S.includes(e)}),"no-data":!a}}}function k(e,t){if(e.workingTime){var n=a.x2(a.$_(t)).getDay(),y=function(e,t){if(!e)return{};var n=[];e.unusual_hours&&(n=n.concat(e.unusual_hours)),e.valid_schedule&&(n=n.concat(e.valid_schedule));var r=a.x2(a.$_(t));return n.reduce(function(e,n){var o=function(e,t){u(1,arguments);var n,r,o,i=c(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==i&&1!==i&&0!==i)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var a=function(e){var t,n={},r=e.split(l.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],l.timeZoneDelimiter.test(n.date)&&(n.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=l.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}(e);if(a.date){var s=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?o:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,i);r=function(e,t){if(null===t)return new Date(NaN);var n,r,o=e.match(d);if(!o)return new Date(NaN);var i=!!o[4],a=f(o[1]),s=f(o[2])-1,u=f(o[3]),c=f(o[4]),l=f(o[5])-1;if(i)return c>=1&&c<=53&&l>=0&&l<=6?((n=new Date(0)).setUTCFullYear(t,0,4),r=n.getUTCDay()||7,n.setUTCDate(n.getUTCDate()+((c-1)*7+l+1-r)),n):new Date(NaN);var p=new Date(0);return s>=0&&s<=11&&u>=1&&u<=(h[s]||(g(t)?29:28))&&a>=1&&a<=(g(t)?366:365)?(p.setUTCFullYear(t,s,Math.max(a,u)),p):new Date(NaN)}(s.restDateString,s.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var y=r.getTime(),_=0;if(a.time&&isNaN(_=function(e){var t=e.match(p);if(!t)return NaN;var n=v(t[1]),r=v(t[2]),o=v(t[3]);return(24===n?0===r&&0===o:o>=0&&o<60&&r>=0&&r<60&&n>=0&&n<25)?36e5*n+6e4*r+1e3*o:NaN}(a.time)))return new Date(NaN);if(a.timezone){if(isNaN(o=function(e){if("Z"===e)return 0;var t=e.match(m);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return o>=0&&o<=59?n*(36e5*r+6e4*o):NaN}(a.timezone)))return new Date(NaN)}else{var b=new Date(y+_),w=new Date(0);return w.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),w.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),w}return new Date(y+_+o)}(n),i=function(e){return u(1,arguments),_(e).getDay()}(o),a=E(o,{weekStartsOn:1})===E(r,{weekStartsOn:1});return!e[i]&&a&&(e[i]=(0,s.p6)(o,t)),e},{})}(e.businessProperties,t);return(0,r._)(e.workingTime.slice(1)).concat([e.workingTime[0]]).map(function(e,r){var s,u=(r+1)%7,c=(0,o.Z)(i.sb[u].slice(0,2));return e?1===e.length&&0===a.Hg(e[0].to,e[0].from)?(s="Круглосуточно",c+=" 00:00-23:59"):(s=e.map(function(e){var t=e.from,n=e.to;return a.BB(t)+" – "+a.BB(n)}),c+=" "+e.map(function(e){var t=e.from,n=e.to;return a.BB(t)+"-"+a.BB(n)}).join(",")):(s="Выходной",c=""),{dayName:(0,i.G7)(t,i.sb[u]),text:s,isWeekend:!e,isToday:n===u,changedDate:y[u],meta:c}})}}},18469:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(18007),o=n(11912),i=n(87363),a=n(31336),s=n(28342),u=n(91260),c=n(37048),l=n(41886),d=n(78597),p=n(35501),m={Polygon:.165,MultiLineString:.05},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._timestamp=0,n._intensityRaf=-1,n._calculateIntensity=function(){if(n._stopAnimateIntensity(),n._getGeometry()){var e=n._getTargetIntensity();n.state.intensity!==e&&(n._stopAnimateIntensity(),n._startAnimateIntensity())}},n._startAnimateIntensity=function(){n._intensityRaf=window.requestAnimationFrame(n._animateIntensity)},n._stopAnimateIntensity=function(){window.cancelAnimationFrame(n._intensityRaf),n._timestamp=0},n._animateIntensity=function(){var e=n._getGeometry();if(e){var t=n._timestamp?(n.props.getToday().getTime()-n._timestamp)/33.333333333333336:1,r=m[e.type]*t,o=n._getTargetIntensity(),i=n.state.intensity,a=i<o?Math.min(o,i+r):Math.max(o,i-r);n.props.config.query["no-animation"]&&(a=o),n.setState({intensity:a}),a!==o?(n._timestamp=n.props.getToday().getTime(),n._startAnimateIntensity()):n._timestamp=0}},n._getTargetIntensity=function(){var e,t,r,i,a,s,u=n._getGeometry();if(!u)return 0;var d=p.Y(n.props.searchResults.items),m="MultiLineString"===u.type&&d&&h(d);return("Polygon"===u.type||m)&&(e=(0,l.o)((s=[]).concat.apply(s,(0,o._)(u.coordinates))),t=n.props.mapLocation.bounds,r=n.props.mapLocation.zoom,i=(0,c.n)(e,r),a=(0,c.n)(t,r),i[0][0]<=a[0][0]&&i[0][1]<=a[0][1]&&i[1][0]>=a[1][0]&&i[1][1]>=a[1][1])?0:1},n._getDrawingStyle=function(e,t){var r=n.state.intensity;switch(e.type){case"MultiLineString":if(h(t))return{stroke:[{color:"#a3a8a8",opacity:r,width:3}],interactive:!1};return{stroke:[{color:"#000000",opacity:.18,width:6}],interactive:!1};case"Polygon":return{fill:g(t)?"#00ff00":"#ff4141",fillOpacity:.05*r,stroke:[{color:g(t)?"#359400":"#d54747",opacity:.7*r,width:2}],interactive:!1};default:return}},n._getGeometry=function(){var e,t=n.props.searchResults,r=t.requestDisplayGeometry;if(!r){var i=p.Y(t.items);i&&"displayGeometry"in i&&(r=i.displayGeometry)}return(null==(e=r)?void 0:e.type)==="MultiLineString"?{type:"MultiLineString",coordinates:e.coordinates}:(null==e?void 0:e.type)==="GeometryCollection"?{type:"Polygon",coordinates:e.geometries.reduce(function(e,t){return(0,o._)(e).concat((0,o._)(t.coordinates))},[])}:void 0},n.state={intensity:0},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calculateIntensity()},n.componentDidUpdate=function(e){var t=this.props;(e.mapLocation!==t.mapLocation||e.searchResults!==t.searchResults)&&this._calculateIntensity()},n.componentWillUnmount=function(){this._stopAnimateIntensity()},n.render=function(){var e=p.Y(this.props.searchResults.items);if(!e)return null;var t=this._getGeometry();if(!t)return null;var n=this._getDrawingStyle(t,e);return i.createElement(u.Z,{geometry:t,drawingStyle:n})},t}(i.PureComponent),v=["rezervation","forest","park","garden","grass"];function h(e){return"toponym"===e.type&&"route"===e.kind}function g(e){switch(e.type){case"toponym":return"vegetation"===e.kind;case"business":return(e.categories||[]).some(function(e){return v.includes(e.class||"")});default:return!1}}var y=(0,s.ZP)((0,a.ZP)((0,d.ZP)({shouldWait:!0})(f)))},8932:(e,t,n)=>{"use strict";var r=n(18007);n(41988);var o=n(87363),i=n(44748),a=n(35846),s=n(44953),u=n(24773),c=n(38648),l=n(37358),d=n(36581),p=n(96313),m=n(67105),f=n(980),v=n(31336),h=n(54499),g=(0,a.Z)({resolved:{},chunkName:function(){return"stories-preview"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("stories-preview").then(n.bind(n,97776))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 97776}}),y=(0,i.Z)("search-placemark-view"),_=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(){t.props.onClick&&t.props.onClick(t.props.result)},t._getPlacemarkData=function(){var e=t.props;return{icon:e.icon,mode:e.mode,result:e.result}},t._onMouseEnter=function(){null==t.props.onMouseEnter||t.props.onMouseEnter.call(t.props,t._getPlacemarkData())},t._onMouseLeave=function(){null==t.props.onMouseLeave||t.props.onMouseLeave.call(t.props,t._getPlacemarkData())},t._renderCounter=function(){var e,n=t.props,r="advert"in n.result&&(null==(e=n.result.advert)?void 0:e.directPixelShowUrl);return r&&n.mode&&"dot"!==n.mode?o.createElement(h.Z,{url:r}):null},t._renderEntrances=function(){var e=t.props;return e.active?o.createElement(p.Z,{result:e.result,analyticsName:"entrances",animated:!0}):null},t._renderEntranceStory=function(){var e=t.props,n=e.result;return e.active&&"business"===n.type&&n.lastMileStory?o.createElement(g,{result:n}):null},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.result,n=e.icon,r=e.title,i=!e.badgeText&&r&&r.position||"right",a=null;if(r){var p=null;e.badgeText&&(p=o.createElement("div",{className:y("badge")},e.badgeText));var m="bottom"!==i?n.centerY:void 0;a=o.createElement("div",{className:y("title"),style:{marginTop:m}},r.element,p)}var v=u.Y(t),h="brandingId"in t&&t.brandingId||"advert"in t&&t.advert&&t.advert.pinBranding?"branding":v?"rubric":"default",g={marginTop:-n.baseY,marginLeft:"left"===i?n.baseX:"right"===i?-n.baseX:void 0};return o.createElement(s.ZP,{name:e.analyticsName||"placemark",nodeState:{type:c.D(t,e.config.experiments),gml_id:t.analyticsId,pinPriority:"business"===t.type?t.pinPriority:void 0,logId:t.logId,permalink:"id"in t?t.id:void 0,uri:l.fS(t),reqid:t.requestId,suggest_reqid:t.suggestRequestId,branding:"brandingId"in t?t.brandingId:void 0,active:e.active,lowRelevance:"lowRelevance"in t&&t.lowRelevance,relatedAdvertType:"relatedAdvertType"in t&&t.relatedAdvertType||void 0,mode:e.mode,iconType:h},logClick:!0},o.createElement(d.Z,{coordinates:e.coordinates,zIndex:e.zIndex,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},o.createElement("div",{className:y({position:i}),"data-object":"search-placemark","data-id":e.result.id,"data-log-id":e.result.logId,"data-mode":e.mode,"data-coordinates":e.coordinates.join(","),"data-icon-type":h,style:(0,f.cq)(e.config,g)},o.createElement("div",{className:y("icon"),style:{width:n.width,height:n.height}},n.element),a)),e.isLayerInitialized?null:this._renderEntrances(),this._renderEntranceStory(),this._renderCounter())},t}(o.PureComponent);t.Z=(0,m.ZP)((0,v.ZP)(_))},95570:(e,t,n)=>{"use strict";n.d(t,{Z:()=>en});var r=n(22678),o=n(34788),i=n(18007),a=n(87363),s=n(18188),u=n(24773),c=n(3558),l=n(44748),d=n(31336),p=n(57636),m=n(21469),f=(0,l.Z)("user-icon-view"),v=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._plusWrapper=function(e){return t.props.havePlus?a.createElement("div",{className:f("plus-wrapper",{serp:t.props.serp})},a.createElement("div",{className:f("plus-wrapper-background",{serp:t.props.serp,black:t.props.blackPlusBackground})},e)):e},t._renderIcon=function(){var e=t.props,n=e.size;if("backgroundImage"in e)return a.createElement("div",{className:f("icon"),style:{backgroundImage:"url("+e.backgroundImage+")"}});if(e.seed){var r=e.char?e.char.toUpperCase():null;return a.createElement("div",{className:f("icon",{id:e.seed.toString().split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%7+1,size:void 0===n?"m":n})},r)}return a.createElement(p.Z,{name:"profile-24",className:f("icon",{empty:!0}),inline:!0})},t}return(0,i._)(t,e),t.prototype.render=function(){return this._plusWrapper(this._renderIcon())},t}(a.Component),h=(0,l.Z)("search-placemark-title-modular-hint-view"),g=function(e){var t=(0,d.ZR)(),n=function(){if("RATING"!==e.hint.type||!e.hint.text)return null;var n=Number.parseFloat(e.hint.text);return Number.isNaN(n)?null:a.createElement("span",{className:h()},a.createElement(p.Z,{name:"star-12",className:h("rating-image"),inline:!0}),a.createElement("span",{className:h("rating")},m.D$(n,t.lang,{min:1,max:1})))}()||function(){if("WORKING_HOURS"!==e.hint.type)return null;var t,n,r,o,i=(null==(n=e.hint.properties)?void 0:null==(t=n.workingHours)?void 0:t.shortText)||e.hint.text;if(!i)return null;var s=(null==(o=e.hint.properties)?void 0:null==(r=o.workingHours)?void 0:r.isOpen)===!1;return a.createElement("span",{className:h({red:s})},i)}()||function(){var t,n,r,o=e.hint.text;if("SOCIAL"!==e.hint.type||!o)return null;var i=(null==(r=e.hint.properties)?void 0:null==(n=r.social)?void 0:null==(t=n.avatarLink)?void 0:t.filter(Boolean))||[];return a.createElement("span",{className:h({social:!0})},i.length>0?a.createElement("div",{className:h("social-avatars")},i.map(function(e,t,n){return a.createElement("div",{key:e||t,className:h("social-avatar"),style:{zIndex:n.length-t}},a.createElement(v,{size:"s",backgroundImage:e.replace("{size}","islands-68")}))})):null,a.createElement("span",{className:h("text")},o))}()||(e.hint.text?a.createElement("span",{className:h()},e.hint.text):null);return n?a.createElement(a.Fragment,null,e.children(n)):null},y=(0,l.Z)("search-placemark-title"),_=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderTitleRating=function(){var e,n=null==(e=t.props.subtitleHints)?void 0:e.find(function(e){return"RATING"===e.type});return n?a.createElement(g,{hint:n},function(e){return a.createElement("div",{className:y("title-rating")},e)}):null},t._renderTitle=function(){return a.createElement("div",{className:y("title")},a.createElement("div",{className:y("title-text")},t.props.title),t._renderTitleRating())},t._renderSubtitleHint=function(e,t){return"RATING"===e.type?null:a.createElement(g,{key:t,hint:e},function(e){return a.createElement("span",{className:y("subtitle-item")},e)})},t._renderSubtitle=function(){return t.props.subtitleHints&&t.props.showSubtitle?a.createElement("div",{className:y("subtitle")},t.props.subtitleHints.map(t._renderSubtitleHint)):null},t._renderMultilineSubtitle=function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:y("multiline-subtitle-width")},t._renderSubtitle()),a.createElement("div",{className:y("multiline-subtitle")},t._renderSubtitle()))},t}return(0,i._)(t,e),t.prototype.render=function(){var e=this.props;return a.createElement("div",{className:y({background:e.background,"low-relevance":e.isLowRelevance,position:e.position,"no-truncate":e.disableTruncate})},this._renderTitle(),e.multilineSubtitle?this._renderMultilineSubtitle():this._renderSubtitle())},t}(a.PureComponent),b=(0,d.ZP)(_),w=n(59410),E=(0,l.Z)("poi-placemark-title"),S=function(e){var t=(0,w.Z)(e.title,{length:40}),n=e.hover?void 0:{color:e.color,WebkitTextFillColor:e.color};return a.createElement("div",{className:E({hover:e.hover}),style:n},t.split(" ").map(function(e,t){return a.createElement("span",{key:t,className:E("word")},e)}))},C=n(47868),k=function(e){function t(t){var n;return(n=e.call(this,t)||this)._fetchIcon=function(){n.props.icon.promise.then(function(e){n.setState({element:e})})},n.state={},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchIcon()},n.componentDidUpdate=function(e){this.props.icon.promise!==e.icon.promise&&this._fetchIcon()},n.render=function(){var e=this.state.element;return e?(null==this.props.children?void 0:this.props.children.call(this.props,e))||e:null},t}(a.Component),R=(0,l.Z)("search-placemark-icon"),x=function(e){var t,n,r,i="lowRelevance"in e.result,s={mode:e.mode,state:e.state,"has-advert":c.x(e.result),"low-relevance":i,closed:(t=e.result,n=e.config,"business"===t.type&&("open"!==t.status||C.lR(t,n).state.closed))},u="business"===e.result.type?i?e.result.businessProperties&&e.result.businessProperties.geoproduct_poi_color||"#999":null==(r=e.style)?void 0:r.color:void 0,l=u&&"hover"!==e.state?{color:u}:void 0;return a.createElement("div",{className:R(s),style:(0,o._)({},l)},a.createElement(k,{icon:e.icon}))},P=n(2467),M=n(89318),I=n(980),T=(0,l.Z)("search-placemark-icons"),Z={dot:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="2ccc4e9f8fe2f8acc9e7eab53f797f56__b" d="M7 14A7 7 0 1 0 7 0a7 7 0 0 0 0 14z"/><filter id="2ccc4e9f8fe2f8acc9e7eab53f797f56__a" width="150%" height="150%" x="-25%" y="-17.9%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd" transform="translate(4 4)"><use fill="#000" filter="url(#2ccc4e9f8fe2f8acc9e7eab53f797f56__a)" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><use fill="#FFF" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><path d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z" fill="currentColor"/><path fill="#000" class="tint" d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z"/></g></svg>\n',width:22,height:22},base:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="cbb016882db5c851af06eebb43c674f7__b" d="M17 31c7.732 0 14-6.268 14-14S24.732 3 17 3 3 9.268 3 17s6.268 14 14 14z"/><filter id="cbb016882db5c851af06eebb43c674f7__a" width="200%" height="200%" x="-50%" y="-50%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.200000003 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><use fill="#000" filter="url(#cbb016882db5c851af06eebb43c674f7__a)" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><use fill="#FFF" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><path fill="currentColor" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/><path fill="#000" class="tint" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/></g></svg>\n',width:34,height:34},active:{source:'<svg width="60" height="68" viewBox="0 0 60 68" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M23.51 51.523a.5.5 0 0 1-.5.477c-.29 0-.51-.21-.52-.477-.145-3.168-1.756-5.217-4.832-6.147C7.53 42.968 0 33.863 0 23 0 10.297 10.297 0 23 0s23 10.297 23 23c0 10.863-7.53 19.968-17.658 22.376-3.076.93-4.687 2.98-4.83 6.147z" id="ae96eeecd750ec2a83543f00c9bc789d__b"/><filter x="-21.7%" y="-15.4%" width="143.5%" height="138.5%" filterUnits="objectBoundingBox" id="ae96eeecd750ec2a83543f00c9bc789d__a"><feGaussianBlur in="SourceGraphic" stdDeviation="3"/><feOffset dy="2"/><feComponentTransfer><feFuncA type="linear" slope=".3"/></feComponentTransfer></filter></defs><g fill="none" fill-rule="evenodd"><g fill-rule="nonzero" transform="translate(7 5)" fill="currentColor"><use filter="url(#ae96eeecd750ec2a83543f00c9bc789d__a)" xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/><use xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/></g><path d="M30 68c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="#fff" fill-rule="nonzero"/><path d="M30 66a2 2 0 1 0 .001-3.999A2 2 0 0 0 30 66z" fill="currentColor"/></g></svg>',className:T("active"),width:60,height:68,baseY:64,centerY:28}};function D(e){var t=e.iconSource,n=e.contentPromise,r=e.config;return(0,o._)({},A(t),{promise:n?n.then(function(e){return L({iconSource:t,content:e,config:r})}):Promise.resolve(L({iconSource:t,config:r}))})}function L(e){var t=e.iconSource,n=e.content,r=e.config,i=A(t),s=i.width,u=i.height,c=i.centerX,l=i.centerY,d={className:t.className,dangerouslySetInnerHTML:{__html:t.source}};return n?a.createElement("div",{style:{position:"relative",width:s,height:u}},a.createElement("div",d),a.createElement("div",{style:(0,I.cq)({isRtl:r.isRtl},{position:"absolute",left:c,top:l})},"point"===n?a.createElement("div",{className:T("content")}):n)):a.createElement("div",(0,o._)({style:{width:s,height:u}},d))}function A(e){var t=Math.round(e.width/2),n=Math.round(e.height/2);return{width:e.width,height:e.height,baseX:e.baseX||t,baseY:e.baseY||n,centerX:e.centerX||t,centerY:e.centerY||n}}var z=(0,l.Z)("rubric-placemark-icons-provider"),N={geoproduct:{source:'<svg fill="none" height="40" width="34" xmlns="http://www.w3.org/2000/svg"><filter id="24609e80b326bd45d5a64be8fc7ffd36__a" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse" height="38" width="32" x="1" y="2"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/></filter><g filter="url(#24609e80b326bd45d5a64be8fc7ffd36__a)"><path fill="#000" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/></g><path fill="#fff" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/><path fill="currentColor" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/><path fill="#000" class="tint" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/></svg>',width:34,height:40,centerY:17,baseY:38},"low-relevance":{source:'<svg width="28" height="34" viewBox="0 0 28 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.2247 28.9111C12.133 27.9459 11.6447 27.1349 10.8253 26.292C10.2356 25.6855 9.54841 25.1305 8.78321 24.5125C8.44143 24.2365 8.08408 23.9479 7.71292 23.6366C5.37129 21.6722 2.89999 19.1042 2.89999 14.4658C2.89999 8.35203 7.86976 3.39999 14 3.39999C20.1304 3.39999 25.1 8.35434 25.1 14.4658C25.1 19.1025 22.6402 21.6727 20.3021 23.6393C19.9262 23.9555 19.5645 24.2481 19.2186 24.5279C18.46 25.1415 17.7778 25.6935 17.1898 26.2968C16.3675 27.1407 15.8737 27.9527 15.7745 28.9181L15.765 29.0107C15.7161 29.4865 15.4554 29.874 15.1734 30.1276C14.8914 30.3813 14.4782 30.6 13.9988 30.6C13.0882 30.6 12.3249 29.9125 12.2344 29.008L12.2247 28.9111Z" fill="white" fill-opacity="0.6"/><path d="M4.00143 14.5004C4.00143 8.97615 8.47795 4.50179 14 4.50179C19.5221 4.50179 23.9986 8.9783 23.9986 14.5004C23.9986 22.8325 15.3405 23.7089 14.8332 28.6624C14.83 28.694 14.8269 28.7245 14.8239 28.7537C14.785 29.1334 14.3805 29.4982 13.9989 29.4982C13.5738 29.4982 13.218 29.1765 13.1759 28.7535C13.173 28.7243 13.1699 28.694 13.1668 28.6624C12.6965 23.6996 4.00143 22.8325 4.00143 14.5004Z" fill="currentColor"/></svg>\n',width:28,height:34,baseY:32,centerX:14,centerY:15},card:{source:'<svg width="28" height="32" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 14c0 5.508 3.18 10.273 7.805 12.558 3.026 1.573 4.847 3.215 5.463 4.928a.778.778 0 0 0 1.464 0c.616-1.713 2.437-3.355 5.463-4.928C24.819 24.273 28 19.508 28 14c0-7.732-6.268-14-14-14S0 6.268 0 14z" fill="currentColor"/></svg>',width:34,height:40,baseY:38,centerX:14,centerY:14}},U={};function F(e){var t=e.mode,n=e.iconsPromise,r=e.pinType,o=e.config;return{default:D({iconSource:"base"===t&&r&&N[r]||Z[t],contentPromise:n.then(function(e){return a.createElement("div",{className:z(""+t+"-content",{"pin-type":r}),dangerouslySetInnerHTML:{__html:e[t]}})}),config:o})}}var O={get:function(e,t,n){var r=function(e,t){if(!U[e]){var n=["small","normal"].map(function(n){return M.Gr({type:"rubrics",name:e,size:n},t)||""}).map(function(e){return e?(0,P.Z)({url:e,parser:"string"}):Promise.resolve("")});U[e]=Promise.all(n).then(function(e){var t=(0,s._)(e,2);return{base:t[0],active:t[1]}})}return U[e]}(e,t);return{base:F({mode:"base",iconsPromise:r,pinType:n,config:t}),active:F({mode:"active",iconsPromise:r,config:t})}}},q=n(75766),B={dot:{width:18,height:18},base:{width:34,height:40,baseY:36},active:{width:60,height:68,baseY:64,centerY:28}},H={get:function(e,t){return Object.entries(e).reduce(function(e,n){var r=(0,s._)(n,2),i=r[0],a=r[1];return(0,o._)({},e,(0,q._)({},i,Object.entries(a||{}).reduce(function(e,n){var r,a,u,c=(0,s._)(n,2),l=c[0],d=c[1];return(0,o._)({},e,(0,q._)({},l,D({iconSource:(0,o._)({source:((r=d).startsWith("https://")||(r="https://avatars.mds.yandex.net/get-{id}_%s".replace("{id}",r.replace(/--/g,"/"))),a=Math.max(2,Math.ceil(window.devicePixelRatio||1)),u=r.replace("%s","x"+a),'<img height="'+B[i].height+'" width="'+B[i].width+'" src="'+u+'" />')},B[i]),config:t})))},{})))},{})}},W={width:60,height:68,baseY:64,centerY:28},j={transit:26},G={get:function(e){var t,n,r,i,a,s=e.iconUrl,u=e.tags,c=e.config,l=(u||[]).find(function(e){return Object.keys(j).includes(e)});return{active:(n=(t={iconUrl:s,meta:(0,o._)({},W,{centerY:l&&j[l]||W.centerY}),config:c}).iconUrl,r=t.meta,i=t.config,a="width: "+r.width+"px; height: "+r.height+"px;background: url("+n+") 50% bottom no-repeat; background-size: contain",{default:D({iconSource:(0,o._)({source:'<div class="poi-icon-provider" style="'+a+'" />'},r),config:i})})}}},Y=n(99209),V=n(36897),X=n(37358);function K(e,t){return"children"in t?t.children.map(function(t){return K(e,t)}).find(Boolean)||null:e(t)?t:null}var J={},$=n(8932),Q=n(52869),ee=n(97313),et=function(e){function t(t){var n;return(n=e.call(this,t)||this)._calcPlacemark=function(e){Q.Z.cancel(n._calcPlacemarkAction);var t,r,i,l,d,p,m,f=n.state.hover?"hover":"default",v=e.result,h=e.mode,g=e.config;n._calcPlacemarkAction=Q.Z.create(Promise.all([(r=(t=m={result:v,mode:h,state:f,config:g}).state||"default",i=["title","subtitle"].includes(t.mode)?"base":t.mode,p=(null==(d=null==(l=function(e){var t=e.result,n=u.Y(t),r="flyover"in t&&(null==(o=t.flyover)?void 0:o.selectedIconUrl);if(r)return G.get({iconUrl:r,config:e.config});if("lowRelevance"in t)return O.get(n||"",e.config,"low-relevance");if("business"===t.type&&!t.direct&&t.advert&&t.advert.pinBranding)return H.get(t.advert.pinBranding,e.config);if("hotspotProperties"in t&&t.hotspotProperties&&t.hotspotProperties.selectedIconUrl)return G.get({iconUrl:t.hotspotProperties.selectedIconUrl,tags:t.hotspotProperties.tags,config:e.config});if(n){var o,i,a=(null==(i=e.style)?void 0:i.forceGeoproduct)||c.x(t)?"geoproduct":"default";return O.get(n,e.config,a)}}(t))?void 0:l[i])?void 0:d[r])||(null==d?void 0:d.default)||D({iconSource:Z[i],contentPromise:Promise.resolve("dot"!==i?"point":void 0),config:t.config}),(0,o._)({},p,{element:a.createElement(x,{result:t.result,state:r,icon:p,mode:i,config:t.config,style:t.style})})),function(e){var t,n,r,i,s,u,c,l="shortTitle"in e.result&&e.result.shortTitle||e.result.title||"",d="modularPin"in e.result?e.result.modularPin.subtitleHints:void 0,p="hover"===e.state;if(e.hideTitle||!l||["dot","base"].includes(e.mode)&&!p)return Promise.resolve(void 0);e.rootFolder&&"toponym"===e.result.type&&(u=null==(t=e.result,n=e.rootFolder,r=X.fS(t),c=K(function(e){return e.uri===r},n)||(i={coordinates:t.displayCoordinates},K(function(e){var t=X.BW(e.uri);return X.l4(e.uri)&&null!==t&&(0,V.J)(t,i.coordinates)},n)))?void 0:c.title);var m="lowRelevance"in e.result,f="business"===e.result.type,v={title:null!=u?u:l,subtitleHints:d,showSubtitle:["active","subtitle"].includes(e.mode)||p&&!f,background:"active"!==e.mode,isLowRelevance:m,disableTruncate:!0,multilineSubtitle:"modularPin"in e.result?e.result.modularPin.allowMultilineSubtitle:void 0},h=m&&"business"===e.result.type&&(null==(s=e.result.businessProperties)?void 0:s.geoproduct_poi_label_color)||void 0,g=e.titlePosition||"right",y=m&&!["dot","active"].includes(e.mode)&&e.config.isVectorEnabled?a.createElement(S,{title:v.title,color:h,hover:"hover"===e.state}):a.createElement(b,(0,o._)({},v,{position:g})),_=JSON.stringify(v);return J[_]=J[_]||(0,Y.Z)(function(){return y},e.config),J[_].then(function(e){return(0,o._)({},e,{element:y,position:g})})}(m)]).then(function(e){var t=(0,s._)(e,2);return{icon:t[0],title:t[1]}}),{success:function(e){return n.setState({placemark:e})}})},n._onMouseEnter=function(){var e=(0,r._)(n).props;n.setState({hover:!0},function(){return n._calcPlacemark(e)})},n._onMouseLeave=function(){var e=(0,r._)(n).props;n.setState({hover:!1},function(){return n._calcPlacemark(e)})},n.state={hover:!1},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calcPlacemark(this.props)},n.componentDidUpdate=function(e){e!==this.props&&this._calcPlacemark(this.props)},n.componentWillUnmount=function(){Q.Z.cancel(this._calcPlacemarkAction)},n.render=function(){var e=this.state.placemark;if(!e)return null;var t=this.props,n=t.result,r=ee.I.search[t.mode];return a.createElement($.Z,(0,o._)({coordinates:t.coordinates,result:n},e,{analyticsName:t.analyticsName,zIndex:this.state.hover?r+1:r,onClick:t.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}))},t}(a.Component),en=(0,d.ZP)(et)},92830:(e,t,n)=>{"use strict";var r=n(2467),o=n(25164);t.Z={getRoadEvents:function(e,t){return(0,o.Z)("traffic/getRoadEvents",{query:{id:e}},t)},getRoadEvent:function(e,t){return(0,o.Z)("traffic/getRoadEvent",{query:{eventId:e}},t)},getForecast:function(e,t){return(0,o.Z)("traffic/getForecast",{query:{id:e}},t)},actual:{getLevel:function(e,t){return(0,o.Z)("traffic/getLevelInfo",{query:{ids:e.map(String)}},t)}},archive:{getMetaData:function(e,t,n){return(0,r.Z)({url:n.hosts.trafficArchive+"description/traffic-light",query:{tm:t,ids:e.join(","),l:n.locale},jsonp:!0}).then(function(t){var n=(t.data.features||[]).find(function(t){var n=t.properties;return!!(n&&n.HotspotMetaData&&e.includes(n.HotspotMetaData.id))});if(!n)return{level:null};var r=n.properties&&n.properties.JamsMetaData.level;return{level:void 0!==r?r:null}})}}}},59270:(e,t,n)=>{"use strict";n.d(t,{ZU:()=>o,t0:()=>i});var r={closed:"Перекрытие движения",drawbridge:"Развод моста",reconstruction:"Дорожные работы",accident:"ДТП",police:"Камера",other:"Прочее",chat:"Прочее",danger:"Опасный участок"};function o(e){return e||0===e?e>=7?"red":e>=4?"yellow":"green":"gray"}function i(e){return e.type&&r[e.type]||r.other}},31104:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r={tabIndex:-1,"aria-hidden":!0}},7418:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(34788),o=n(18188),i=n(13243),a=(0,n(1851).Z)(Object.getPrototypeOf,Object),s=n(18533),u=Object.prototype,c=Function.prototype.toString,l=u.hasOwnProperty,d=c.call(Object),p=function(e){if(!(0,s.Z)(e)||"[object Object]"!=(0,i.Z)(e))return!1;var t=a(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d},m=function e(t,n){var i=(0,r._)({},t);return Object.entries(n).forEach(function(t){var n=(0,o._)(t,2),r=n[0],a=n[1];i.hasOwnProperty(r)&&p(a)?i[r]=e(i[r],a):i[r]=a}),i}},64381:(e,t,n)=>{"use strict";n.d(t,{sb:()=>r,G7:()=>o});var r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function o(e,t){return({sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"})[t]}},65569:(e,t,n)=>{"use strict";function r(e){return e>900?({distance:a(e/1e3,2)}).distance+" км":({distance:a(e,2)}).distance+" м"}function o(e,t){var n="quadratic"===t?1e3:1;return e>900*n?({distance:i(s(e/(1e3*n)))}).distance+" км":({distance:i(s(e))}).distance+" м"}function i(e){return e.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1 ")}function a(e,t){if(void 0===t&&(t=1/0),t<1)throw Error("Can't round to significance of "+t+".");var n=Math.max(0,Math.round(e).toString().length-t);return Number(Math.round(e/Math.pow(10,n))+Array(n).fill("0").join(""))}function s(e){if(e>100)return Math.round(e);var t=Math.pow(10,e>10?1:2);return Math.round(e*t)/t}n.d(t,{Bb:()=>r,Lr:()=>a,jq:()=>o})},91086:(e,t,n)=>{"use strict";n.d(t,{mi:()=>c,Zj:()=>u,Y0:()=>o,du:()=>i,kh:()=>s,pk:()=>a,n5:()=>d,go:()=>p});var r={low:null,high:"tier1"},o="tile3d",i=function(e){return e.uatraits.isMobile?r.low:r.high};function a(e){var t;return!!(e&&"mapFeatures"in e&&(null==(t=e.mapFeatures)?void 0:t.some(function(e){return"flyover"in e&&e.flyover})))}function s(e){var t;return!!(e&&"flyoverObjects"in e&&(null==e?void 0:null==(t=e.flyoverObjects)?void 0:t.length)!==0)}var u=15,c={type:"placemark",zoomRange:[15,999],caption:{color:"#1ABAEB2",hoveredColor:"#f43",backgroundColor:"white",subtitle:{text:"3D макет",color:"#198CFF",hoveredColor:"#f43"},text:""},icon:{type:"marker",backgroundColor:"#5FB4ED",hoveredBackgroundColor:"#f43",activeBackgroundColor:"#f43",iconColor:"white"}},l=new Map;function d(e,t,n){var r=""+e+"___"+t+"___"+n,o=l.get(r);if(void 0!==o)return o;var i=l.size;return l.set(r,i),i}function p(e,t){var n;return e&&null!=(n=null==t?void 0:t.getTile3dState(o+":buildings",e))?n:null}},99802:(e,t,n)=>{"use strict";n.d(t,{o0:()=>a,p6:()=>i});var r=n(22370),o=["january","february","march","april","may","june","july","august","september","october","november","december"];function i(e,t,n){void 0===n&&(n={});var i=r.x2(r.$_(t)),a={day:e.getDate(),month:n.isShortMonth?({april:"апр",august:"авг",december:"дек",february:"февр",january:"янв",july:"июля",june:"июня",march:"марта",may:"мая",november:"нояб",october:"окт",september:"сент"})[o[e.getMonth()]]:({april:"апреля",august:"августа",december:"декабря",february:"февраля",january:"января",july:"июля",june:"июня",march:"марта",may:"мая",november:"ноября",october:"октября",september:"сентября"})[o[e.getMonth()]],year:e.getFullYear()};return(void 0!==n.isShortDate?n.isShortDate:e.getFullYear()===i.getFullYear())?a.day+" "+a.month:a.day+" "+a.month+" "+a.year}function a(e,t,n){var o,a;return i(e,t,n)+", "+(o=e.toTimeString().split(" ")[0],(a=r.Qc(o))?""+r.BB(a):"")}},21469:(e,t,n)=>{"use strict";n.d(t,{D$:()=>c,xG:()=>x,yV:()=>s,rF:()=>R,On:()=>m,Xg:()=>P});var r=n(18188),o={max:2},i={ru:"ru",en:"en",uk:"ru",tr:"tr",uz:"ru",kk:"ru",az:"ru",ar:"en","sr-Latn":"tr",hy:"tr",es:"tr"},a={ru:{decimal:",",thousands:" "},en:{decimal:".",thousands:","},tr:{decimal:",",thousands:"."}};function s(e){return a[i[e]]}var u=Object.keys(i).reduce(function(e,t){var n;return e[t]=(n=s(t),function(e,t){var i,a,s,u,c,l,d;return i=e,void 0===(a=t)&&(a=o),"number"==typeof a.max&&(i=Math.round(i*Math.pow(10,a.max))/Math.pow(10,a.max)),u=(s=(0,r._)(i.toString().split("."),2))[0],l=void 0===(c=s[1])?"":c,n.thousands&&(u=u.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+n.thousands)),"number"==typeof a.max&&(l=l.slice(0,a.max)),"number"==typeof a.min&&l.length<a.min&&(l+="0".repeat(a.min-l.length)),d=[u,l].filter(Boolean).join(n.decimal),!l&&a.forceDecimal?d+a.forceDecimal:d}),e},{});function c(e,t,n){return u[t](e,n)}var l={RUB:!0,EUR:!0,USD:!0,GBP:!0,BYN:!0,UAH:!0,KZT:!0,AED:!0,AMD:!0,AZN:!0,GEL:!0,GHC:!0,GHS:!0,ILS:!0,XOF:!0,KGS:!0,LVL:!0,LTL:!0,MDL:!0,RON:!0,RSD:!0,UZS:!0},d={RUB:"₽",EUR:"€",USD:"$",GBP:"£",UAH:"грн.",ILS:"₪",KZT:"₸"},p=(Object.entries(d).reduce(function(e,t){var n=(0,r._)(t,2),o=n[0],i=n[1];return i&&(e[i]=o),e},{}),{XOF:"CFA"}),m={XOF:!0,RSD:!0};function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.keys(l).reduce(function(e,n){var r=t.includes(n)&&d[n];return e[n]={isSymbol:!!r,value:r||p[n]||n},e},{})}var v=f("RUB","EUR","USD","GBP","UAH","ILS","KZT"),h=f("UAH"),g=f("EUR","USD","GBP","ILS","RSD"),y=f("EUR","USD","GBP","ILS","AED"),_=function(e,t,n){return""+e+n+" "+t.value},b=function(e,t,n){return""+t.value+(t.isSymbol?"":" ")+n+e};function w(e,t){return function(n,r,o){return e(n,t[r],o)}}var E=w(_,v),S=w(_,h),C=w(b,y),k=w(b,g),R={ru:E,en:C,uk:S,tr:k,uz:E,kk:E,az:E,ar:C,"sr-Latn":k,hy:k,es:k};function x(e,t){var n,r,o=m[e.currency]||!e.fractionDigits?0:e.fractionDigits,i=null!=(n=e.fractionOptions)?n:{min:o,max:o},a=c(e.value,t,i);return R[t](a,e.currency,null!=(r=e.postfix)?r:"")}function P(e,t){return(e.match(RegExp("[\\d"+t+"]+","g"))||[]).join("").replace(t,".")}},71392:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,A:65,D:68,P:80,S:83,W:87}},980:(e,t,n)=>{"use strict";n.d(t,{cq:()=>s});var r=n(18188),o={paddingLeft:"paddingRight",paddingRight:"paddingLeft",marginLeft:"marginRight",marginRight:"marginLeft",left:"right",right:"left",borderLeft:"borderRight",borderRight:"borderLeft"},i={padding:function(e){return a({isRtl:!0},e)},margin:function(e){return a({isRtl:!0},e)}};function a(e,t){return e.isRtl?[t[0],t[3],t[2],t[1]]:t}function s(e,t){return e.isRtl?Object.entries(t).reduce(function(e,t){var n=(0,r._)(t,2),a=n[0],s=n[1];return i[a]?e[a]=i[a](s):e[o[a]||a]=s,e},{}):t}},58847:(e,t,n)=>{"use strict";function r(e){var t;return e.uatraits.isMobile&&(null==(t=e.query.source)?void 0:t.includes("wizbiz_new_map"))}n.d(t,{d:()=>r})},61250:(e,t,n)=>{"use strict";n.d(t,{J6:()=>l,aA:()=>d,Mg:()=>c});var r=n(11912),o=n(4046),i=u(o.F$),a=u(o.is),s={orgpage:(0,r._)(i).concat(["panorama","feed"]),whatshere:(0,r._)(a).concat(["panorama","gallery"]),toponym:(0,r._)(a).concat(["panorama","gallery"])};function u(e){return e.filter(function(e){return"overview"!==e})}function c(e,t){return!!t&&s[e].includes(t)}function l(e,t){if("sublanding"in t&&c(e,t.sublanding))return t.sublanding}function d(e,t){return"orgpage"===e&&!!t&&["features","posts","chain"].includes(t)}},97313:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var r={screenshotDialog:99999,clipboard:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},advert:5e3,dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},15559:(e,t,n)=>{"use strict";function r(e){return!!e&&e instanceof DOMException&&"AbortError"===e.name}function o(e){return void 0===e&&(e="Aborted"),new DOMException(e,"AbortError")}n.d(t,{D:()=>r,o:()=>o})},17451:(e,t,n)=>{"use strict";n.d(t,{SF:()=>o,Sv:()=>i,zw:()=>a,wo:()=>s});var r=n(41372),o=256,i=130,a=32,s=function(e){if("tile"===e.type){var t=(0,r.pi)({},e);return e.raster&&(t.raster=(0,r.pi)({},e.raster)),e.vector&&(t.vector=(0,r.pi)({},e.vector)),t}return(0,r.pi)({},e)}},30141:(e,t,n)=>{"use strict";n.d(t,{u:()=>function e(t){if("function"==typeof t)return t;if("string"==typeof t)return t in o||(0,r._y)(Error("Unexpected timing function used: ".concat(t))),e(o[t]);var n=t.p1,i=t.p2,a={x:3*n.x,y:3*n.y},s={x:3*(i.x-2*n.x),y:3*(i.y-2*n.y)},u={x:3*(n.x-i.x)+1,y:3*(n.y-i.y)+1};return function(e){var t;return t=function(e){for(var t,n,r,o=e,i=0;i<5&&!(.001>Math.abs((t=o,r=u.x*Math.pow(t,3)+s.x*Math.pow(t,2)+a.x*t-e)));)o-=r/(n=o,a.x+n*(2*s.x+3*n*u.x)),i++;return o}(e),u.y*Math.pow(t,3)+s.y*Math.pow(t,2)+a.y*t}}});var r=n(34781),o={linear:{p1:{x:0,y:0},p2:{x:1,y:1}},ease:{p1:{x:.25,y:.1},p2:{x:.25,y:1}},"ease-in":{p1:{x:.42,y:0},p2:{x:1,y:1}},"ease-out":{p1:{x:0,y:0},p2:{x:.58,y:1}},"ease-in-out":{p1:{x:.42,y:0},p2:{x:.58,y:1}}}},77600:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>i,ZE:()=>a,$7:()=>function e(t){var n;return"FeatureCollection"===t.type?(n=[]).concat.apply(n,t.features.map(function(t){return e(t)})):[t]},JO:()=>s});var r=n(41372),o=n(34781);function i(e,t){return(0,r.pi)((0,r.pi)({},e),{geometry:e.geometry&&a(e.geometry,t)})}function a(e,t){switch(e.type){case"Point":return(0,r.pi)((0,r.pi)({},e),{coordinates:t(e.coordinates)});case"LineString":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(t)});case"MultiLineString":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"Polygon":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"MultiPolygon":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(function(e){return e.map(function(e){return e.map(t)})})});default:(0,o._y)(Error("Unexpected geometry type: ".concat(e.type)))}}function s(e){"string"!=typeof e.id&&(0,o._y)(Error("Feature or collection id must be a string"))}},21840:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r="hidden"},2315:(e,t,n)=>{"use strict";n.d(t,{XK:()=>u,X_:()=>s,F7:()=>l});var r=n(41372),o=n(34781),i=n(26300),a=n(90540),s="__empty__";function u(e){var t,n,u,c,l,d,p={id:e.id,grouppedWith:e.grouppedWith,source:e.source?e.source:s,type:e.type?e.type:"default",implementation:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.implementation){var r=e.implementation.apply(e,t);if(r)return r}return i._.apply(void 0,t)},options:{raster:{},vector:{}}};return!p.grouppedWith&&(null===(n=null===(t=e.options)||void 0===t?void 0:t.vector)||void 0===n?void 0:n.parentLayerId)&&(p.grouppedWith=null===(c=null===(u=e.options)||void 0===u?void 0:u.vector)||void 0===c?void 0:c.parentLayerId),(null==(d=null===(l=e.options)||void 0===l?void 0:l.raster)?void 0:d.implementation)&&(e.implementation||(e.implementation=function(){var e=d.implementation;return e.prototype instanceof a.x||(0,o._y)(Error("Implementation must be derived from CustomDomLayer")),e})),e.options&&(e.options.raster&&(p.options.raster=(0,r.pi)({},e.options.raster)),e.options.vector&&(p.options.vector=(0,r.pi)({},e.options.vector))),p}var c=/^(\w+)?(?::(\w+)(?:\((.*)\))?)?$/;function l(e,t){var n=e.match(c);n&&0!==n[0].length||(0,o._y)(Error("Bad string layer spec '".concat(e,"'")));for(var i=n[1],a=n[2],s=n[3],u=s?s.split(","):[],l=Object.create(null),d=0;d<u.length;d++)l[u[d]]=!0;return{id:e,source:i,type:a,options:{raster:(0,r.pi)((0,r.pi)({},l),null==t?void 0:t.raster),vector:(0,r.pi)((0,r.pi)({},l),null==t?void 0:t.vector)}}}},26300:(e,t,n)=>{"use strict";n.d(t,{_:()=>r,M:()=>o});var r=function(e){var t;return null===(t=o[e.effectiveMode])||void 0===t?void 0:t.call(o,e)},o={raster:function(){return null},vector:function(){return null}}},34781:(e,t,n)=>{"use strict";n.d(t,{YD:()=>i,H:()=>a,_y:()=>s});var r,o=n(15559);function i(e){r||(r=e({project:"ymaps3",unhandledRejection:!1,uncaughtException:!1}))}function a(e){var t,n,i;e&&"object"==typeof e||(e=Error(e||"empty")),n=(t=e).logged,i=/fetch|network/i.test(t.message),n||(0,o.D)(t)||i||(r?(r({additional:e.additionalInfo},e),e.logged=!0):window.console.error(e))}function s(e){throw a(e),e}i.reset=function(){r=void 0}},73760:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(30892);function o(e){var t=e.getLayersEx(),n=t.topRasterLayers,o=t.mainLayers,i=new r.Set;n.forEach(function(e){return i.add(e.source)}),o.forEach(function(e){return i.add(e.source)});var a=[];return i.forEach(function(e){return a.push(e)}),a.map(function(t){return e.getDataSource(t)}).map(function(e){var t;return(null==e?void 0:e.type)==="tile"&&(null===(t=null==e?void 0:e.copyrights)||void 0===t?void 0:t.join(" "))}).filter(Boolean).join(" ")}},30892:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mathSign:()=>i,mathLog2:()=>a,mathLog10:()=>s,arrayFindIndex:()=>f,arrayFind:()=>v,arrayFrom:()=>h,arraySome:()=>_,Symbol:()=>c,Map:()=>d,Set:()=>m,WeakMap:()=>p,MAX_SAFE_INTEGER:()=>u});var r=n(34781),o={},i=Math.sign?Math.sign.bind(Math):function(e){return e<0?-1:0===e?0:1},a=Math.log2?Math.log2.bind(Math):function(e){return Math.log(e)*Math.LOG2E},s=Math.log10?Math.log10.bind(Math):function(e){return Math.log(e)/Math.LN10},u=Number.MAX_SAFE_INTEGER||9007199254740991,c="undefined"==typeof Symbol?function(e){return"__Symbol_".concat(e,"_").concat(Date.now(),"_").concat(Math.random())}:Symbol,l=function(e){return new e([[o,1]]).has(o)?function(t){return new e(t)}:function(t){var n=new e;if(void 0!==t)for(var r=0;r<t.length;r++){var o=t[r],i=o[0],a=o[1];n.set(i,a)}return n}},d=l(Map),p=l(WeakMap),m=new Set([o]).has(o)?function(e){return new Set(e)}:function(e){var t=new Set;if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n];t.add(r)}return t};d.prototype=Map.prototype,p.prototype=WeakMap.prototype,m.prototype=Set.prototype;var f=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){for(var r=0;r<e.length;r++)if(t.call(n,e[r],r,e))return r;return -1},v=Array.prototype.find?function(e,t,n){return e.find(t,n)}:function(e,t,n){var r=f(e,t,n);return -1===r?void 0:e[r]},h=Array.from?Array.from:function(e){var t,n=Object(e);null==e&&(0,r._y)(TypeError("Array.from requires an array-like object - not null or undefined"));var o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;void 0===o||y(o)||(0,r._y)(TypeError("Array.from: when provided, the second argument must be a function"));for(var a=isNaN(t=Number(n.length))||t<=0?0:Math.min(t,u),s=y(this)?Object(new this(a)):Array(a),c=0;c<a;){var l=n[c];o?s[c]=void 0===i?o(l,c):o.call(i,l,c):s[c]=l,c+=1}return s.length=a,s},g=Object.prototype.toString;function y(e){return"function"==typeof e||"[object Function]"===g.call(e)}var _=function(e,t,n){return -1!==f(e,t,n)}},90540:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r=function(){function e(e){this._props=e}return e.prototype._requestRender=function(){this._props.requestRender()},e.prototype.render=function(){},e}()},37806:(e,t,n)=>{"use strict";n.d(t,{d3:()=>r,m6:()=>o,D2:()=>c,D4:()=>l,D6:()=>d,D8:()=>p,eU:()=>m,iO:()=>f,KH:()=>a,AL:()=>s,Qs:()=>u,dg:()=>v,Iv:()=>i});var r=6378137,o=23,i=.0818191908426,a=1-Math.sqrt(.9933056200098622),s=(1-a)*6378137,u=1e-10,c=.0033471899950689+22407361726178688e-20/24+3000067879430204e-22/12+44814723452357376e-21*44814723452357376e-21*13/360,l=3137030641665016e-19/48+8700196850347591e-21/240+44814723452357376e-21*44814723452357376e-21*811/11520,d=2100047515601143e-21/120+44814723452357376e-21*44814723452357376e-21*81/1120,p=44814723452357376e-21*44814723452357376e-21*4279/161280,m=1e-6,f=1e-7,v=[!0,!1]},38024:(e,t,n)=>{"use strict";n.d(t,{V:()=>u});var r=n(95930),o=n(15900),i=n(80283),a=n(37048),s=n(37806);function u(e,t,n){e=n?[[Math.min(e[0][0],e[1][0])-n,Math.min(e[0][1],e[1][1])-n],[Math.max(e[0][0],e[1][0])+n,Math.max(e[0][1],e[1][1])+n]]:e;var u=(0,r.Z)(s.m6),c=(0,o.f)(t,s.m6);return(0,i.C)((0,a.n)(e,s.m6),u).some(function(e){return c[0]>=e[0][0]&&c[0]<=e[1][0]&&c[1]>=e[0][1]&&c[1]<=e[1][1]})}},95930:(e,t,n)=>{"use strict";function r(e){return Math.pow(2,e+8)}n.d(t,{Z:()=>r})},41421:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(48447),o=n(48860);function i(e){return function(e){for(var t=[e[0]],n=1;n<e.length;n++){var r=t[n-1],o=e[n];r[0]>0&&o[0]<0&&r[0]>90&&o[0]<0?t.push([o[0]+360,o[1]]):r[0]<0&&o[0]>0&&r[0]<-90&&o[0]>0?t.push([o[0]-360,o[1]]):t.push(o)}return t}(function(e,t,n){for(var i=(0,r.t)(e,t,void 0),a=i.pathFunction,s=i.startPoint,u=i.startDirection,c=i.endPoint,l=i.endDirection,d=[s],p=0;p<3;p++)d=d.concat(function e(t,n,r,i,a){void 0===i&&(i=t(n)),void 0===a&&(a=t(r));var s,u,c,l=Math.PI/60,d=Math.PI/4,p=[],m=Math.abs((0,o.d)(Math.atan2(i.direction[0],i.direction[1])-Math.atan2(a.direction[0],a.direction[1]),-Math.PI,Math.PI)),f=0;if(1e-10>Math.abs(m-Math.PI)){var v=[i.point[0],90*i.direction[1]],h=[a.point[0],90*i.direction[1]];p.push(v,h,a.point)}else if(m>l){if((u=Math.ceil(m/l))<d/l||r-n==0){s=(r-n)/u;for(var g=1;g<=u;g++)p.push(t(n+s*g).point)}else s=(r-n)/2,c=t(f=n+s),p=(p=p.concat(e(t,n,f,i,c))).concat(e(t,f,r,c,a))}else p.push(a.point);return p}(a,p/3,(p+1)/3,0===p?{point:s,direction:u}:void 0,2===p?{point:c,direction:l}:void 0));return d}(e[0],e[1]))}},80283:(e,t,n)=>{"use strict";function r(e,t,n){for(var r=Math.floor(e/n),o=Math.floor(t/n),i=[],a=r;a<=o;a++)i.push([a===r?e-r*n:0,a===o?t-o*n:n]);return i}function o(e,t){var n=r(e[0][0],e[1][0],t),o=r(e[0][1],e[1][1],t),i=[];return n.forEach(function(e){o.forEach(function(t){i.push([[e[0],t[0]],[e[1],t[1]]])})}),i}n.d(t,{C:()=>o})},41886:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});var r=n(48860),o=n(15900),i=n(95930),a=n(60309),s=n(37806);function u(e){var t,n,u,c,l,d=[[0,0],[0,0]];return e.length&&(d=(t=e.map(function(e){return(0,o.f)(e,s.m6)}),n=(0,i.Z)(s.m6),u=s.dg,c=[[1/0,1/0],[-1/0,-1/0]],l=t.length,[0,1].forEach(function(e){if(u[e]){t.sort(function(t,n){return t[e]-n[e]});var o=0;t.forEach(function(i,a){var s=a+1,u=s===l?t[0]:t[s],d=(0,r.d)(u[e]-i[e],0,n);d>=o&&(o=d,c[0][e]=u[e],c[1][e]=i[e])}),c[0][e]>c[1][e]&&(c[1][e]+=n)}else t.forEach(function(t){c[0][e]=Math.min(c[0][e],t[e]),c[1][e]=Math.max(c[1][e],t[e])})}),c).map(function(e){return(0,a.W)(e,s.m6)})),d}},38067:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var r=n(48447);function o(e,t){return(0,r.t)(e,t).distance}},39705:(e,t,n)=>{"use strict";function r(e,t){void 0===t&&(t={}),t.reverse?(n=e[1],r=e[0]):(n=e[0],r=e[1]);var n,r,o=void 0===t.fractionDigits?6:t.fractionDigits;return n.toFixed(o)+","+r.toFixed(o)}n.d(t,{s:()=>r})},21307:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(37806);function o(e,t){return void 0===t&&(t=r.iO),Math.min(Math.max(-90+t,e),90-t)}},44330:(e,t,n)=>{"use strict";n.d(t,{u:()=>o});var r=n(48860);function o(e){return(0,r.d)(e,-180,180)}},29657:(e,t,n)=>{"use strict";n.d(t,{S:()=>u});var r=n(73841),o=n(37806),i=n(94960),a=n(21307),s=n(16732);function u(e,t,n){e[1]=(0,a.v)(e[1]);var u=(0,r.I)(e[1]),c=(0,r.I)(e[0]),l=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),d=t[1]/l,p=t[0]/l,m=(1-o.KH)*Math.tan(u),f=(0,s.u)(Math.cos(u))*Math.sqrt(1/(1+m*m)),v=Math.sqrt(1-f*f)*(0,s.u)(m),h=Math.atan2(m,d),g=f*p,y=(1-g)*(1+g),_=y*(o.d3*o.d3/(o.AL*o.AL)-1),b=1+_*(4096+_*(-768+_*(320-175*_)))/16384,w=_*(256+_*(-128+_*(74-47*_)))/1024,E=function(e){var t,r=n*e,a=r/(o.AL*b),s=Math.cos(2*(h+a/2)),u=0,l=0;do{var m=w*Math.sin(a)*(s+.25*w*(Math.cos(a)*(-1+2*s*s)-1/6*w*s*(-3+4*Math.sin(a)*Math.sin(a))*(-3+4*s*s)));t=m-l,l=m,a=r/(o.AL*b)+m,u++}while(Math.abs(t)>o.Qs&&u<10)var _=v*Math.sin(a)-f*Math.cos(a)*d,E=Math.atan2(v*Math.cos(a)+f*Math.sin(a)*d,(1-o.KH)*Math.sqrt(g*g+_*_)),S=Math.atan2(Math.sin(a)*p,f*Math.cos(a)-v*Math.sin(a)*d),C=o.KH/16*y*(4+o.KH*(4-3*y)),k=S-(1-C)*o.KH*g*(a+C*Math.sin(a)*(s+C*Math.cos(a)*(-1+2*s*s))),R=Math.atan2(g,-v*Math.sin(a)+f*Math.cos(a)*d);return{point:[(0,i.Z)(c+k),(0,i.Z)(E)],direction:[Math.sin(R),Math.cos(R)]}},S=E(1);return{startPoint:e,startDirection:t,endPoint:S.point,endDirection:S.direction,distance:n,pathFunction:E}}},48447:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var r=n(29657),o=n(73841),i=n(48860),a=n(37806),s=n(21307),u=n(16732);function c(e){return Math.abs(e-(0,u.u)(e)*Math.PI/2)<a.Qs?(0,u.u)(e)*Math.PI/2:Math.atan((1-a.KH)*Math.tan(e))}function l(e,t,n){return function(o){var i=(0,r.S)(e,t,n*o);return{point:i.endPoint,direction:i.endDirection}}}function d(e,t,n){if(e===t||e[0]===t[0]&&e[1]===t[1]){var r,d,p,m=[1,1];return{startPoint:e,startDirection:m,endPoint:t,endDirection:m,distance:0,pathFunction:l(e,m,0)}}e[1]=(0,s.v)(e[1]),t[1]=(0,s.v)(t[1]);var f=(0,o.I)(e[1]),v=(0,o.I)(t[1]),h=(0,o.I)(t[0]-e[0]),g=c(f),y=c(v),_=h,b=_,w=0,E=0;if(0===f&&0===v){var S=(0,i.d)(t[0]-e[0],n?-360:-180,n?360:180);p=[(d=[S>0?1:-1,0])[0],d[1]],E=2*Math.PI*a.d3/360*Math.abs(S)}else{var C=void 0,k=void 0,R=void 0,x=void 0,P=void 0,M=void 0,I=void 0;do C=Math.sqrt(Math.pow(Math.cos(y)*Math.sin(_),2)+Math.pow(Math.cos(g)*Math.sin(y)-Math.sin(g)*Math.cos(y)*Math.cos(_),2)),k=Math.sin(g)*Math.sin(y)+Math.cos(g)*Math.cos(y)*Math.cos(_),x=1-Math.pow(R=Math.cos(g)*Math.cos(y)*Math.sin(_)/Math.sin(P=n?2*Math.PI-Math.atan2(C,k):Math.atan2(C,k)),2),M=Math.cos(P)-2*Math.sin(g)*Math.sin(y)/x,r=Math.abs(b-(_=Math.min(Math.max(h+(1-(I=a.KH/16*x*(4+a.KH*(4-3*x))))*a.KH*R*(P+I*Math.sin(P)*(M+I*Math.cos(P)*(-1+2*M*M))),-2*Math.PI),2*Math.PI))),b=_,w++;while(r>a.Qs&&w<10)var T=x*(a.d3*a.d3-a.AL*a.AL)/(a.AL*a.AL),Z=T*(256+T*(-128+T*(74-47*T)))/1024,D=Z*Math.sin(P)*(M+.25*Z*(Math.cos(P)*(-1+2*M*M)-1/6*Z*M*(-3+4*Math.sin(P)*Math.sin(P))*(-3+4*M*M))),L=Math.atan2(Math.cos(y)*Math.sin(_),Math.cos(g)*Math.sin(y)-Math.sin(g)*Math.cos(y)*Math.cos(_)),A=Math.atan2(Math.cos(g)*Math.sin(_),-Math.sin(g)*Math.cos(y)+Math.cos(g)*Math.sin(y)*Math.cos(_));E=a.AL*(1+T*(4096+T*(-768+T*(320-175*T)))/16384)*(P-D),n&&(L-=(0,u.u)(L-Math.PI)*Math.PI,A-=(0,u.u)(A-Math.PI)*Math.PI),d=[Math.sin(L),Math.cos(L)],p=[Math.sin(A),Math.cos(A)]}return{startPoint:e,startDirection:d,endPoint:t,endDirection:p,distance:E,pathFunction:l(e,d,E)}}},16732:(e,t,n)=>{"use strict";function r(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1}n.d(t,{u:()=>r})},36897:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var r=n(37806);function o(e,t,n){return void 0===n&&(n=r.eU),Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n}},12690:(e,t,n)=>{"use strict";function r(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}n.d(t,{g:()=>r})},48860:(e,t,n)=>{"use strict";function r(e,t,n){return e===Number.POSITIVE_INFINITY?n:e===Number.NEGATIVE_INFINITY?t:e===t&&e===n?e:e-Math.floor((e-t)/(n-t))*(n-t)}n.d(t,{d:()=>r})},73841:(e,t,n)=>{"use strict";function r(e){return Math.PI/180*e}n.d(t,{I:()=>r})},39029:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(15900);function o(e,t,n,o,i){for(var a=0;a<e.length-1;a++){var s=[e[a],e[a+1]];if(function(e,t,n){var r=t[0],o=t[1],i=n[0]-r,a=n[1]-o,s=i*i+a*a,u=0;0!==s&&(u=Math.max(0,Math.min(1,u=((e[0]-r)*i+(e[1]-o)*a)/s)));var c=r+u*i,l=o+u*a,d=e[0]-c,p=e[1]-l;return Math.sqrt(d*d+p*p)}((0,r.f)(t,o),(0,r.f)(s[0],o),(0,r.f)(s[1],o))<n/2){var u=function(e,t){var n=t[0],r=t[1],o=[n[1]-r[1],r[0]-n[0],n[0]*r[1]-r[0]*n[1]],i=[o[1],-o[0],e[1]*o[0]-e[0]*o[1]],a=o[0]*i[1]-i[0]*o[1];return[(i[2]*o[1]-o[2]*i[1])/a,(i[0]*o[2]-o[0]*i[2])/a]}(t,[s[0],s[1]]);return i?{point:u,segmentIndex:a}:u}}}},94960:(e,t,n)=>{"use strict";function r(e){return 180/Math.PI*e}n.d(t,{Z:()=>r})},4670:(e,t,n)=>{"use strict";function r(e){return[(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5]}n.d(t,{Y:()=>i});var o=n(27689);function i(e,t){var n=r(e),i=r(t),a=(0,o.j)(e),s=(0,o.j)(t);return Math.abs(n[0]-i[0])<(a[0]+s[0])*.5&&Math.abs(n[1]-i[1])<(a[1]+s[1])*.5}},37048:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(15900),o=n(95930);function i(e,t){var n=(0,r.f)(e[0],t),i=(0,r.f)(e[1],t),a=(0,o.Z)(t),s=[[n[0],n[1]],[i[0],i[1]]];return n[0]>i[0]&&(s[0][0]=n[0],s[1][0]=i[0]+a),n[1]>i[1]&&(s[0][1]=i[1],s[1][1]=n[1]),s}},15900:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(44330),o=n(21307),i=n(37806);function a(e,t,n){void 0===n&&(n=!1),s=(a=e)[0],u=a[1];var a,s,u,c=(e=[(0,r.u)(s),(0,o.v)(u)])[1]*Math.PI/180,l=Math.tan(.25*Math.PI+.5*c),d=Math.pow(2,t+8),p=n?1:Math.pow(Math.tan(.25*Math.PI+.5*Math.asin(i.Iv*Math.sin(c))),i.Iv);return[(e[0]/360+.5)*d,(.5-Math.log(l/p)/(2*Math.PI))*d]}},27689:(e,t,n)=>{"use strict";function r(e){return[Math.abs(e[1][0]-e[0][0]),Math.abs(e[1][1]-e[0][1])]}n.d(t,{j:()=>r})},60309:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var r=n(37806);function o(e,t,n){void 0===n&&(n=!0);var o=Math.pow(2,t+8),i=n?e[0]%o:e[0],a=2*Math.atan(Math.exp(Math.PI*(1-2*e[1]/o)))-.5*Math.PI;return[360*i/o-180,180*(a+r.D2*Math.sin(2*a)+r.D4*Math.sin(4*a)+r.D6*Math.sin(6*a)+r.D8*Math.sin(8*a))/Math.PI]}},41372:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>o,pi:()=>i,ev:()=>a});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}},32448:e=>{"use strict";e.exports="/build/client/worker/content_provider.worker/a3a480812b0b2481bd17.js"},1367:e=>{"use strict";e.exports="/build/client/worker/gltf_decoder.worker/0a4ba5434ededca3d56b.js"},22678:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{_:()=>r})},2267:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{_:()=>o})},11640:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(21769),o=n(43439),i=n(14276),a=n(73270);function s(e){return(0,r.o)(e)||(0,o.f)(e)||(0,a.N)(e)||(0,i.i)()}},13317:(e,t,n)=>{"use strict";var r=n(71036),o=n(62281);t.Z=function(e,t){t=(0,r.Z)(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[(0,o.Z)(t[n++])];return n&&n==i?e:void 0}},85469:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(45365),o=n(66808),i=function(e,t,n,i){var a=n.length,s=a,u=!i;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var l=(c=n[a])[0],d=e[l],p=c[1];if(u&&c[2]){if(void 0===d&&!(l in e))return!1}else{var m=new r.Z;if(i)var f=i(d,p,l,e,t,m);if(!(void 0===f?(0,o.Z)(p,d,3,i,m):f))return!1}}return!0},a=n(77226),s=function(e){return e==e&&!(0,a.Z)(e)},u=n(8543),c=function(e){for(var t=(0,u.Z)(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,s(o)]}return t},l=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},d=function(e){var t=c(e);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}},p=n(13317),m=function(e,t,n){var r=null==e?void 0:(0,p.Z)(e,t);return void 0===r?n:r},f=n(94262),v=n(99365),h=n(62281),g=n(69203),y=n(27771),_=n(54193),b=function(e){var t,n,r;if("function"==typeof e)return e;if(null==e)return g.Z;if("object"==typeof e){return(0,y.Z)(e)?(t=e[0],n=e[1],(0,v.Z)(t)&&s(n)?l((0,h.Z)(t),n):function(e){var r=m(e,t);return void 0===r&&r===n?(0,f.Z)(e,t):(0,o.Z)(n,r,3)}):d(e)}return r=e,(0,v.Z)(r)?(0,_.Z)((0,h.Z)(r)):function(e){return(0,p.Z)(e,r)}}},54193:(e,t)=>{"use strict";t.Z=function(e){return function(t){return null==t?void 0:t[e]}}},47855:(e,t)=>{"use strict";t.Z=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},71976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(17685),o=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},i=n(27771),a=n(72714),s=1/0,u=r.Z?r.Z.prototype:void 0,c=u?u.toString:void 0,l=function e(t){if("string"==typeof t)return t;if((0,i.Z)(t))return o(t,e)+"";if((0,a.Z)(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},71036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(27771),o=n(99365),i=n(42454),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,u=function(e){var t=(0,i.Z)(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,n,r,o){t.push(r?o.replace(s,"$1"):n||e)}),t}),c=n(77338),l=function(e,t){return(0,r.Z)(e)?e:(0,o.Z)(e,t)?[e]:u((0,c.Z)(e))}},35042:(e,t,n)=>{"use strict";var r=n(47855);t.Z=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:(0,r.Z)(e,t,n)}},39047:(e,t)=>{"use strict";var n=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.Z=function(e){return n.test(e)}},99365:(e,t,n)=>{"use strict";var r=n(27771),o=n(72714),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.Z=function(e,t){if((0,r.Z)(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||(0,o.Z)(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},75876:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(39047),o="\ud800-\udfff",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\ud83c[\udffb-\udfff]",s="[^"+o+"]",u="(?:\ud83c[\udde6-\uddff]){2}",c="[\ud800-\udbff][\udc00-\udfff]",l="(?:"+i+"|"+a+")?",d="[\\ufe0e\\ufe0f]?",p="(?:\\u200d(?:"+[s,u,c].join("|")+")"+d+l+")*",m=RegExp(a+"(?="+a+")|(?:"+[s+i+"?",i,u,c,"["+o+"]"].join("|")+")"+(d+l+p),"g"),f=function(e){return(0,r.Z)(e)?e.match(m)||[]:e.split("")}},62281:(e,t,n)=>{"use strict";var r=n(72714),o=1/0;t.Z=function(e){if("string"==typeof e||(0,r.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},22967:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(77338),o=n(35042),i=n(39047),a=n(75876),s=function(e){e=(0,r.Z)(e);var t=(0,i.Z)(e)?(0,a.Z)(e):void 0,n=t?t[0]:e.charAt(0),s=t?(0,o.Z)(t,1).join(""):e.slice(1);return n.toUpperCase()+s},u=function(e){return s((0,r.Z)(e).toLowerCase())}},57619:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(58694),o=n(17685),i=n(84732),a=n(27771),s=o.Z?o.Z.isConcatSpreadable:void 0,u=function(e){return(0,a.Z)(e)||(0,i.Z)(e)||!!(s&&e&&e[s])},c=function e(t,n,o,i,a){var s=-1,c=t.length;for(o||(o=u),a||(a=[]);++s<c;){var l=t[s];n>0&&o(l)?n>1?e(l,n-1,o,i,a):(0,r.Z)(a,l):i||(a[a.length]=l)}return a},l=function(e){return(null==e?0:e.length)?c(e,1):[]}},94262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=function(e,t){return null!=e&&t in Object(e)},o=n(71036),i=n(84732),a=n(27771),s=n(56009),u=n(1656),c=n(62281),l=function(e,t,n){t=(0,o.Z)(t,e);for(var r=-1,l=t.length,d=!1;++r<l;){var p=(0,c.Z)(t[r]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++r!=l?d:!!(l=null==e?0:e.length)&&(0,u.Z)(l)&&(0,s.Z)(p,l)&&((0,a.Z)(e)||(0,i.Z)(e))},d=function(e,t){return null!=e&&l(e,t,r)}},69203:(e,t)=>{"use strict";t.Z=function(e){return e}},42454:(e,t,n)=>{"use strict";var r=n(80520);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r.Z),n}o.Cache=r.Z,t.Z=o},85087:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(72714),o=function(e,t,n){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=t(a);if(null!=s&&(void 0===u?s==s&&!(0,r.Z)(s):n(s,u)))var u=s,c=a}return c},i=n(85469),a=function(e,t){return e<t},s=function(e,t){return e&&e.length?o(e,(0,i.Z)(t,2),a):void 0}},111:(e,t,n)=>{"use strict";var r=n(99111),o=n(77226);t.Z=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return(0,o.Z)(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),(0,r.Z)(e,t,{leading:i,maxWait:t,trailing:a})}},77338:(e,t,n)=>{"use strict";var r=n(71976);t.Z=function(e){return null==e?"":(0,r.Z)(e)}},59410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(71976),o=n(35042),i=n(39047),a=n(77226),s=n(13243),u=n(18533),c=n(21162),l=n(98351),d=l.Z&&l.Z.isRegExp,p=d?(0,c.Z)(d):function(e){return(0,u.Z)(e)&&"[object RegExp]"==(0,s.Z)(e)},m=(0,n(54193).Z)("length"),f="\ud800-\udfff",v="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",h="\ud83c[\udffb-\udfff]",g="[^"+f+"]",y="(?:\ud83c[\udde6-\uddff]){2}",_="[\ud800-\udbff][\udc00-\udfff]",b="(?:"+v+"|"+h+")?",w="[\\ufe0e\\ufe0f]?",E="(?:\\u200d(?:"+[g,y,_].join("|")+")"+w+b+")*",S=RegExp(h+"(?="+h+")|(?:"+[g+v+"?",v,y,_,"["+f+"]"].join("|")+")"+(w+b+E),"g"),C=function(e){for(var t=S.lastIndex=0;S.test(e);)++t;return t},k=n(75876),R=n(99651),x=n(77338),P=/\w*$/,M=function(e,t){var n=30,s="...";if((0,a.Z)(t)){var u="separator"in t?t.separator:u;n="length"in t?(0,R.Z)(t.length):n,s="omission"in t?(0,r.Z)(t.omission):s}var c=(e=(0,x.Z)(e)).length;if((0,i.Z)(e)){var l=(0,k.Z)(e);c=l.length}if(n>=c)return e;var d=n-(v=s,(0,i.Z)(v)?C(v):m(v));if(d<1)return s;var f=l?(0,o.Z)(l,0,d).join(""):e.slice(0,d);if(void 0===u)return f+s;if(l&&(d+=f.length-d),p(u)){if(e.slice(d).search(u)){var v,h,g=f;for(u.global||(u=RegExp(u.source,(0,x.Z)(P.exec(u))+"g")),u.lastIndex=0;h=u.exec(g);)var y=h.index;f=f.slice(0,void 0===y?d:y)}}else if(e.indexOf((0,r.Z)(u),d)!=d){var _=f.lastIndexOf(u);_>-1&&(f=f.slice(0,_))}return f+s}}}]);